<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    
    <title>å­¦ä¹ æœ­è®°-Pythonçˆ¬è™«åŸºç¡€å…¥é—¨ | Kmoon | ä¸ªäººå­¦ä¹ è®°å½•</title>

    <meta name="description" content="&lt;blockquote&gt;
&lt;p&gt;2022-12-18 ~ 2022.12.22&lt;br&gt;å†æ—¶å››å¤©ï¼Œè¿‡äº†ä¸€éå°šç¡…è°·è§†é¢‘ï¼ŒæŒæ¡äº†åŸºç¡€çˆ¬è™«çŸ¥è¯†ã€‚&lt;br&gt;æ¥ä¸‹æ¥è®¡åˆ’åˆ©ç”¨ä¸€å‘¨æ—¶é—´å°†æ‰€æœ‰æ¡ˆä¾‹ç»ƒä¹ å…¨éƒ¨äº²æ‰‹æ•²ä¸€éï¼Œå·©å›ºä¸€ä¸‹å„ä¸ªåº“å’Œæ¡†æ¶çš„å†…å®¹ã€‚&lt;br&gt;ç„¶åè‡ªå·±å†™ä¸€ä¸ªçˆ¬å–æºç¨‹ç½‘ç‰¹å®šæ—…æ¸¸æ™¯ç‚¹è¯„è®ºæ•°æ®ï¼Œå¯¼å…¥MySQLæ•°æ®åº“(ä½œä¸ºä¹¡æ‘æ–‡æ—…é¡¹ç›®æ•°æ®æº)&lt;/p&gt;
&lt;/blockquote&gt;">
    <meta name="keywords" content="">

    

    <meta property="og:locale" content="cn" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content= "å­¦ä¹ æœ­è®°-Pythonçˆ¬è™«åŸºç¡€å…¥é—¨ | Kmoon | ä¸ªäººå­¦ä¹ è®°å½•"  />
    <meta property="og:description" content= "&lt;blockquote&gt;
&lt;p&gt;2022-12-18 ~ 2022.12.22&lt;br&gt;å†æ—¶å››å¤©ï¼Œè¿‡äº†ä¸€éå°šç¡…è°·è§†é¢‘ï¼ŒæŒæ¡äº†åŸºç¡€çˆ¬è™«çŸ¥è¯†ã€‚&lt;br&gt;æ¥ä¸‹æ¥è®¡åˆ’åˆ©ç”¨ä¸€å‘¨æ—¶é—´å°†æ‰€æœ‰æ¡ˆä¾‹ç»ƒä¹ å…¨éƒ¨äº²æ‰‹æ•²ä¸€éï¼Œå·©å›ºä¸€ä¸‹å„ä¸ªåº“å’Œæ¡†æ¶çš„å†…å®¹ã€‚&lt;br&gt;ç„¶åè‡ªå·±å†™ä¸€ä¸ªçˆ¬å–æºç¨‹ç½‘ç‰¹å®šæ—…æ¸¸æ™¯ç‚¹è¯„è®ºæ•°æ®ï¼Œå¯¼å…¥MySQLæ•°æ®åº“(ä½œä¸ºä¹¡æ‘æ–‡æ—…é¡¹ç›®æ•°æ®æº)&lt;/p&gt;
&lt;/blockquote&gt;" />
    <meta property="og:url" content="https://www.kmoon.fun/2022/spider/index.html" />
    <meta property="og:site_name" content="" />
    <meta property="article:author" content="Kmoon" />
    <meta property="article:publisher" content="" />
    <meta property="og:description" content="&lt;blockquote&gt;
&lt;p&gt;2022-12-18 ~ 2022.12.22&lt;br&gt;å†æ—¶å››å¤©ï¼Œè¿‡äº†ä¸€éå°šç¡…è°·è§†é¢‘ï¼ŒæŒæ¡äº†åŸºç¡€çˆ¬è™«çŸ¥è¯†ã€‚&lt;br&gt;æ¥ä¸‹æ¥è®¡åˆ’åˆ©ç”¨ä¸€å‘¨æ—¶é—´å°†æ‰€æœ‰æ¡ˆä¾‹ç»ƒä¹ å…¨éƒ¨äº²æ‰‹æ•²ä¸€éï¼Œå·©å›ºä¸€ä¸‹å„ä¸ªåº“å’Œæ¡†æ¶çš„å†…å®¹ã€‚&lt;br&gt;ç„¶åè‡ªå·±å†™ä¸€ä¸ªçˆ¬å–æºç¨‹ç½‘ç‰¹å®šæ—…æ¸¸æ™¯ç‚¹è¯„è®ºæ•°æ®ï¼Œå¯¼å…¥MySQLæ•°æ®åº“(ä½œä¸ºä¹¡æ‘æ–‡æ—…é¡¹ç›®æ•°æ®æº)&lt;/p&gt;
&lt;/blockquote&gt;" />
    <meta name="twitter:title" content="å­¦ä¹ æœ­è®°-Pythonçˆ¬è™«åŸºç¡€å…¥é—¨ | Kmoon | ä¸ªäººå­¦ä¹ è®°å½•"/>
    <meta name="twitter:description" content="&lt;blockquote&gt;
&lt;p&gt;2022-12-18 ~ 2022.12.22&lt;br&gt;å†æ—¶å››å¤©ï¼Œè¿‡äº†ä¸€éå°šç¡…è°·è§†é¢‘ï¼ŒæŒæ¡äº†åŸºç¡€çˆ¬è™«çŸ¥è¯†ã€‚&lt;br&gt;æ¥ä¸‹æ¥è®¡åˆ’åˆ©ç”¨ä¸€å‘¨æ—¶é—´å°†æ‰€æœ‰æ¡ˆä¾‹ç»ƒä¹ å…¨éƒ¨äº²æ‰‹æ•²ä¸€éï¼Œå·©å›ºä¸€ä¸‹å„ä¸ªåº“å’Œæ¡†æ¶çš„å†…å®¹ã€‚&lt;br&gt;ç„¶åè‡ªå·±å†™ä¸€ä¸ªçˆ¬å–æºç¨‹ç½‘ç‰¹å®šæ—…æ¸¸æ™¯ç‚¹è¯„è®ºæ•°æ®ï¼Œå¯¼å…¥MySQLæ•°æ®åº“(ä½œä¸ºä¹¡æ‘æ–‡æ—…é¡¹ç›®æ•°æ®æº)&lt;/p&gt;
&lt;/blockquote&gt;"/>
    <script type="application/ld+json">
        {
            "description": "&lt;blockquote&gt;
&lt;p&gt;2022-12-18 ~ 2022.12.22&lt;br&gt;å†æ—¶å››å¤©ï¼Œè¿‡äº†ä¸€éå°šç¡…è°·è§†é¢‘ï¼ŒæŒæ¡äº†åŸºç¡€çˆ¬è™«çŸ¥è¯†ã€‚&lt;br&gt;æ¥ä¸‹æ¥è®¡åˆ’åˆ©ç”¨ä¸€å‘¨æ—¶é—´å°†æ‰€æœ‰æ¡ˆä¾‹ç»ƒä¹ å…¨éƒ¨äº²æ‰‹æ•²ä¸€éï¼Œå·©å›ºä¸€ä¸‹å„ä¸ªåº“å’Œæ¡†æ¶çš„å†…å®¹ã€‚&lt;br&gt;ç„¶åè‡ªå·±å†™ä¸€ä¸ªçˆ¬å–æºç¨‹ç½‘ç‰¹å®šæ—…æ¸¸æ™¯ç‚¹è¯„è®ºæ•°æ®ï¼Œå¯¼å…¥MySQLæ•°æ®åº“(ä½œä¸ºä¹¡æ‘æ–‡æ—…é¡¹ç›®æ•°æ®æº)&lt;/p&gt;
&lt;/blockquote&gt;",
            "author": { "@type": "Person", "name": "Kmoon" },
            "@type": "BlogPosting",
            "url": "https://www.kmoon.fun/2022/spider/index.html",
            "publisher": {
            "@type": "Organization",
            "logo": {
                "@type": "ImageObject",
                "url": "https://www.kmoon.fun/image/avatar.png"
            },
            "name": "Kmoon"
            },
            "headline": "å­¦ä¹ æœ­è®°-Pythonçˆ¬è™«åŸºç¡€å…¥é—¨ | Kmoon | ä¸ªäººå­¦ä¹ è®°å½•",
            "datePublished": "2022-12-18T00:51:41.000Z",
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "https://www.kmoon.fun/2022/spider/index.html"
            },
            "@context": "http://schema.org"
        }
    </script>




    

    
    <meta property="algolia:search" data-application-id="8Z51BHYAUH" data-api-key="dbc9dafd607e95ea5aa312369120eabd" data-index-name="kmoon_blog">
    

    

    

    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸŒœï¸</text></svg>">
    

    

    

    
<link rel="stylesheet" href="/dist/build.css?v=1654266144177.css">


    
<link rel="stylesheet" href="/dist/custom.css?v=1654266144177.css">


    <script>
        window.isPost = true
        window.aomori = {
            
            
            valine: {
                enable: true,
                appId: "i7G1tHcsR13KVa00grUUf6mr-gzGzoHsz",
                appKey: "94N35fphXFiN5BGMNS9V5mHe",
                placeholder: "Hello World!",
                avatar: "",
                pageSize: "10",
                lang: "zh-CN",
                visitor: false,
                highlight: false,
                recordIP: false,
                emojiCDN: "",
                enableQQ: false,
                requiredFields: []
            },
            
            
        }
        window.aomori_logo_typed_animated = true
        window.aomori_search_algolia = true

    </script>

<meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Kmoon | ä¸ªäººå­¦ä¹ è®°å½•" type="application/atom+xml">
</head>

<body>

    <div class="container">
    <header class="header">
        <div class="header-type">
            
            <div class="header-type-avatar avatar avatar-sm">
                <img src="/image/avatar.png" alt="Kmoon">
            </div>
            
            <div class="header-type-inner">
                
                    <div id="typed-strings" style="display:none">
                        <p>Kmoon | ä¸ªäººå­¦ä¹ è®°å½•</p>
                    </div>
                    <a class="header-type-title" id="typed" href="/"></a>
                
    
                
            </div>
        </div>
        <div class="header-menu">
            <div class="header-menu-inner">
                
                <a href="/">ä¸»é¡µ</a>
                
                <a href="/archives">å½’æ¡£</a>
                
                <a href="/2022/10/about/">å…³äº</a>
                
                <a href="/friends">å‹é“¾</a>
                
                <a href="/photography">æ‘„å½±</a>
                
                <a href="/categories/%E6%B7%B1%E6%B8%8A/">æ·±æ¸Š</a>
                
                <a href="/wiki/">Wiki</a>
                
            </div>
            <div class="header-menu-social">
                
    <a class="social" target="_blank" href="https://github.com/kmoonn/">
        <ion-icon name="logo-github"></ion-icon>
    </a>

    <a class="social" target="_blank" href="">
        <ion-icon name="logo-wechat"></ion-icon>
    </a>

            </div>
        </div>

        <div class="header-menu-mobile">
            <div class="header-menu-mobile-inner" id="mobile-menu-open">
                <i class="icon icon-menu"></i>
            </div>
        </div>
    </header>

    <div class="header-menu-mobile-menu">
        <div class="header-menu-mobile-menu-bg"></div>
        <div class="header-menu-mobile-menu-wrap">
            <div class="header-menu-mobile-menu-inner">
                <div class="header-menu-mobile-menu-close" id="mobile-menu-close">
                    <i class="icon icon-cross"></i>
                </div>
                <div class="header-menu-mobile-menu-list">
                    
                    <a href="/">ä¸»é¡µ</a>
                    
                    <a href="/archives">å½’æ¡£</a>
                    
                    <a href="/2022/10/about/">å…³äº</a>
                    
                    <a href="/friends">å‹é“¾</a>
                    
                    <a href="/photography">æ‘„å½±</a>
                    
                    <a href="/categories/%E6%B7%B1%E6%B8%8A/">æ·±æ¸Š</a>
                    
                    <a href="/wiki/">Wiki</a>
                    
                </div>
            </div>
        </div>
    </div>

</div>

    <div class="container">
        <div class="main">
            <section class="inner">
                <section class="inner-main">
                    <div class="post">
    <article id="post-cld1b87d9002zo8vm583d5sqr" class="article article-type-post" itemscope
    itemprop="blogPost">

    <div class="article-inner">

        
          
        
        
        

        
        <header class="article-header">
            
  
    <h1 class="article-title" itemprop="name">
      å­¦ä¹ æœ­è®°-Pythonçˆ¬è™«åŸºç¡€å…¥é—¨
    </h1>
  

        </header>
        

        <div class="article-more-info article-more-info-post hairline">

            <div class="article-date">
  <time datetime="2022-12-18T00:51:41.000Z" itemprop="datePublished">2022-12-18</time>
</div>

            
            <div class="article-category">
                <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E6%9C%AD%E8%AE%B0/">å­¦ä¹ æœ­è®°</a>
            </div>
            

            
            <div class="article-tag">
                <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%88%AC%E8%99%AB/" rel="tag">çˆ¬è™«</a></li></ul>
            </div>
            

            
            <div class="article-busuanzi">
                <span id="busuanzi_value_page_pv">N</span> äººçœ‹è¿‡
            </div>
            

        </div>

        <div class="article-entry post-inner-html hairline" itemprop="articleBody">
            <blockquote>
<p>2022-12-18 ~ 2022.12.22<br>å†æ—¶å››å¤©ï¼Œè¿‡äº†ä¸€éå°šç¡…è°·è§†é¢‘ï¼ŒæŒæ¡äº†åŸºç¡€çˆ¬è™«çŸ¥è¯†ã€‚<br>æ¥ä¸‹æ¥è®¡åˆ’åˆ©ç”¨ä¸€å‘¨æ—¶é—´å°†æ‰€æœ‰æ¡ˆä¾‹ç»ƒä¹ å…¨éƒ¨äº²æ‰‹æ•²ä¸€éï¼Œå·©å›ºä¸€ä¸‹å„ä¸ªåº“å’Œæ¡†æ¶çš„å†…å®¹ã€‚<br>ç„¶åè‡ªå·±å†™ä¸€ä¸ªçˆ¬å–æºç¨‹ç½‘ç‰¹å®šæ—…æ¸¸æ™¯ç‚¹è¯„è®ºæ•°æ®ï¼Œå¯¼å…¥MySQLæ•°æ®åº“(ä½œä¸ºä¹¡æ‘æ–‡æ—…é¡¹ç›®æ•°æ®æº)</p>
</blockquote>
<span id="more"></span>

<img src="http://image.kmoon.fun//images/202212221721137.png" alt="image-20221222172157807" style="zoom:80%;">

<h3 id="æ¡ˆä¾‹ç»ƒä¹ "><a href="#æ¡ˆä¾‹ç»ƒä¹ " class="headerlink" title="æ¡ˆä¾‹ç»ƒä¹ "></a>æ¡ˆä¾‹ç»ƒä¹ </h3><ul>
<li>postè¯·æ±‚ç™¾åº¦ç¿»è¯‘</li>
<li>ajaxçš„getè¯·æ±‚è±†ç“£ç”µå½±</li>
<li>ajaxçš„postè¯·æ±‚è‚¯å¾·åŸºå®˜ç½‘</li>
<li>QQç©ºé—´çš„cookieç™»å½•</li>
<li>xpathè·å–ç«™é•¿ä¹‹å®¶ç´ æ</li>
<li>jsonpathè§£ææ·˜ç¥¨ç¥¨</li>
<li>bs4çˆ¬å–æ˜Ÿå·´å…‹æ•°æ®</li>
<li>requests cookieç™»å½•å¤è¯—æ–‡ç½‘</li>
<li>è¶…çº§é¹°æ‰“ç å¹³å°ä½¿ç”¨</li>
<li>scrapy 58åŒåŸ</li>
<li>scrapy æ±½è½¦ä¹‹å®¶</li>
<li>scrapy å½“å½“ç½‘</li>
<li>scrapy ç”µå½±å¤©å ‚</li>
<li>scrapy é“¾æ¥æå–å™¨</li>
<li>scrapy crawlspider è¯»ä¹¦ç½‘æ•°æ®å…¥åº“</li>
</ul>
<p><img src="http://image.kmoon.fun//images/202212180855461.png" alt="image-20221218085504392"></p>
<h1 id="pythonå®‰è£…"><a href="#pythonå®‰è£…" class="headerlink" title="pythonå®‰è£…"></a>pythonå®‰è£…</h1><p><a href="http://www.python.org/">http://www.python.org/</a>	python3.7</p>
<h1 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h1><p>ç”¨æˆ·å˜é‡ Pathï¼š E:\python\   E:\python\Scripts\</p>
<p>æ–°æ·»åŠ çš„è·¯å¾„ E:\python æ˜¯Pythonå®‰è£…å¥½ä»¥åPython.exe è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•</p>
<p>æ–°æ·»åŠ çš„è·¯å¾„ E:\python\Scripts æ˜¯Pythonå®‰è£…å¥½ä»¥åï¼Œ pip.exe è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚</p>
<h1 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h1><blockquote>
<p>pipæ˜¯ä¸€ä¸ªç°ä»£çš„ã€é€šç”¨çš„PythonåŒ…ç®¡ç†å·¥å…·ã€‚</p>
<p>æä¾›äº†å¯¹pythonåŒ…çš„æŸ¥æ‰¾ã€ä¸‹è½½ã€å®‰è£…ã€å¸è½½çš„åŠŸèƒ½ï¼Œä¾¿äºæˆ‘ä»¬å¯¹Pythonçš„èµ„æºåŒ…è¿›è¡Œç®¡ç†ã€‚</p>
</blockquote>
<p>pip -V æŸ¥çœ‹ç‰ˆæœ¬</p>
<p><img src="http://image.kmoon.fun//images/202212180923100.png" alt="image-20221218092308052"></p>
<h2 id="ä¿®æ”¹pipä¸‹è½½æº"><a href="#ä¿®æ”¹pipä¸‹è½½æº" class="headerlink" title="ä¿®æ”¹pipä¸‹è½½æº"></a>ä¿®æ”¹pipä¸‹è½½æº</h2><p>é»˜è®¤æ˜¯ä» <a href="https://files.pythonhosted.org/">https://files.pythonhosted.org/</a> ç½‘ç«™ä¸Šä¸‹è½½</p>
<p><code>pip install åŒ…å -i å›½å†…æºåœ°å€</code></p>
<p><img src="http://image.kmoon.fun//images/202212180924238.png" alt="image-20221218092445165"></p>
<h1 id="è¿è¡ŒPython"><a href="#è¿è¡ŒPython" class="headerlink" title="è¿è¡ŒPython"></a>è¿è¡ŒPython</h1><h2 id="ç»ˆç«¯è¿è¡Œ"><a href="#ç»ˆç«¯è¿è¡Œ" class="headerlink" title="ç»ˆç«¯è¿è¡Œ"></a>ç»ˆç«¯è¿è¡Œ</h2><ol>
<li><p>ç›´æ¥åœ¨pythonè§£é‡Šå™¨ä¸­ä¹¦å†™ä»£ç </p>
<p>é€€å‡ºpythonç¯å¢ƒï¼š exit()  ctrl+Z</p>
</li>
<li><p>ä½¿ç”¨ipythonè§£é‡Šå™¨ç¼–å†™ä»£ç </p>
</li>
</ol>
<h2 id="è¿è¡Œpythonæ–‡ä»¶"><a href="#è¿è¡Œpythonæ–‡ä»¶" class="headerlink" title="è¿è¡Œpythonæ–‡ä»¶"></a>è¿è¡Œpythonæ–‡ä»¶</h2><p>ä½¿ç”¨pythonæŒ‡ä»¤è¿è¡Œåç¼€ä¸º.pyçš„pythonæ–‡ä»¶</p>
<h1 id="Pycharm"><a href="#Pycharm" class="headerlink" title="Pycharm"></a>Pycharm</h1><ul>
<li><p>IDEçš„æ¦‚å¿µ</p>
<p><img src="http://image.kmoon.fun//images/202212180930358.png" alt="image-20221218093044306"></p>
<p><img src="http://image.kmoon.fun//images/202212180931188.png" alt="image-20221218093112140"></p>
</li>
<li><p>pycharmå®‰è£…</p>
<p><img src="http://image.kmoon.fun//images/202212180931789.png" alt="image-20221218093145748"></p>
</li>
<li><p>pycharmä½¿ç”¨ä»‹ç»</p>
<p>æ–°å»ºå·¥ç¨‹</p>
<p><img src="http://image.kmoon.fun//images/202212180932230.png" alt="image-20221218093258173"></p>
</li>
</ul>
<p>æ‰©å±•ï¼šè‡ªåŠ¨ç”ŸæˆæŒ‡å®šçš„æ³¨é‡Š</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># _*_ coding : utf-8 _*_</span>
<span class="token comment"># @Time : 2022/1/14 15:27</span>
<span class="token comment"># @Author : Kmoon_Hs</span>
<span class="token comment"># @File : pythonDemo</span>
<span class="token comment"># @Project : pythonåŸºç¡€</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h1 id="PythonåŸºç¡€"><a href="#PythonåŸºç¡€" class="headerlink" title="PythonåŸºç¡€"></a>PythonåŸºç¡€</h1><h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><p>å•è¡Œæ³¨é‡Š #</p>
<p>å¤šè¡Œæ³¨é‡Š â€˜â€™â€™â€¦â€™â€™â€™</p>
<h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><p><code>å˜é‡å = å˜é‡å€¼</code> </p>
<p><img src="http://image.kmoon.fun//images/202212180939700.png" alt="image-20221218093903637"></p>
<p><strong>æ•°æ®æ‰æœ‰ç±»å‹ å˜é‡æ²¡æœ‰ç±»å‹</strong></p>
<p>æŸ¥çœ‹æ•°æ®ç±»å‹ï¼š type(å˜é‡å)</p>
<h2 id="æ ‡è¯†ç¬¦"><a href="#æ ‡è¯†ç¬¦" class="headerlink" title="æ ‡è¯†ç¬¦"></a>æ ‡è¯†ç¬¦</h2><p><img src="http://image.kmoon.fun//images/202212180941086.png" alt="image-20221218094102040"></p>
<p>å‘½åè§„èŒƒ</p>
<ul>
<li><p>é©¼å³°å‘½åæ³•</p>
<p><img src="http://image.kmoon.fun//images/202212180941540.png" alt="image-20221218094157498"></p>
</li>
<li><p>ä¸‹åˆ’çº¿_</p>
</li>
</ul>
<h2 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h2><p><img src="http://image.kmoon.fun//images/202212180942893.png" alt="image-20221218094247849"></p>
<h2 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h2><p><img src="http://image.kmoon.fun//images/202212180943218.png" alt="image-20221218094324171"></p>
<h2 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h2><ul>
<li>ç®—æ•°è¿ç®—ç¬¦</li>
</ul>
<p><img src="http://image.kmoon.fun//images/202212180945898.png" alt="image-20221218094559803"></p>
<blockquote>
<p>æ³¨æ„ï¼šæ··åˆè¿ç®—æ—¶ï¼Œä¼˜å…ˆçº§é¡ºåºä¸ºï¼š ** é«˜äº * / % // é«˜äº + - ï¼Œä¸ºäº†é¿å…æ­§ä¹‰ï¼Œå»ºè®®ä½¿ç”¨ () æ¥å¤„ç†è¿ ç®—ç¬¦ä¼˜å…ˆçº§ã€‚ å¹¶ä¸”ï¼Œä¸åŒç±»å‹çš„æ•°å­—åœ¨è¿›è¡Œæ··åˆè¿ç®—æ—¶ï¼Œæ•´æ•°å°†ä¼šè½¬æ¢æˆæµ®ç‚¹æ•°è¿›è¡Œè¿ç®—ã€‚</p>
</blockquote>
<ul>
<li>èµ‹å€¼è¿ç®—ç¬¦</li>
</ul>
<p><img src="http://image.kmoon.fun//images/202212180947773.png" alt="image-20221218094724728"></p>
<p><img src="http://image.kmoon.fun//images/202212180947886.png" alt="image-20221218094735835"></p>
<ul>
<li>æ¯”è¾ƒè¿ç®—ç¬¦</li>
</ul>
<p><img src="http://image.kmoon.fun//images/202212180947426.png" alt="image-20221218094759365"></p>
<ul>
<li>é€»è¾‘è¿ç®—ç¬¦</li>
</ul>
<p><img src="http://image.kmoon.fun//images/202212180948606.png" alt="image-20221218094827555"></p>
<h2 id="è¾“å…¥è¾“å‡º"><a href="#è¾“å…¥è¾“å‡º" class="headerlink" title="è¾“å…¥è¾“å‡º"></a>è¾“å…¥è¾“å‡º</h2><ol>
<li><p>è¾“å‡º</p>
<p>æ™®é€šè¾“å‡º</p>
<p>æ ¼å¼åŒ–è¾“å‡º %</p>
</li>
<li><p>è¾“å…¥</p>
<p>input()</p>
<p><img src="http://image.kmoon.fun//images/202212180951272.png" alt="image-20221218095125223"></p>
</li>
</ol>
<h2 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h2><ol>
<li><p>if</p>
</li>
<li><p>if else</p>
</li>
<li><p>elif</p>
</li>
<li><p>for</p>
</li>
<li><p>range</p>
<p>range å¯ä»¥ç”Ÿæˆæ•°å­—ä¾› for å¾ªç¯éå†,å®ƒå¯ä»¥ä¼ é€’ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«è¡¨ç¤º èµ·å§‹ã€ç»“æŸå’Œæ­¥é•¿</p>
</li>
</ol>
<h2 id="æ•°æ®ç±»å‹é«˜çº§"><a href="#æ•°æ®ç±»å‹é«˜çº§" class="headerlink" title="æ•°æ®ç±»å‹é«˜çº§"></a>æ•°æ®ç±»å‹é«˜çº§</h2><ul>
<li>å­—ç¬¦ä¸²</li>
</ul>
<p><img src="http://image.kmoon.fun//images/202212180954651.png" alt="image-20221218095450600"></p>
<p><img src="http://image.kmoon.fun//images/202212180955114.png" alt="image-20221218095501064"></p>
<ul>
<li>åˆ—è¡¨</li>
</ul>
<p><strong>æ·»åŠ å…ƒç´ </strong></p>
<p>appendä¼šæŠŠæ–°å…ƒç´ æ·»åŠ åˆ°åˆ—è¡¨æœ«å°¾</p>
<p>insert(index, object) åœ¨æŒ‡å®šä½ç½®indexå‰æ’å…¥å…ƒç´ object</p>
<p>é€šè¿‡extendå¯ä»¥å°†å¦ä¸€ä¸ªåˆ—è¡¨ä¸­çš„å…ƒç´ é€ä¸€æ·»åŠ åˆ°åˆ—è¡¨ä¸­</p>
<p><strong>ä¿®æ”¹å…ƒç´ </strong></p>
<p>æ˜¯é€šè¿‡æŒ‡å®šä¸‹æ ‡æ¥è®¿é—®åˆ—è¡¨å…ƒç´ ï¼Œå› æ­¤ä¿®æ”¹å…ƒç´ çš„æ—¶å€™ï¼Œä¸ºæŒ‡å®šçš„åˆ—è¡¨ä¸‹æ ‡èµ‹å€¼å³å¯</p>
<p><strong>æŸ¥æ‰¾å…ƒç´ </strong></p>
<p>inï¼ˆå­˜åœ¨ï¼‰,å¦‚æœå­˜åœ¨é‚£ä¹ˆç»“æœä¸ºtrueï¼Œå¦åˆ™ä¸ºfalse </p>
<p>not inï¼ˆä¸å­˜åœ¨ï¼‰ï¼Œå¦‚æœä¸å­˜åœ¨é‚£ä¹ˆç»“æœä¸ºtrueï¼Œå¦åˆ™false</p>
<p><strong>åˆ é™¤å…ƒç´ </strong></p>
<p>delï¼šæ ¹æ®ä¸‹æ ‡è¿›è¡Œåˆ é™¤ </p>
<p>popï¼šåˆ é™¤æœ€åä¸€ä¸ªå…ƒç´  </p>
<p>removeï¼šæ ¹æ®å…ƒç´ çš„å€¼è¿›è¡Œåˆ </p>
<ul>
<li>å…ƒç»„</li>
</ul>
<p>Pythonçš„å…ƒç»„ä¸åˆ—è¡¨ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºå…ƒç»„çš„å…ƒç´ ä¸èƒ½ä¿®æ”¹ã€‚å…ƒç»„ä½¿ç”¨å°æ‹¬å·ï¼Œåˆ—è¡¨ä½¿ç”¨æ–¹æ‹¬å·ã€‚</p>
<p>å®šä¹‰åªæœ‰ä¸€ä¸ªå…ƒç´ çš„å…ƒç»„ï¼Œéœ€è¦åœ¨å”¯ä¸€çš„å…ƒç´ åå†™ä¸€ä¸ªé€—å·</p>
<p><img src="http://image.kmoon.fun//images/202212180959953.png" alt="image-20221218095928900"></p>
<ul>
<li>åˆ‡ç‰‡</li>
</ul>
<p>åˆ‡ç‰‡æ˜¯æŒ‡å¯¹æ“ä½œçš„å¯¹è±¡æˆªå–å…¶ä¸­ä¸€éƒ¨åˆ†çš„æ“ä½œã€‚å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„éƒ½æ”¯æŒåˆ‡ç‰‡æ“ä½œã€‚</p>
<p>åˆ‡ç‰‡çš„è¯­æ³•ï¼š<code>[èµ·å§‹:ç»“æŸ:æ­¥é•¿]</code>ï¼Œä¹Ÿå¯ä»¥ç®€åŒ–ä½¿ç”¨ [èµ·å§‹:ç»“æŸ]</p>
<p>æ³¨æ„ï¼šé€‰å–çš„åŒºé—´ä»â€èµ·å§‹â€ä½å¼€å§‹ï¼Œåˆ°â€ç»“æŸâ€ä½çš„å‰ä¸€ä½ç»“æŸï¼ˆ<strong>ä¸åŒ…å«ç»“æŸä½æœ¬èº«</strong>)ï¼Œæ­¥é•¿è¡¨ç¤ºé€‰å–é—´éš”ã€‚</p>
<ul>
<li>å­—å…¸</li>
</ul>
<p><strong>æŸ¥çœ‹å…ƒç´ </strong></p>
<p>key</p>
<p>get</p>
<p><img src="http://image.kmoon.fun//images/202212181001216.png" alt="image-20221218100136143"></p>
<p><strong>ä¿®æ”¹å…ƒç´ </strong></p>
<p>å­—å…¸çš„æ¯ä¸ªå…ƒç´ ä¸­çš„æ•°æ®æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œåªè¦é€šè¿‡keyæ‰¾åˆ°ï¼Œå³å¯ä¿®æ”¹</p>
<p><strong>æ·»åŠ å…ƒç´ </strong></p>
<p>å¦‚æœåœ¨ä½¿ç”¨ å˜é‡å[â€˜é”®â€™] = æ•°æ® æ—¶ï¼Œè¿™ä¸ªâ€œé”®â€åœ¨å­—å…¸ä¸­ï¼Œä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°±ä¼šæ–°å¢è¿™ä¸ªå…ƒç´ </p>
<p><strong>åˆ é™¤å…ƒç´ </strong></p>
<p>del:</p>
<p>del å¯ä»¥é€šè¿‡é”®åˆ é™¤å­—å…¸é‡Œçš„æŒ‡å®šå…ƒç´ </p>
<p>del ä¹Ÿå¯ä»¥ç›´æ¥åˆ é™¤å˜é‡ åˆ é™¤æ•´ä¸ªå­—å…¸</p>
<p>clear() æ¸…ç©ºæ•´ä¸ªå­—å…¸</p>
<p><strong>éå†</strong></p>
<p>éå†å­—å…¸çš„keyï¼ˆé”®ï¼‰</p>
<p><img src="http://image.kmoon.fun//images/202212181004783.png" alt="image-20221218100421730"></p>
<p>éå†å­—å…¸çš„valueï¼ˆå€¼ï¼‰</p>
<p><img src="http://image.kmoon.fun//images/202212181004359.png" alt="image-20221218100433309"></p>
<p>éå†å­—å…¸çš„é¡¹ï¼ˆå…ƒç´ ï¼‰</p>
<p><img src="http://image.kmoon.fun//images/202212181004497.png" alt="image-20221218100443446"></p>
<p>éå†å­—å…¸çš„key-valueï¼ˆé”®å€¼å¯¹ï¼‰</p>
<p><img src="http://image.kmoon.fun//images/202212181004633.png" alt="image-20221218100452581"></p>
<h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p>å®šä¹‰å‡½æ•°</p>
<p><img src="http://image.kmoon.fun//images/202212181005039.png" alt="image-20221218100529988"></p>
<p>è°ƒç”¨å‡½æ•°</p>
<p>å‡½æ•°å‚æ•°</p>
<p><img src="http://image.kmoon.fun//images/202212181006248.png" alt="image-20221218100639196"></p>
<blockquote>
<p>å®šä¹‰æ—¶å°æ‹¬å·ä¸­çš„å‚æ•°ï¼Œç”¨æ¥æ¥æ”¶å‚æ•°ç”¨çš„ï¼Œç§°ä¸º â€œå½¢å‚â€ </p>
<p>è°ƒç”¨æ—¶å°æ‹¬å·ä¸­çš„å‚æ•°ï¼Œç”¨æ¥ä¼ é€’ç»™å‡½æ•°ç”¨çš„ï¼Œç§°ä¸º â€œå®å‚â€</p>
</blockquote>
<p>å‡½æ•°è¿”å›å€¼ return</p>
<p>å±€éƒ¨å˜é‡</p>
<blockquote>
<p>å±€éƒ¨å˜é‡ï¼Œå°±æ˜¯åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡</p>
<p>å…¶ä½œç”¨èŒƒå›´æ˜¯è¿™ä¸ªå‡½æ•°å†…éƒ¨ï¼Œå³åªèƒ½åœ¨è¿™ä¸ªå‡½æ•°ä¸­ä½¿ç”¨ï¼Œåœ¨å‡½æ•°çš„å¤–éƒ¨æ˜¯ä¸èƒ½ä½¿ç”¨çš„</p>
</blockquote>
<p>å…¨å±€å˜é‡</p>
<blockquote>
<p>åœ¨å‡½æ•°å¤–è¾¹å®šä¹‰çš„å˜é‡å«åš å…¨å±€å˜é‡ </p>
<p>å…¨å±€å˜é‡èƒ½å¤Ÿåœ¨æ‰€æœ‰çš„å‡½æ•°ä¸­è¿›è¡Œè®¿é—®</p>
</blockquote>
<h2 id="æ–‡ä»¶"><a href="#æ–‡ä»¶" class="headerlink" title="æ–‡ä»¶"></a>æ–‡ä»¶</h2><ol>
<li>æ–‡ä»¶çš„æ‰“å¼€ä¸å…³é—­</li>
</ol>
<p><strong>æ‰“å¼€æ–‡ä»¶/åˆ›å»ºæ–‡ä»¶</strong></p>
<p>åœ¨pythonï¼Œä½¿ç”¨openå‡½æ•°ï¼Œå¯ä»¥æ‰“å¼€ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ–‡ä»¶ï¼Œæˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ </p>
<p><code>open(æ–‡ä»¶è·¯å¾„ï¼Œè®¿é—®æ¨¡å¼)</code></p>
<p><strong>æ–‡ä»¶è·¯å¾„</strong></p>
<p><img src="http://image.kmoon.fun//images/202212181010648.png" alt="image-20221218101033587"></p>
<p><strong>è®¿é—®æ¨¡å¼</strong></p>
<p><img src="http://image.kmoon.fun//images/202212181011706.png" alt="image-20221218101134620"></p>
<ol start="2">
<li>æ–‡ä»¶çš„è¯»å†™</li>
</ol>
<p><strong>å†™æ•°æ®write</strong></p>
<p>ä½¿ç”¨write()å¯ä»¥å®Œæˆå‘æ–‡ä»¶å†™å…¥æ•°æ®</p>
<blockquote>
<p>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆåˆ›å»ºï¼›å¦‚æœå­˜åœ¨é‚£ä¹ˆå°±å…ˆæ¸…ç©ºï¼Œç„¶åå†™å…¥æ•°æ®</p>
</blockquote>
<p><strong>è¯»æ•°æ®read</strong></p>
<p>ä½¿ç”¨read(num)å¯ä»¥ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œnumè¡¨ç¤ºè¦ä»æ–‡ä»¶ä¸­è¯»å–çš„æ•°æ®çš„é•¿åº¦ï¼ˆå•ä½æ˜¯å­—èŠ‚ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ä¼ å…¥ numï¼Œé‚£ä¹ˆå°±è¡¨ç¤ºè¯»å–æ–‡ä»¶ä¸­æ‰€æœ‰çš„æ•°æ®</p>
<blockquote>
<p>å¦‚æœç”¨openæ‰“å¼€æ–‡ä»¶æ—¶ï¼Œå¦‚æœä½¿ç”¨çš„â€râ€ï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥ open(â€˜test.txtâ€™)</p>
</blockquote>
<p><strong>è¯»æ•°æ®readline</strong></p>
<p>readlineåªç”¨æ¥è¯»å–ä¸€è¡Œæ•°æ®</p>
<p><strong>è¯»æ•°æ®readlines</strong></p>
<p>readlineså¯ä»¥æŒ‰ç…§è¡Œçš„æ–¹å¼æŠŠæ•´ä¸ªæ–‡ä»¶ä¸­çš„å†…å®¹è¿›è¡Œä¸€æ¬¡æ€§è¯»å–ï¼Œå¹¶ä¸”è¿”å›çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸€è¡Œä¸ºåˆ—è¡¨çš„ ä¸€ä¸ªå…ƒç´ </p>
<ol start="3">
<li>åºåˆ—åŒ–å’Œååºåˆ—åŒ–</li>
</ol>
<blockquote>
<p>åŸå› åœ¨äº<strong>æ–‡ä»¶çš„å†™å…¥æ“ä½œä¸æ”¯æŒå­—å…¸ã€å…ƒç»„ã€åˆ—è¡¨ç­‰å¯¹è±¡çš„å†™å…¥æ“ä½œï¼Œå› è€Œéœ€è¦å…ˆåºåˆ—åŒ–åå†™å…¥æ–‡ä»¶</strong>ï¼Œè€Œåè¯»å‡ºæ—¶æ‰§è¡Œååºåˆ—åŒ–æ“ä½œã€‚</p>
</blockquote>
<p>é€šè¿‡æ–‡ä»¶æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥å°†å­—ç¬¦ä¸²å†™å…¥åˆ°ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>(ä¾‹å¦‚åˆ—è¡¨ã€å­—å…¸ã€å…ƒç»„ç­‰)ï¼Œå°±æ— æ³•ç›´æ¥å†™å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œéœ€è¦å¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œåºåˆ—åŒ–ï¼Œç„¶åæ‰èƒ½å†™å…¥åˆ°æ–‡ä»¶é‡Œã€‚</p>
<p>è®¾è®¡ä¸€å¥—åè®®ï¼ŒæŒ‰ç…§æŸç§è§„åˆ™ï¼ŒæŠŠå†…å­˜ä¸­çš„æ•°æ®è½¬æ¢ä¸º<strong>å­—èŠ‚åºåˆ—</strong>ï¼Œä¿å­˜åˆ°æ–‡ä»¶ï¼Œè¿™å°±æ˜¯<strong>åºåˆ—åŒ–</strong>ï¼Œåä¹‹ï¼Œä»æ–‡ä»¶çš„å­—èŠ‚åºåˆ—æ¢å¤åˆ°å†…å­˜ä¸­ï¼Œå°±æ˜¯<strong>ååºåˆ—åŒ–</strong>ã€‚</p>
<blockquote>
<p>å¯¹è±¡â€”ã€‹å­—èŠ‚åºåˆ— === åºåˆ—åŒ– </p>
</blockquote>
<blockquote>
<p>å­—èŠ‚åºåˆ—â€“ã€‹å¯¹è±¡ ===ååºåˆ—åŒ–</p>
</blockquote>
<p>Pythonä¸­æä¾›äº†JSONè¿™ä¸ªæ¨¡å—ç”¨æ¥å®ç°æ•°æ®çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p>
<p><strong>JSONæ¨¡å—</strong></p>
<blockquote>
<p>JSON(JavaScriptObjectNotation, JSå¯¹è±¡ç®€è°±)æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ‡å‡†ã€‚JSONçš„æœ¬è´¨æ˜¯å­—ç¬¦ä¸²ã€‚</p>
</blockquote>
<p><strong>ä½¿ç”¨JSONå®ç°åºåˆ—åŒ–</strong></p>
<p>JSONæä¾›äº†dumpå’Œdumpsæ–¹æ³•ï¼Œå°†ä¸€ä¸ªå¯¹è±¡è¿›è¡Œåºåˆ—åŒ–ã€‚</p>
<p>dumpsæ–¹æ³•çš„ä½œç”¨æ˜¯<strong>æŠŠå¯¹è±¡è½¬æ¢æˆä¸ºå­—ç¬¦ä¸²</strong>ï¼Œå®ƒæœ¬èº«ä¸å…·å¤‡å°†æ•°æ®å†™å…¥åˆ°æ–‡ä»¶çš„åŠŸèƒ½ã€‚</p>
<p><img src="http://image.kmoon.fun//images/202212181020364.png" alt="image-20221218102055300"></p>
<p>dumpæ–¹æ³•å¯ä»¥åœ¨å°†å¯¹è±¡è½¬æ¢æˆä¸ºå­—ç¬¦ä¸²çš„åŒæ—¶ï¼ŒæŒ‡å®šä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ï¼ŒæŠŠè½¬æ¢åçš„å­—ç¬¦ä¸²å†™å…¥åˆ°è¿™ä¸ªæ–‡ä»¶é‡Œã€‚</p>
<blockquote>
<p>dumpæ–¹æ³•å¯ä»¥æ¥æ”¶ä¸€ä¸ªæ–‡ä»¶å‚æ•°ï¼Œåœ¨å°†å¯¹è±¡è½¬æ¢æˆä¸ºå­—ç¬¦ä¸²çš„åŒæ—¶å†™å…¥åˆ°æ–‡ä»¶é‡Œ</p>
</blockquote>
<p><img src="http://image.kmoon.fun//images/202212181020026.png" alt="image-20221218102043962"></p>
<p><strong>ä½¿ç”¨JSONå®ç°ååºåˆ—åŒ–</strong></p>
<p>ä½¿ç”¨loadså’Œloadæ–¹æ³•ï¼Œå¯ä»¥å°†ä¸€ä¸ªJSONå­—ç¬¦ä¸²ååºåˆ—åŒ–æˆä¸ºä¸€ä¸ªPythonå¯¹è±¡ã€‚</p>
<p>loadsæ–¹æ³•éœ€è¦ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œç”¨æ¥å°†ä¸€ä¸ªå­—ç¬¦ä¸²åŠ è½½æˆä¸ºPythonå¯¹è±¡ã€‚</p>
<p><img src="http://image.kmoon.fun//images/202212181020612.png" alt="image-20221218102014553"></p>
<p>loadæ–¹æ³•å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ï¼Œç”¨æ¥å°†ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡é‡Œçš„æ•°æ®åŠ è½½æˆä¸ºPythonå¯¹è±¡ã€‚</p>
<p><img src="http://image.kmoon.fun//images/202212181020035.png" alt="image-20221218102028970"></p>
<h2 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h2><ol>
<li><p>è¯»å–æ–‡ä»¶å¼‚å¸¸</p>
<p>åœ¨è¯»å–ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå¦‚æœè¿™ä¸ªæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™ä¼šæŠ¥å‡º <code>FileNotFoundError</code>é”™è¯¯ã€‚</p>
</li>
<li><p>tryâ€¦exceptè¯­å¥</p>
<p>tryâ€¦exceptè¯­å¥å¯ä»¥å¯¹ä»£ç è¿è¡Œè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚</p>
<p><img src="http://image.kmoon.fun//images/202212181022726.png" alt="image-20221218102249664"></p>
</li>
</ol>
<h1 id="é¡µé¢ç»“æ„"><a href="#é¡µé¢ç»“æ„" class="headerlink" title="é¡µé¢ç»“æ„"></a>é¡µé¢ç»“æ„</h1><img src="http://image.kmoon.fun//images/202212181028347.png" alt="image-20221218102849264" style="zoom:80%;">

<p>tabel è¡¨æ ¼</p>
<p>tr è¡Œ</p>
<p>td åˆ—</p>
<p>ul æ— åºåˆ—è¡¨</p>
<p>ol æœ‰åºåˆ—è¡¨</p>
<p>li é¡¹</p>
<p>a è¶…é“¾æ¥</p>
<hr>
<h1 id="çˆ¬è™«æ¦‚å¿µ"><a href="#çˆ¬è™«æ¦‚å¿µ" class="headerlink" title="çˆ¬è™«æ¦‚å¿µ"></a>çˆ¬è™«æ¦‚å¿µ</h1><ol>
<li><p>ä»€ä¹ˆæ˜¯äº’è”ç½‘çˆ¬è™«</p>
<ul>
<li><p>è§£é‡Š1ï¼šé€šè¿‡ä¸€ä¸ªç¨‹åºï¼Œæ ¹æ®Url(<a href="http://www.taobao.com)è¿›è¡Œçˆ¬å–ç½‘é¡µ,è·å–æœ‰ç”¨ä¿¡æ¯/">http://www.taobao.com)è¿›è¡Œçˆ¬å–ç½‘é¡µï¼Œè·å–æœ‰ç”¨ä¿¡æ¯</a> </p>
</li>
<li><p>è§£é‡Š2ï¼šä½¿ç”¨ç¨‹åºæ¨¡æ‹Ÿæµè§ˆå™¨ï¼Œå»å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè·å–å“åº”ä¿¡æ¯</p>
</li>
</ul>
</li>
<li><p>çˆ¬è™«çš„æ ¸å¿ƒ</p>
<ul>
<li>1.çˆ¬å–ç½‘é¡µï¼šçˆ¬å–æ•´ä¸ªç½‘é¡µ åŒ…å«äº†ç½‘é¡µä¸­æ‰€æœ‰å¾—å†…å®¹ </li>
<li>2.è§£ææ•°æ®ï¼šå°†ç½‘é¡µä¸­ä½ å¾—åˆ°çš„æ•°æ® è¿›è¡Œè§£æ </li>
<li>3.éš¾ç‚¹ï¼šçˆ¬è™«å’Œåçˆ¬è™«ä¹‹é—´çš„åšå¼ˆ</li>
</ul>
</li>
<li><p>çˆ¬è™«çš„ç”¨é€”</p>
<ul>
<li>æ•°æ®åˆ†æ/äººå·¥æ•°æ®é›†</li>
<li>ç¤¾äº¤è½¯ä»¶å†·å¯åŠ¨</li>
<li>èˆ†æƒ…ç›‘æ§</li>
<li>ç«äº‰å¯¹æ‰‹ç›‘æ§</li>
</ul>
</li>
<li><p>çˆ¬è™«åˆ†ç±»</p>
<p><img src="http://image.kmoon.fun//images/202212181049872.png" alt="image-20221218104922781"></p>
</li>
<li><p>åçˆ¬æ‰‹æ®µ</p>
<img src="http://image.kmoon.fun//images/202212181053406.png" alt="image-20221218105314334"></li>
</ol>
<h1 id="Urllib"><a href="#Urllib" class="headerlink" title="Urllib"></a>Urllib</h1><h2 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h2><p><img src="http://image.kmoon.fun//images/202212181057352.png" alt="image-20221218105722277"></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ä½¿ç”¨urllibæ¥è·å–ç™¾åº¦é¦–é¡µçš„æºç </span>
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request


<span class="token comment"># (1)å®šä¹‰ä¸€ä¸ªurl  å°±æ˜¯ä½ è¦è®¿é—®çš„åœ°å€</span>
url <span class="token operator">=</span> <span class="token string">'http://www.baidu.com'</span>

<span class="token comment"># (2)æ¨¡æ‹Ÿæµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ responseå“åº”</span>
response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
	
<span class="token comment"># ï¼ˆ3ï¼‰è·å–å“åº”ä¸­çš„é¡µé¢çš„æºç   content å†…å®¹çš„æ„æ€</span>
<span class="token comment"># readæ–¹æ³•  è¿”å›çš„æ˜¯å­—èŠ‚å½¢å¼çš„äºŒè¿›åˆ¶æ•°æ®</span>
<span class="token comment"># æˆ‘ä»¬è¦å°†äºŒè¿›åˆ¶çš„æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>
<span class="token comment"># äºŒè¿›åˆ¶--ã€‹å­—ç¬¦ä¸²  è§£ç   decode('ç¼–ç çš„æ ¼å¼')</span>
content <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

<span class="token comment"># ï¼ˆ4ï¼‰æ‰“å°æ•°æ®</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¦‚æœ<strong>ä¸è§£ç ï¼Œè·å¾—çš„å†…å®¹å°†ä¼šæ˜¯äºŒè¿›åˆ¶çš„æ ¼å¼</strong>ï¼Œä¸åˆ©äºæˆ‘ä»¬çš„æ­£å¸¸ä½¿ç”¨ã€‚</p>
<h2 id="1ä¸ªç±»å‹6ä¸ªæ–¹æ³•"><a href="#1ä¸ªç±»å‹6ä¸ªæ–¹æ³•" class="headerlink" title="1ä¸ªç±»å‹6ä¸ªæ–¹æ³•"></a>1ä¸ªç±»å‹6ä¸ªæ–¹æ³•</h2><p>ç±»å‹; </p>
<p>responseæ˜¯HTTPResponseçš„ç±»å‹</p>
<p>æ–¹æ³•ï¼š</p>
<ul>
<li>read()	æŒ‰ç…§ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚å»è¯»</li>
<li>read(num)	è¯»å–numä¸ªå­—èŠ‚</li>
<li>readline()      è¯»å–ä¸€è¡Œ</li>
<li>readlines()     é€è¡Œè¯»å–</li>
<li>getcode()      è¿”å›çŠ¶æ€ç </li>
<li>geturl()           è¿”å›è¯·æ±‚ç½‘å€</li>
<li>getheaders()  è¿”å›çŠ¶æ€ä¿¡æ¯</li>
</ul>
<h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><p>urllibåº“ä¹‹ä¸‹è½½å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘</p>
<p><code>urllib.request.urlretrieve()</code></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ä¸‹è½½ç½‘é¡µ</span>
url_page<span class="token operator">=</span><span class="token string">'http://www.baidu.com'</span>

<span class="token comment"># å‚æ•°urlä»£è¡¨çš„æ˜¯ä¸‹è½½çš„è·¯å¾„  filenameæ–‡ä»¶çš„åå­—</span>
<span class="token comment"># åœ¨pythonä¸­ å¯ä»¥å˜é‡çš„åå­—  ä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼</span>
urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlretrieve<span class="token punctuation">(</span>url_page<span class="token punctuation">,</span><span class="token string">'baidu.html'</span><span class="token punctuation">)</span>

<span class="token comment"># ä¸‹è½½å›¾ç‰‡</span>
url_img<span class="token operator">=</span><span class="token string">'https://img1.baidu.com/it/xxx.jpg'</span>

urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlretrieve<span class="token punctuation">(</span>url<span class="token operator">=</span>url_img<span class="token punctuation">,</span>filename<span class="token operator">=</span><span class="token string">'lisa.jpg'</span><span class="token punctuation">)</span>

<span class="token comment"># ä¸‹è½½è§†é¢‘</span>
url_video <span class="token operator">=</span> <span class="token string">'https://vd3.bdstatic.com/xxx'</span>

urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlretrieve<span class="token punctuation">(</span>url_video<span class="token punctuation">,</span><span class="token string">'hxekyyds.mp4'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="è¯·æ±‚å¯¹è±¡å®šåˆ¶"><a href="#è¯·æ±‚å¯¹è±¡å®šåˆ¶" class="headerlink" title="è¯·æ±‚å¯¹è±¡å®šåˆ¶"></a>è¯·æ±‚å¯¹è±¡å®šåˆ¶</h2><p>UAä»‹ç»ï¼šUser Agentä¸­æ–‡åä¸ºç”¨æˆ·ä»£ç†ï¼Œç®€ç§° UAï¼Œå®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ä¸²å¤´ï¼Œä½¿å¾—æœåŠ¡å™¨èƒ½å¤Ÿè¯†åˆ«å®¢æˆ·ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿ åŠç‰ˆæœ¬ã€CPU ç±»å‹ã€æµè§ˆå™¨åŠç‰ˆæœ¬ã€‚</p>
<p>æµè§ˆå™¨å†…æ ¸ã€æµè§ˆå™¨æ¸²æŸ“å¼•æ“ã€æµè§ˆå™¨è¯­è¨€ã€æµè§ˆå™¨æ’ä»¶ç­‰</p>
<p>è¯­æ³•ï¼š<code>request = urllib.request.Request()</code></p>
<blockquote>
<p> UAåçˆ¬</p>
</blockquote>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># http/https    www.baidu.com   80/443     s      wd = å‘¨æ°ä¼¦     #</span>
<span class="token comment">#    åè®®             ä¸»æœº        ç«¯å£å·     è·¯å¾„     å‚æ•°          é”šç‚¹</span>

url <span class="token operator">=</span> <span class="token string">'https://www.baidu.com'</span>

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36'</span>
<span class="token punctuation">}</span>

<span class="token comment"># å› ä¸ºurlopenæ–¹æ³•ä¸­ä¸èƒ½å­˜å‚¨å­—å…¸ æ‰€ä»¥headersä¸èƒ½ä¼ é€’è¿›å»</span>
<span class="token comment"># è¯·æ±‚å¯¹è±¡çš„å®šåˆ¶</span>
<span class="token comment"># å› ä¸ºå‚æ•°é¡ºåºçš„é—®é¢˜ éœ€è¦å…³é”®å­—ä¼ å‚</span>
request <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>

response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>request<span class="token punctuation">)</span>

content <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf8'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="ç¼–è§£ç "><a href="#ç¼–è§£ç " class="headerlink" title="ç¼–è§£ç "></a>ç¼–è§£ç </h2><h3 id="1-getè¯·æ±‚æ–¹å¼ï¼šurllib-parse-quoteï¼ˆï¼‰"><a href="#1-getè¯·æ±‚æ–¹å¼ï¼šurllib-parse-quoteï¼ˆï¼‰" class="headerlink" title="1.getè¯·æ±‚æ–¹å¼ï¼šurllib.parse.quoteï¼ˆï¼‰"></a>1.getè¯·æ±‚æ–¹å¼ï¼šurllib.parse.quoteï¼ˆï¼‰</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse

<span class="token comment"># å°†å‘¨æ°ä¼¦ä¸‰ä¸ªå­—å˜æˆunicodeç¼–ç çš„æ ¼å¼</span>
<span class="token comment"># æˆ‘ä»¬éœ€è¦ä¾èµ–äºurllib.parse</span>
<span class="token comment"># å°†ä¸­æ–‡æ±‰å­—è½¬ä¸ºUnicodeç¼–ç </span>
name <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>quote<span class="token punctuation">(</span><span class="token string">'å‘¨æ°ä¼¦'</span><span class="token punctuation">)</span>

url <span class="token operator">=</span> url <span class="token operator">+</span> name

request <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>request<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utfâ€8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="2-getè¯·æ±‚æ–¹å¼ï¼šurllib-parse-urlencodeï¼ˆï¼‰"><a href="#2-getè¯·æ±‚æ–¹å¼ï¼šurllib-parse-urlencodeï¼ˆï¼‰" class="headerlink" title="2.getè¯·æ±‚æ–¹å¼ï¼šurllib.parse.urlencodeï¼ˆï¼‰"></a>2.getè¯·æ±‚æ–¹å¼ï¼šurllib.parse.urlencodeï¼ˆï¼‰</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse
url <span class="token operator">=</span> <span class="token string">'http://www.baidu.com/s?'</span>
data <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'å°åˆš'</span><span class="token punctuation">,</span>
<span class="token string">'sex'</span><span class="token punctuation">:</span><span class="token string">'ç”·'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment"># å¤šä¸ªå‚æ•°è½¬Unicodeç¼–ç </span>
data <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>urlencode<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
url <span class="token operator">=</span> url <span class="token operator">+</span> data
<span class="token keyword">print</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> 

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token string">'Userâ€Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36'</span>
<span class="token punctuation">}</span>
request <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-postè¯·æ±‚æ–¹å¼"><a href="#3-postè¯·æ±‚æ–¹å¼" class="headerlink" title="3.postè¯·æ±‚æ–¹å¼"></a>3.postè¯·æ±‚æ–¹å¼</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">eg<span class="token punctuation">:</span>ç™¾åº¦ç¿»è¯‘
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse

url <span class="token operator">=</span> <span class="token string">'https://fanyi.baidu.com/sug'</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token string">'userâ€agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36'</span><span class="token punctuation">}</span>

keyword <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥æ‚¨è¦æŸ¥è¯¢çš„å•è¯'</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token string">'kw'</span><span class="token punctuation">:</span>keyword
<span class="token punctuation">}</span>
<span class="token comment"># postè¯·æ±‚çš„å‚æ•° å¿…é¡»è¿›è¡Œç¼–ç </span>
data <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>urlencode<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utfâ€8'</span><span class="token punctuation">)</span>
<span class="token comment"># postè¯·æ±‚çš„å‚æ•° éœ€è¦æ”¾åœ¨è¯·æ±‚å¯¹è±¡å®šåˆ¶çš„å‚æ•°ä¸­</span>
request <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">,</span>data<span class="token operator">=</span>data<span class="token punctuation">)</span>

response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>request<span class="token punctuation">)</span>
content <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>
<span class="token comment"># å­—ç¬¦ä¸²---&gt;jsonå¯¹è±¡</span>
<span class="token keyword">import</span> json
obj <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>content<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="http://image.kmoon.fun//images/202212190858340.png" alt="image-20221219085811105"></p>
<ul>
<li>æ¡ˆä¾‹ç»ƒä¹ ï¼šç™¾åº¦è¯¦ç»†ç¿»è¯‘</li>
</ul>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse

url <span class="token operator">=</span> <span class="token string">'https://fanyi.baidu.com/v2transapi?from=en&amp;to=zh'</span>

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'Cookie'</span><span class="token punctuation">:</span> <span class="token string">'xxxxxxx'</span><span class="token punctuation">,</span>	<span class="token comment">#èµ·å†³å®šå› ç´ </span>
<span class="token punctuation">}</span>
data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'from'</span><span class="token punctuation">:</span> <span class="token string">'en'</span><span class="token punctuation">,</span>
    <span class="token string">'to'</span><span class="token punctuation">:</span> <span class="token string">'zh'</span><span class="token punctuation">,</span>
    <span class="token string">'query'</span><span class="token punctuation">:</span> <span class="token string">'love'</span><span class="token punctuation">,</span>
    <span class="token string">'transtype'</span><span class="token punctuation">:</span> <span class="token string">'realtime'</span><span class="token punctuation">,</span>
    <span class="token string">'simple_means_flag'</span><span class="token punctuation">:</span> <span class="token string">'3'</span><span class="token punctuation">,</span>
    <span class="token string">'sign'</span><span class="token punctuation">:</span> <span class="token string">'198772.518981'</span><span class="token punctuation">,</span>
    <span class="token string">'token'</span><span class="token punctuation">:</span> <span class="token string">'5483bfa652979b41f9c90d91f3de875d'</span><span class="token punctuation">,</span>
    <span class="token string">'domain'</span><span class="token punctuation">:</span> <span class="token string">'common'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment"># postè¯·æ±‚çš„å‚æ•°  å¿…é¡»è¿›è¡Œç¼–ç  å¹¶ä¸”è¦è°ƒç”¨encodeæ–¹æ³•</span>
data <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>urlencode<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

<span class="token comment"># è¯·æ±‚å¯¹è±¡çš„å®šåˆ¶</span>
request <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url <span class="token operator">=</span> url<span class="token punctuation">,</span>data <span class="token operator">=</span> data<span class="token punctuation">,</span>headers <span class="token operator">=</span> headers<span class="token punctuation">)</span>

<span class="token comment"># æ¨¡æ‹Ÿæµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚</span>
response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>request<span class="token punctuation">)</span>

<span class="token comment"># è·å–å“åº”çš„æ•°æ®</span>
content <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> json

obj <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>content<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="Ajaxçš„getè¯·æ±‚"><a href="#Ajaxçš„getè¯·æ±‚" class="headerlink" title="Ajaxçš„getè¯·æ±‚"></a>Ajaxçš„getè¯·æ±‚</h2><ul>
<li>æ¡ˆä¾‹ç»ƒä¹ ï¼šè±†ç“£ç”µå½±</li>
</ul>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># getè¯·æ±‚</span>
<span class="token comment"># è·å–è±†ç“£ç”µå½±çš„ç¬¬ä¸€é¡µçš„æ•°æ® å¹¶ä¸”ä¿å­˜èµ·æ¥</span>

<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request

url <span class="token operator">=</span> <span class="token string">'https://movie.douban.com/j/chart/top_list?type=5&amp;interval_id=100%3A90&amp;action=&amp;start=0&amp;limit=20'</span>

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36'</span>
<span class="token punctuation">}</span>

<span class="token comment"># (1) è¯·æ±‚å¯¹è±¡çš„å®šåˆ¶</span>
request <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>

<span class="token comment"># ï¼ˆ2ï¼‰è·å–å“åº”çš„æ•°æ®</span>
response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>request<span class="token punctuation">)</span>
content <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

<span class="token comment"># (3) æ•°æ®ä¸‹è½½åˆ°æœ¬åœ°</span>
<span class="token comment"># openæ–¹æ³•é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„æ˜¯gbkçš„ç¼–ç   å¦‚æœæˆ‘ä»¬è¦æƒ³ä¿å­˜æ±‰å­— é‚£ä¹ˆéœ€è¦åœ¨openæ–¹æ³•ä¸­æŒ‡å®šç¼–ç æ ¼å¼ä¸ºutf-8</span>
encoding <span class="token operator">=</span> <span class="token string">'utf-8'</span>
fp <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'douban.json'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
fp<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content<span class="token punctuation">)</span>

<span class="token comment">#with open('douban1.json','w',encoding='utf-8') as fp:</span>
<span class="token comment">#    fp.write(content)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>ä¸‹è½½è±†ç“£ç”µå½±å‰10é¡µçš„æ•°æ®</p>
</blockquote>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ï¼ˆ1ï¼‰ è¯·æ±‚å¯¹è±¡çš„å®šåˆ¶</span>
<span class="token comment"># ï¼ˆ2ï¼‰ è·å–å“åº”çš„æ•°æ®</span>
<span class="token comment"># ï¼ˆ3ï¼‰ ä¸‹è½½æ•°æ®</span>

<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request

<span class="token keyword">def</span> <span class="token function">create_request</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">:</span>
    base_url <span class="token operator">=</span> <span class="token string">'https://movie.douban.com/j/chart/top_list?type=5&amp;interval_id=100%3A90&amp;action=&amp;'</span>

    data <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'start'</span><span class="token punctuation">:</span><span class="token punctuation">(</span>page <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">20</span><span class="token punctuation">,</span>
        <span class="token string">'limit'</span><span class="token punctuation">:</span><span class="token number">20</span>
    <span class="token punctuation">}</span>
    data <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>urlencode<span class="token punctuation">(</span>data<span class="token punctuation">)</span>

    url <span class="token operator">=</span> base_url <span class="token operator">+</span> data

    headers <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36'</span>
    <span class="token punctuation">}</span>

    request <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    <span class="token keyword">return</span> request


<span class="token keyword">def</span> <span class="token function">get_content</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>request<span class="token punctuation">)</span>
    content <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> content

<span class="token keyword">def</span> <span class="token function">down_load</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span>content<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'douban_'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.json'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">as</span> fp<span class="token punctuation">:</span>
        fp<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content<span class="token punctuation">)</span>

<span class="token comment"># ç¨‹åºçš„å…¥å£</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    start_page <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥èµ·å§‹çš„é¡µç '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    end_page <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥ç»“æŸçš„é¡µé¢'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> page <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>start_page<span class="token punctuation">,</span>end_page<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token comment">#         æ¯ä¸€é¡µéƒ½æœ‰è‡ªå·±çš„è¯·æ±‚å¯¹è±¡çš„å®šåˆ¶</span>
        request <span class="token operator">=</span> create_request<span class="token punctuation">(</span>page<span class="token punctuation">)</span>
<span class="token comment">#         è·å–å“åº”çš„æ•°æ®</span>
        content <span class="token operator">=</span> get_content<span class="token punctuation">(</span>request<span class="token punctuation">)</span>
<span class="token comment">#         ä¸‹è½½</span>
        down_load<span class="token punctuation">(</span>page<span class="token punctuation">,</span>content<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="Ajaxçš„postè¯·æ±‚"><a href="#Ajaxçš„postè¯·æ±‚" class="headerlink" title="Ajaxçš„postè¯·æ±‚"></a>Ajaxçš„postè¯·æ±‚</h2><ul>
<li>æ¡ˆä¾‹ï¼šKFCå®˜ç½‘</li>
</ul>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse

<span class="token keyword">def</span> <span class="token function">create_request</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">:</span>
    base_url <span class="token operator">=</span> <span class="token string">'http://www.kfc.com.cn/kfccda/ashx/GetStoreList.ashx?op=cname'</span>
    data <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'cname'</span><span class="token punctuation">:</span> <span class="token string">'åŒ—äº¬'</span><span class="token punctuation">,</span>
        <span class="token string">'pid'</span><span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token string">'pageIndex'</span><span class="token punctuation">:</span> page<span class="token punctuation">,</span>
        <span class="token string">'pageSize'</span><span class="token punctuation">:</span> <span class="token string">'10'</span>
    <span class="token punctuation">}</span>

    data <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>urlencode<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
    headers <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36'</span>
    <span class="token punctuation">}</span>
    request <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>base_url<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">,</span>data<span class="token operator">=</span>data<span class="token punctuation">)</span>
    <span class="token keyword">return</span> request

<span class="token keyword">def</span> <span class="token function">get_content</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>request<span class="token punctuation">)</span>
    content <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> content

<span class="token keyword">def</span> <span class="token function">down_load</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span>content<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'kfc_'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.json'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">as</span> fp<span class="token punctuation">:</span>
        fp<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    start_page <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥èµ·å§‹é¡µç '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    end_page <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥ç»“æŸé¡µç '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> page <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>start_page<span class="token punctuation">,</span>end_page<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># è¯·æ±‚å¯¹è±¡çš„å®šåˆ¶</span>
        request <span class="token operator">=</span> create_request<span class="token punctuation">(</span>page<span class="token punctuation">)</span>
        <span class="token comment"># è·å–ç½‘é¡µæºç </span>
        content <span class="token operator">=</span> get_content<span class="token punctuation">(</span>request<span class="token punctuation">)</span>
        <span class="token comment"># ä¸‹è½½</span>
        down_load<span class="token punctuation">(</span>page<span class="token punctuation">,</span>content<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="URLError-HTTPError"><a href="#URLError-HTTPError" class="headerlink" title="URLError\HTTPError"></a>URLError\HTTPError</h2><p>ç®€ä»‹:</p>
<ul>
<li><p>1.HTTPErrorç±»æ˜¯URLErrorç±»çš„<strong>å­ç±»</strong> </p>
</li>
<li><p>2.å¯¼å…¥çš„åŒ…urllib.error.HTTPError     urllib.error.URLError </p>
</li>
<li><p>3.httpé”™è¯¯ï¼šhttpé”™è¯¯æ˜¯é’ˆå¯¹æµè§ˆå™¨æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨è€Œå¢åŠ å‡ºæ¥çš„é”™è¯¯æç¤ºã€‚å¼•å¯¼å¹¶å‘Šè¯‰æµè§ˆè€…è¯¥é¡µæ˜¯å“ªé‡Œå‡º äº†é—®é¢˜ã€‚ </p>
</li>
<li><p>4.é€šè¿‡urllibå‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½ä¼šå‘é€å¤±è´¥ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœæƒ³è®©ä½ çš„ä»£ç æ›´åŠ çš„å¥å£®ï¼Œå¯ä»¥é€šè¿‡tryâ€ exceptè¿›è¡Œæ•è·å¼‚å¸¸ï¼Œå¼‚å¸¸æœ‰ä¸¤ç±»ï¼ŒURLError\HTTPError</p>
</li>
</ul>
<p><strong>tryâ€¦exceptè¯­å¥</strong></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>error

<span class="token comment"># url = 'https://blog.csdn.net/sulixu/article/details/1198189491'</span>

url <span class="token operator">=</span> <span class="token string">'http://www.doudan1111.com'</span>

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36'</span>
<span class="token punctuation">}</span>

<span class="token keyword">try</span><span class="token punctuation">:</span>
    request <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url <span class="token operator">=</span> url<span class="token punctuation">,</span> headers <span class="token operator">=</span> headers<span class="token punctuation">)</span>

    response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>request<span class="token punctuation">)</span>

    content <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>
<span class="token keyword">except</span> urllib<span class="token punctuation">.</span>error<span class="token punctuation">.</span>HTTPError<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ç³»ç»Ÿæ­£åœ¨å‡çº§'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> urllib<span class="token punctuation">.</span>error<span class="token punctuation">.</span>URLError<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æˆ‘éƒ½è¯´äº† ç³»ç»Ÿæ­£åœ¨å‡çº§'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="cookieç™»å½•"><a href="#cookieç™»å½•" class="headerlink" title="cookieç™»å½•"></a>cookieç™»å½•</h2><p>ä½¿ç”¨æ¡ˆä¾‹ï¼š 1.å¾®åšcookieç™»é™† </p>
<p>ä½œä¸šï¼šqqç©ºé—´çš„çˆ¬å–</p>
<ul>
<li>é€‚ç”¨çš„åœºæ™¯ï¼šæ•°æ®é‡‡é›†çš„æ—¶å€™ éœ€è¦<strong>ç»•è¿‡ç™»é™†</strong> ç„¶åè¿›å…¥åˆ°æŸä¸ªé¡µ</li>
<li>ä¸ªäººä¿¡æ¯é¡µé¢æ˜¯utf-8  ä½†æ˜¯è¿˜æŠ¥é”™äº†ç¼–ç é”™è¯¯  å› ä¸ºå¹¶æ²¡æœ‰è¿›å…¥åˆ°ä¸ªäººä¿¡æ¯é¡µé¢ è€Œæ˜¯è·³è½¬åˆ°äº†ç™»é™†é¡µé¢ é‚£ä¹ˆç™»é™†é¡µé¢ä¸æ˜¯utf-8  æ‰€ä»¥æŠ¥é”™</li>
</ul>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request

url <span class="token operator">=</span> <span class="token string">'https://weibo.cn/6451491586/info'</span>

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token string">'accept-language'</span><span class="token punctuation">:</span> <span class="token string">'zh-CN,zh;q=0.9'</span><span class="token punctuation">,</span>
<span class="token comment"># cookieä¸­æºå¸¦ç€ä½ çš„ç™»é™†ä¿¡æ¯   å¦‚æœæœ‰ç™»é™†ä¹‹åçš„cookie  é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æºå¸¦ç€cookieè¿›å…¥åˆ°ä»»ä½•é¡µé¢</span>
<span class="token string">'cookie'</span><span class="token punctuation">:</span> <span class="token string">'xxxxxx'</span><span class="token punctuation">,</span>
<span class="token comment"># referer  åˆ¤æ–­å½“å‰è·¯å¾„æ˜¯ä¸æ˜¯ç”±ä¸Šä¸€ä¸ªè·¯å¾„è¿›æ¥çš„    ä¸€èˆ¬æƒ…å†µä¸‹ æ˜¯åšå›¾ç‰‡é˜²ç›—é“¾</span>
<span class="token string">'referer'</span><span class="token punctuation">:</span> <span class="token string">'https://weibo.cn/'</span><span class="token punctuation">,</span>

<span class="token string">'user-agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment"># è¯·æ±‚å¯¹è±¡çš„å®šåˆ¶</span>
request <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token comment"># æ¨¡æ‹Ÿæµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚</span>
response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>request<span class="token punctuation">)</span>
<span class="token comment"># è·å–å“åº”çš„æ•°æ®</span>
content <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

<span class="token comment"># å°†æ•°æ®ä¿å­˜åˆ°æœ¬åœ°</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'weibo.html'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">as</span> fp<span class="token punctuation">:</span>
    fp<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="Handlerå¤„ç†å™¨"><a href="#Handlerå¤„ç†å™¨" class="headerlink" title="Handlerå¤„ç†å™¨"></a>Handlerå¤„ç†å™¨</h2><ul>
<li>ä¸ºä»€ä¹ˆè¦å­¦ä¹ handlerï¼Ÿ</li>
</ul>
<p>urllib.request.urlopen(url) ä¸èƒ½å®šåˆ¶è¯·æ±‚å¤´ </p>
<p>urllib.request.Request(url,headers,data) å¯ä»¥å®šåˆ¶è¯·æ±‚å¤´ </p>
<p><strong>Handler</strong> </p>
<p>å®šåˆ¶æ›´é«˜çº§çš„è¯·æ±‚å¤´ï¼ˆéšç€ä¸šåŠ¡é€»è¾‘çš„å¤æ‚ è¯·æ±‚å¯¹è±¡çš„å®šåˆ¶å·²ç»æ»¡è¶³ä¸äº†æˆ‘ä»¬çš„éœ€æ±‚ï¼ˆ<strong>åŠ¨æ€cookieå’Œä»£ç† ä¸èƒ½ä½¿ç”¨è¯·æ±‚å¯¹è±¡çš„å®šåˆ¶</strong>ï¼‰</p>
<blockquote>
<p>1.è·å–handlerå¯¹è±¡<br>handler = urllib.request.HTTPHandler()</p>
<p>2.è·å–openerå¯¹è±¡</p>
<p>opener = urllib.request.build_opener(handler)</p>
<p>3.è°ƒç”¨openæ–¹æ³•</p>
<p>response = opener.open(request)</p>
</blockquote>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
url <span class="token operator">=</span> <span class="token string">'http://www.baidu.com'</span>

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token string">'User â€ Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla / 5.0(Windows NT 10.0;Win64;x64) AppleWebKit / 537.36(KHTML,likeGecko) Chrome / 74.0.3729.169Safari / 537.36'</span>
<span class="token punctuation">}</span>

request <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token comment"># handler build_handler open</span>
<span class="token comment"># 1.è·å–handlerå¯¹è±¡</span>
handler <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>HTTPHandler<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 2.è·å–openerå¯¹è±¡</span>
opener <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>build_opener<span class="token punctuation">(</span>handler<span class="token punctuation">)</span>
<span class="token comment"># 3.è°ƒç”¨openæ–¹æ³•</span>
response <span class="token operator">=</span> opener<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utfâ€8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="ä»£ç†æœåŠ¡å™¨"><a href="#ä»£ç†æœåŠ¡å™¨" class="headerlink" title="ä»£ç†æœåŠ¡å™¨"></a>ä»£ç†æœåŠ¡å™¨</h2><ol>
<li><p>ä»£ç†çš„å¸¸ç”¨åŠŸèƒ½? </p>
<ul>
<li><p><strong>1.çªç ´è‡ªèº«IPè®¿é—®é™åˆ¶ï¼Œè®¿é—®å›½å¤–ç«™ç‚¹ã€‚</strong> </p>
</li>
<li><p><strong>2.è®¿é—®ä¸€äº›å•ä½æˆ–å›¢ä½“å†…éƒ¨èµ„æº</strong> </p>
<p>æ‰©å±•ï¼šæŸå¤§å­¦FTP(å‰ææ˜¯è¯¥ä»£ç†åœ°å€åœ¨è¯¥èµ„æºçš„å…è®¸è®¿é—®èŒƒå›´ä¹‹å†…)ï¼Œä½¿ç”¨æ•™è‚²ç½‘å†…åœ°å€æ®µå…è´¹ä»£ç†æœåŠ¡å™¨ï¼Œå°±å¯ä»¥ç”¨äºå¯¹æ•™è‚²ç½‘å¼€æ”¾çš„å„ç±»FTPä¸‹è½½ä¸Šä¼ ï¼Œä»¥åŠå„ç±»èµ„æ–™æŸ¥è¯¢å…±äº«ç­‰æœåŠ¡ã€‚ </p>
</li>
<li><p><strong>3.æé«˜è®¿é—®é€Ÿåº¦</strong> </p>
<p>æ‰©å±•ï¼šé€šå¸¸ä»£ç†æœåŠ¡å™¨éƒ½è®¾ç½®ä¸€ä¸ªè¾ƒå¤§çš„<strong>ç¡¬ç›˜ç¼“å†²åŒº</strong>ï¼Œå½“æœ‰å¤–ç•Œçš„ä¿¡æ¯é€šè¿‡æ—¶ï¼ŒåŒæ—¶ä¹Ÿå°†å…¶ä¿å­˜åˆ°ç¼“å†²åŒºä¸­ï¼Œå½“å…¶ä»–ç”¨æˆ·å†è®¿é—®ç›¸åŒçš„ä¿¡æ¯æ—¶ï¼Œ åˆ™ç›´æ¥ç”±ç¼“å†²åŒºä¸­å–å‡ºä¿¡æ¯ï¼Œä¼ ç»™ç”¨æˆ·ï¼Œä»¥æé«˜è®¿é—®é€Ÿåº¦ã€‚ </p>
</li>
<li><p><strong>4.éšè—çœŸå®IP</strong> </p>
<p>æ‰©å±•ï¼šä¸Šç½‘è€…ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹æ³•éšè—è‡ªå·±çš„IPï¼Œå…å—æ”»å‡»ã€‚</p>
</li>
</ul>
</li>
<li><p>ä»£ç é…ç½®ä»£ç† </p>
<p>åˆ›å»ºReuqestå¯¹è±¡ </p>
<p>åˆ›å»º<strong>ProxyHandler</strong>å¯¹è±¡ </p>
<p>ç”¨handlerå¯¹è±¡åˆ›å»ºopenerå¯¹è±¡ </p>
<p>ä½¿ç”¨opener.openå‡½æ•°å‘é€è¯·æ±‚</p>
</li>
</ol>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request

url <span class="token operator">=</span> <span class="token string">'http://www.baidu.com/s?wd=ip'</span>

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36'</span>
<span class="token punctuation">}</span>

<span class="token comment"># è¯·æ±‚å¯¹è±¡çš„å®šåˆ¶</span>
request <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url <span class="token operator">=</span> url<span class="token punctuation">,</span>headers<span class="token operator">=</span> headers<span class="token punctuation">)</span>

<span class="token comment"># æ¨¡æ‹Ÿæµè§ˆå™¨è®¿é—®æœåŠ¡å™¨</span>
<span class="token comment"># response = urllib.request.urlopen(request)</span>

proxies <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'http'</span><span class="token punctuation">:</span><span class="token string">'IP:Port'</span>
<span class="token punctuation">}</span>
<span class="token comment"># handler  build_opener  open</span>
handler <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>ProxyHandler<span class="token punctuation">(</span>proxies <span class="token operator">=</span> proxies<span class="token punctuation">)</span>

opener <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>build_opener<span class="token punctuation">(</span>handler<span class="token punctuation">)</span>

response <span class="token operator">=</span> opener<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>

<span class="token comment"># è·å–å“åº”çš„ä¿¡æ¯</span>
content <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

<span class="token comment"># ä¿å­˜</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'daili.html'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">as</span> fp<span class="token punctuation">:</span>
    fp<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ‰©å±•ï¼š1.ä»£ç†æ±  2.å¿«ä»£ç†</p>
<h2 id="ä»£ç†æ± "><a href="#ä»£ç†æ± " class="headerlink" title="ä»£ç†æ± "></a>ä»£ç†æ± </h2><pre class="line-numbers language-python" data-language="python"><code class="language-python">proxies_pool <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token string">'http'</span><span class="token punctuation">:</span><span class="token string">'118.24.219.151:16817'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">'http'</span><span class="token punctuation">:</span><span class="token string">'118.24.219.151:16817'</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">import</span> random

proxies <span class="token operator">=</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>proxies_pool<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h2><h3 id="1-xpath"><a href="#1-xpath" class="headerlink" title="1. xpath"></a>1. xpath</h3><blockquote>
<p>xpathæ˜¯ä¸€é—¨åœ¨XMLæ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯çš„è¯­è¨€ã€‚xpathå¯ç”¨æ¥åœ¨XMLæ–‡æ¡£ä¸­å¯¹å…ƒç´ å’Œå±æ€§è¿›è¡Œéå†ã€‚</p>
</blockquote>
<ul>
<li><p>xpathä½¿ç”¨</p>
<p>æ³¨æ„ï¼šæå‰å®‰è£…xpathæ’ä»¶ </p>
<p>ï¼ˆ1ï¼‰æ‰“å¼€chromeæµè§ˆå™¨ </p>
<p>ï¼ˆ2ï¼‰ç‚¹å‡»å³ä¸Šè§’å°åœ†ç‚¹</p>
<p>ï¼ˆ3ï¼‰æ›´å¤šå·¥å…· </p>
<p>ï¼ˆ4ï¼‰æ‰©å±•ç¨‹åº </p>
<p>ï¼ˆ5ï¼‰æ‹–æ‹½xpathæ’ä»¶åˆ°æ‰©å±•ç¨‹åºä¸­ </p>
<p>ï¼ˆ6ï¼‰å¦‚æœcrxæ–‡ä»¶å¤±æ•ˆï¼Œéœ€è¦å°†åç¼€ä¿®æ”¹zip </p>
<p>ï¼ˆ7ï¼‰å†æ¬¡æ‹–æ‹½ </p>
<p>ï¼ˆ8ï¼‰å…³é—­æµè§ˆå™¨é‡æ–°æ‰“å¼€ </p>
<p>ï¼ˆ9ï¼‰ctrl + shift + x </p>
<p>ï¼ˆ10ï¼‰å‡ºç°å°é»‘æ¡† </p>
<p>1.å®‰è£…lxmlåº“ <code>pip install lxml</code></p>
<p>2.å¯¼å…¥lxml.etree <code>from lxml import etree</code> </p>
<p>3.etree.parse() è§£ææœ¬åœ°æ–‡ä»¶ <code>html_tree=etree.parse('XX.html')</code> </p>
<p>4.etree.HTML() æœåŠ¡å™¨å“åº”æ–‡ä»¶ </p>
<p><code>html_tree = etree.HTML(response.read().decode('utfâ€8')</code> </p>
<p>5.html_tree.xpath(xpathè·¯å¾„)</p>
</li>
</ul>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree

<span class="token comment"># xpathè§£æ</span>
<span class="token comment">#ï¼ˆ1ï¼‰æœ¬åœ°æ–‡ä»¶                                       </span>
<span class="token comment"># etree.parse</span>
<span class="token comment">#ï¼ˆ2ï¼‰æœåŠ¡å™¨å“åº”çš„æ•°æ®  </span>
<span class="token comment"># response.read().decode('utf-8') *****   etree.HTML()</span>

<span class="token comment"># xpathè§£ææœ¬åœ°æ–‡ä»¶</span>
tree <span class="token operator">=</span> etree<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'xxx.html'</span><span class="token punctuation">)</span>

<span class="token comment">#tree.xpath('xpathè·¯å¾„')</span>
tree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'xpathè·¯å¾„'</span><span class="token punctuation">)</span>
<span class="token comment"># æŸ¥æ‰¾ulä¸‹é¢çš„li</span>
<span class="token comment"># li_list = tree.xpath('//body/ul/li')</span>


<span class="token comment"># æŸ¥æ‰¾æ‰€æœ‰æœ‰idçš„å±æ€§çš„liæ ‡ç­¾</span>
<span class="token comment"># text()è·å–æ ‡ç­¾ä¸­çš„å†…å®¹</span>
li_list <span class="token operator">=</span> tree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//ul/li[@id]/text()'</span><span class="token punctuation">)</span>

<span class="token comment"># æ‰¾åˆ°idä¸ºl1çš„liæ ‡ç­¾  æ³¨æ„å¼•å·çš„é—®é¢˜</span>
li_list <span class="token operator">=</span> tree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//ul/li[@id="l1"]/text()'</span><span class="token punctuation">)</span>

<span class="token comment"># æŸ¥æ‰¾åˆ°idä¸ºl1çš„liæ ‡ç­¾çš„classçš„å±æ€§å€¼</span>
li <span class="token operator">=</span> tree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//ul/li[@id="l1"]/@class'</span><span class="token punctuation">)</span>

<span class="token comment"># æŸ¥è¯¢idä¸­åŒ…å«lçš„liæ ‡ç­¾</span>
li_list <span class="token operator">=</span> tree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//ul/li[contains(@id,"l")]/text()'</span><span class="token punctuation">)</span>

<span class="token comment"># æŸ¥è¯¢idçš„å€¼ä»¥lå¼€å¤´çš„liæ ‡ç­¾</span>
li_list <span class="token operator">=</span> tree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//ul/li[starts-with(@id,"c")]/text()'</span><span class="token punctuation">)</span>

<span class="token comment">#æŸ¥è¯¢idä¸ºl1å’Œclassä¸ºc1çš„</span>
li_list <span class="token operator">=</span> tree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//ul/li[@id="l1" and @class="c1"]/text()'</span><span class="token punctuation">)</span>
<span class="token comment">#æŸ¥è¯¢idä¸ºl1æˆ–l2çš„</span>
li_list <span class="token operator">=</span> tree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//ul/li[@id="l1"]/text() | //ul/li[@id="l2"]/text()'</span><span class="token punctuation">)</span>

<span class="token comment"># åˆ¤æ–­åˆ—è¡¨çš„é•¿åº¦</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>li_list<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>li_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>xpathåŸºæœ¬è¯­æ³•</strong></p>
<p><img src="http://image.kmoon.fun//images/202212191425429.png" alt="image-20221219142500176"></p>
<p>åº”ç”¨æ¡ˆä¾‹ï¼š </p>
<ul>
<li>è·å–ç™¾åº¦ç½‘ç«™çš„ç™¾åº¦ä¸€ä¸‹</li>
</ul>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ï¼ˆ1ï¼‰ è·å–ç½‘é¡µçš„æºç </span>
<span class="token comment"># ï¼ˆ2ï¼‰ è§£æ   è§£æçš„æœåŠ¡å™¨å“åº”çš„æ–‡ä»¶  etree.HTML</span>
<span class="token comment"># (3)  æ‰“å°</span>

<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request

url <span class="token operator">=</span> <span class="token string">'https://www.baidu.com/'</span>

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36'</span>
<span class="token punctuation">}</span>

<span class="token comment"># è¯·æ±‚å¯¹è±¡çš„å®šåˆ¶</span>
request <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url <span class="token operator">=</span> url<span class="token punctuation">,</span>headers <span class="token operator">=</span> headers<span class="token punctuation">)</span>

<span class="token comment"># æ¨¡æ‹Ÿæµè§ˆå™¨è®¿é—®æœåŠ¡å™¨</span>
response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>request<span class="token punctuation">)</span>

<span class="token comment"># è·å–ç½‘é¡µæºç </span>
content <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

<span class="token comment"># è§£æç½‘é¡µæºç  æ¥è·å–æˆ‘ä»¬æƒ³è¦çš„æ•°æ®</span>
<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree

<span class="token comment"># è§£ææœåŠ¡å™¨å“åº”çš„æ–‡ä»¶</span>
tree <span class="token operator">=</span> etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>content<span class="token punctuation">)</span>

<span class="token comment"># è·å–æƒ³è¦çš„æ•°æ®  xpathçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªåˆ—è¡¨ç±»å‹çš„æ•°æ®</span>
result <span class="token operator">=</span> tree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//input[@id="su"]/@value'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>ç«™é•¿ç´ æå›¾ç‰‡æŠ“å–å¹¶ä¸”ä¸‹è½½ï¼ˆ<a href="http://sc.chinaz.com/tupian/shuaigetupian.html%EF%BC%89--%E3%80%8B%E6%87%92%E5%8A%A0%E8%BD%BD">http://sc.chinaz.com/tupian/shuaigetupian.htmlï¼‰--ã€‹æ‡’åŠ è½½</a></li>
</ul>
<p><strong>é‡ç‚¹ï¼š</strong></p>
<blockquote>
<p>xpathåœ¨æµè§ˆå™¨ä¸­å¯ä»¥è·å–å¯¹è±¡ï¼Œè€Œpythonä»£ç ä¸­æ— æ³•è·å–å¯¹è±¡çš„åŸå› æ˜¯æµè§ˆå™¨ä¼šè‡ªåŠ¨æ›´æ­£æˆ‘ä»¬çš„xpathä»£ç ï¼Œè€Œlxmlåº“å´ä¸ä¼šè¿™ä¹ˆåšï¼Œè§£å†³æ–¹æ³•æ˜¯ç¼–å†™xpathä»£ç æ—¶å¿…é¡»æŒ‰ç…§ç½‘é¡µæºä»£ç ç¼–å†™ï¼Œè€Œä¸æ˜¯F12åçš„domç»“æ„</p>
</blockquote>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># éœ€æ±‚ ä¸‹è½½çš„å‰åé¡µçš„å›¾ç‰‡</span>
<span class="token comment"># https://sc.chinaz.com/tupian/qinglvtupian_page.html</span>

<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree

<span class="token keyword">def</span> <span class="token function">create_request</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">:</span>
    url <span class="token operator">=</span> <span class="token string">'https://sc.chinaz.com/tupian/qinglvtupian.html'</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>page <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        url <span class="token operator">=</span> <span class="token string">'https://sc.chinaz.com/tupian/qinglvtupian_'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.html'</span>
    headers <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    request <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url <span class="token operator">=</span> url<span class="token punctuation">,</span> headers <span class="token operator">=</span> headers<span class="token punctuation">)</span>
    <span class="token keyword">return</span> request

<span class="token keyword">def</span> <span class="token function">get_content</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>request<span class="token punctuation">)</span>
    content <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> content

<span class="token keyword">def</span> <span class="token function">down_load</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token comment">#     ä¸‹è½½å›¾ç‰‡</span>
    <span class="token comment"># urllib.request.urlretrieve('å›¾ç‰‡åœ°å€','æ–‡ä»¶çš„åå­—')</span>
    tree <span class="token operator">=</span> etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>content<span class="token punctuation">)</span>

    name_list <span class="token operator">=</span> tree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//div[@class="container"]//img/@alt'</span><span class="token punctuation">)</span>

    <span class="token comment"># ä¸€èˆ¬è®¾è®¡å›¾ç‰‡çš„ç½‘ç«™éƒ½ä¼šè¿›è¡Œæ‡’åŠ è½½</span>
    src_list <span class="token operator">=</span> tree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//div[@class="container"]//img/@data-original'</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>name_list<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>src_list<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>src_list<span class="token punctuation">)</span>

    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>name_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        name <span class="token operator">=</span> name_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        src <span class="token operator">=</span> src_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        url <span class="token operator">=</span> <span class="token string">'https:'</span> <span class="token operator">+</span> src
        urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlretrieve<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>filename<span class="token operator">=</span><span class="token string">'./loveImg/'</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'.jpg'</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    start_page <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥èµ·å§‹é¡µç '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    end_page <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥ç»“æŸé¡µç '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> page <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>start_page<span class="token punctuation">,</span>end_page<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># (1) è¯·æ±‚å¯¹è±¡çš„å®šåˆ¶</span>
        request <span class="token operator">=</span> create_request<span class="token punctuation">(</span>page<span class="token punctuation">)</span>
        <span class="token comment"># ï¼ˆ2ï¼‰è·å–ç½‘é¡µçš„æºç </span>
        content <span class="token operator">=</span> get_content<span class="token punctuation">(</span>request<span class="token punctuation">)</span>
        <span class="token comment"># ï¼ˆ3ï¼‰ä¸‹è½½</span>
        down_load<span class="token punctuation">(</span>content<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="2-Jsonpath"><a href="#2-Jsonpath" class="headerlink" title="2. Jsonpath"></a>2. Jsonpath</h3><blockquote>
<p>jsonpathæ˜¯ä¸€ç§ç®€å•çš„æ–¹æ³•æ¥æå–ç»™å®šJSONæ–‡æ¡£çš„éƒ¨åˆ†å†…å®¹ã€‚</p>
</blockquote>
<p>è§£æjsonæ•°æ®ï¼Œåªèƒ½è§£ææœ¬åœ°jsonæ–‡ä»¶</p>
<ul>
<li><p>å®‰è£…åŠä½¿ç”¨æ–¹å¼</p>
<p>pipå®‰è£…ï¼š <code>pip install jsonpath</code> </p>
<p>jsonpathçš„ä½¿ç”¨ï¼š </p>
<p><code>obj = json.load(open('jsonæ–‡ä»¶', 'r', encoding='utfâ€8'))</code> </p>
<p><code>ret = jsonpath.jsonpath(obj, 'jsonpathè¯­æ³•')</code></p>
</li>
</ul>
<p>JSONPathè¯­æ³•å…ƒç´ å’Œå¯¹åº”XPathå…ƒç´ çš„å¯¹æ¯”:</p>
<table>
<thead>
<tr>
<th><strong>XPath</strong></th>
<th><strong>JSONPath</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody><tr>
<td>/</td>
<td>$</td>
<td>è¡¨ç¤ºæ ¹å…ƒç´ </td>
</tr>
<tr>
<td>.</td>
<td>@</td>
<td>å½“å‰å…ƒç´ </td>
</tr>
<tr>
<td>/</td>
<td>. or []</td>
<td>å­å…ƒç´ </td>
</tr>
<tr>
<td>..</td>
<td>n/a</td>
<td>çˆ¶å…ƒç´ </td>
</tr>
<tr>
<td>//</td>
<td>..</td>
<td>é€’å½’ä¸‹é™ï¼ŒJSONPathæ˜¯ä»E4Xå€Ÿé‰´çš„ã€‚</td>
</tr>
<tr>
<td>*</td>
<td>*</td>
<td>é€šé…ç¬¦ï¼Œè¡¨ç¤ºæ‰€æœ‰çš„å…ƒç´ </td>
</tr>
<tr>
<td>@</td>
<td>n/a</td>
<td>å±æ€§è®¿é—®å­—ç¬¦</td>
</tr>
<tr>
<td>[]</td>
<td>[]</td>
<td>å­å…ƒç´ æ“ä½œç¬¦</td>
</tr>
<tr>
<td>|</td>
<td>[,]</td>
<td>è¿æ¥æ“ä½œç¬¦åœ¨XPath ç»“æœåˆå¹¶å…¶å®ƒç»“ç‚¹é›†åˆã€‚JSONPå…è®¸nameæˆ–è€…æ•°ç»„ç´¢å¼•ã€‚</td>
</tr>
<tr>
<td>n/a</td>
<td>[start:ends:tep]</td>
<td>æ•°ç»„åˆ†å‰²æ“ä½œä»ES4å€Ÿé‰´ã€‚</td>
</tr>
<tr>
<td>[]</td>
<td>?()</td>
<td>åº”ç”¨è¿‡æ»¤è¡¨ç¤ºå¼</td>
</tr>
<tr>
<td>n/a</td>
<td>()</td>
<td>è„šæœ¬è¡¨è¾¾å¼ï¼Œä½¿ç”¨åœ¨è„šæœ¬å¼•æ“ä¸‹é¢ã€‚</td>
</tr>
<tr>
<td>()</td>
<td>n/a</td>
<td>Xpathåˆ†ç»„</td>
</tr>
</tbody></table>
<p>æ•™ç¨‹é“¾æ¥ï¼šï¼ˆ<a href="http://blog.csdn.net/luxideyao/article/details/77802389%EF%BC%89">http://blog.csdn.net/luxideyao/article/details/77802389ï¼‰</a></p>
<p>eg.</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span> <span class="token property">"store"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"book"</span><span class="token operator">:</span> <span class="token punctuation">[</span> 
      <span class="token punctuation">{</span> <span class="token property">"category"</span><span class="token operator">:</span> <span class="token string">"reference"</span><span class="token punctuation">,</span>
        <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"Nigel Rees"</span><span class="token punctuation">,</span>
        <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Sayings of the Century"</span><span class="token punctuation">,</span>
        <span class="token property">"price"</span><span class="token operator">:</span> <span class="token number">8.95</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token property">"category"</span><span class="token operator">:</span> <span class="token string">"fiction"</span><span class="token punctuation">,</span>
        <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"Evelyn Waugh"</span><span class="token punctuation">,</span>
        <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Sword of Honour"</span><span class="token punctuation">,</span>
        <span class="token property">"price"</span><span class="token operator">:</span> <span class="token number">12.99</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token property">"category"</span><span class="token operator">:</span> <span class="token string">"fiction"</span><span class="token punctuation">,</span>
        <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"Herman Melville"</span><span class="token punctuation">,</span>
        <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Moby Dick"</span><span class="token punctuation">,</span>
        <span class="token property">"isbn"</span><span class="token operator">:</span> <span class="token string">"0-553-21311-3"</span><span class="token punctuation">,</span>
        <span class="token property">"price"</span><span class="token operator">:</span> <span class="token number">8.99</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token property">"category"</span><span class="token operator">:</span> <span class="token string">"fiction"</span><span class="token punctuation">,</span>
        <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"J. R. R. Tolkien"</span><span class="token punctuation">,</span>
        <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"The Lord of the Rings"</span><span class="token punctuation">,</span>
        <span class="token property">"isbn"</span><span class="token operator">:</span> <span class="token string">"0-395-19395-8"</span><span class="token punctuation">,</span>
        <span class="token property">"price"</span><span class="token operator">:</span> <span class="token number">22.99</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"bicycle"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"color"</span><span class="token operator">:</span> <span class="token string">"red"</span><span class="token punctuation">,</span>
      <span class="token property">"price"</span><span class="token operator">:</span> <span class="token number">19.95</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="http://image.kmoon.fun//images/202212211412621.png" alt="image-20221221141234588"></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">
<span class="token keyword">import</span> json
<span class="token keyword">import</span> jsonpath


obj <span class="token operator">=</span> json<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'073_å°šç¡…è°·_çˆ¬è™«_è§£æ_jsonpath.json'</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># ä¹¦åº—æ‰€æœ‰ä¹¦çš„ä½œè€…</span>
author_list <span class="token operator">=</span> jsonpath<span class="token punctuation">.</span>jsonpath<span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'$.store.book[*].author'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>author_list<span class="token punctuation">)</span>

<span class="token comment"># æ‰€æœ‰çš„ä½œè€…</span>
author_list <span class="token operator">=</span> jsonpath<span class="token punctuation">.</span>jsonpath<span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'$..author'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>author_list<span class="token punctuation">)</span>

<span class="token comment"># storeä¸‹é¢çš„æ‰€æœ‰çš„å…ƒç´ </span>
tag_list <span class="token operator">=</span> jsonpath<span class="token punctuation">.</span>jsonpath<span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'$.store.*'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>tag_list<span class="token punctuation">)</span>

<span class="token comment"># storeé‡Œé¢æ‰€æœ‰ä¸œè¥¿çš„price</span>
price_list <span class="token operator">=</span> jsonpath<span class="token punctuation">.</span>jsonpath<span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'$.store..price'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>price_list<span class="token punctuation">)</span>

<span class="token comment"># ç¬¬ä¸‰ä¸ªä¹¦</span>
book <span class="token operator">=</span> jsonpath<span class="token punctuation">.</span>jsonpath<span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'$..book[2]'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span>

<span class="token comment"># æœ€åä¸€æœ¬ä¹¦</span>
book <span class="token operator">=</span> jsonpath<span class="token punctuation">.</span>jsonpath<span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'$..book[(@.length-1)]'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span>

<span class="token comment"># 	å‰é¢çš„ä¸¤æœ¬ä¹¦</span>
book_list <span class="token operator">=</span> jsonpath<span class="token punctuation">.</span>jsonpath<span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'$..book[0,1]'</span><span class="token punctuation">)</span>
book_list <span class="token operator">=</span> jsonpath<span class="token punctuation">.</span>jsonpath<span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'$..book[:2]'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>book_list<span class="token punctuation">)</span>

<span class="token comment"># æ¡ä»¶è¿‡æ»¤éœ€è¦åœ¨ï¼ˆï¼‰çš„å‰é¢æ·»åŠ ä¸€ä¸ªï¼Ÿ</span>
<span class="token comment"># 	 è¿‡æ»¤å‡ºæ‰€æœ‰çš„åŒ…å«isbnçš„ä¹¦ã€‚</span>
book_list <span class="token operator">=</span> jsonpath<span class="token punctuation">.</span>jsonpath<span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'$..book[?(@.isbn)]'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>book_list<span class="token punctuation">)</span>


<span class="token comment"># å“ªæœ¬ä¹¦è¶…è¿‡äº†10å—é’±</span>
book_list <span class="token operator">=</span> jsonpath<span class="token punctuation">.</span>jsonpath<span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'$..book[?(@.price&gt;10)]'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>book_list<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<ul>
<li>æ¡ˆä¾‹ç»ƒä¹ :æ·˜ç¥¨ç¥¨</li>
</ul>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request

url <span class="token operator">=</span> <span class="token string">'https://dianying.taobao.com/cityAction.json?activityId&amp;_ksTS=1629789477003_137&amp;jsoncallback=jsonp138&amp;action=cityAction&amp;n_s=new&amp;event_submit_doGetAllRegion=true'</span>

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'accept'</span><span class="token punctuation">:</span> <span class="token string">'text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01'</span><span class="token punctuation">,</span>
    <span class="token comment"># 'accept-encoding': 'gzip, deflate, br',</span>
    <span class="token string">'accept-language'</span><span class="token punctuation">:</span> <span class="token string">'zh-CN,zh;q=0.9'</span><span class="token punctuation">,</span>
    <span class="token string">'cookie'</span><span class="token punctuation">:</span> <span class="token string">'xxxxxxx'</span><span class="token punctuation">,</span>
    <span class="token string">'referer'</span><span class="token punctuation">:</span> <span class="token string">'https://dianying.taobao.com/'</span><span class="token punctuation">,</span>
    <span class="token string">'user-agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36'</span><span class="token punctuation">,</span>
    <span class="token string">'x-requested-with'</span><span class="token punctuation">:</span> <span class="token string">'XMLHttpRequest'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

request <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url <span class="token operator">=</span> url<span class="token punctuation">,</span> headers <span class="token operator">=</span> headers<span class="token punctuation">)</span>

response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>request<span class="token punctuation">)</span>

content <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

<span class="token comment"># split åˆ‡å‰²</span>
content <span class="token operator">=</span> content<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'('</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">')'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

<span class="token comment"># å†™å…¥æœ¬åœ°jsonæ–‡ä»¶</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'filename.json'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">as</span> fp<span class="token punctuation">:</span>
    fp<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content<span class="token punctuation">)</span>

<span class="token keyword">import</span> json
<span class="token keyword">import</span> jsonpath

<span class="token comment"># è§£ææœ¬åœ°jsonæ–‡ä»¶</span>
obj <span class="token operator">=</span> json<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'filename.json'</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># æå–jsonæ•°æ®ä¸­çš„regionNameå±æ€§</span>
city_list <span class="token operator">=</span> jsonpath<span class="token punctuation">.</span>jsonpath<span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'$..regionName'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>city_list<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>ä½œä¸šï¼š </p>
<p>1.è‚¡ç¥¨ä¿¡æ¯æå–ï¼ˆ<a href="http://quote.stockstar.com/%EF%BC%89">http://quote.stockstar.com/ï¼‰</a> </p>
<p>2.boosç›´è˜ </p>
<p>3.ä¸­åè‹±æ‰ </p>
<p>4.æ±½è½¦ä¹‹å®¶</p>
<h3 id="3-BeautifulSoup"><a href="#3-BeautifulSoup" class="headerlink" title="3. BeautifulSoup"></a>3. BeautifulSoup</h3><blockquote>
<p>BS4å…¨ç§°æ˜¯Beatiful Soupï¼Œå®ƒæä¾›ä¸€äº›ç®€å•çš„ã€pythonå¼çš„å‡½æ•°ç”¨æ¥å¤„ç†å¯¼èˆªã€æœç´¢ã€ä¿®æ”¹åˆ†ææ ‘ç­‰åŠŸèƒ½ã€‚</p>
</blockquote>
<ul>
<li><strong>åŸºæœ¬ç®€ä»‹</strong></li>
</ul>
<ol>
<li><p>BeautifulSoupç®€ç§°ï¼š bs4 </p>
</li>
<li><p>ä»€ä¹ˆæ˜¯BeatifulSoupï¼Ÿ</p>
<p>BeautifulSoupï¼Œå’Œ<strong>lxml</strong>ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ª<strong>htmlçš„è§£æå™¨</strong>ï¼Œä¸»è¦åŠŸèƒ½ä¹Ÿæ˜¯<strong>è§£æå’Œæå–æ•°æ®</strong> </p>
</li>
<li><p>ä¼˜ç¼ºç‚¹ï¼Ÿ</p>
</li>
</ol>
<p>â€‹	ç¼ºç‚¹ï¼šæ•ˆç‡æ²¡æœ‰lxmlçš„æ•ˆç‡é«˜ </p>
<p>â€‹	ä¼˜ç‚¹ï¼šæ¥å£è®¾è®¡äººæ€§åŒ–ï¼Œä½¿ç”¨æ–¹ä¾¿</p>
<ul>
<li><strong>å®‰è£…ä»¥åŠåˆ›å»º</strong></li>
</ul>
<ol>
<li>å®‰è£…</li>
</ol>
<p><code>pip install bs4</code> </p>
<ol start="2">
<li>å¯¼å…¥</li>
</ol>
<p><code>from bs4 import BeautifulSoup</code> </p>
<ol start="3">
<li>åˆ›å»ºå¯¹è±¡</li>
</ol>
<p>æœåŠ¡å™¨å“åº”çš„æ–‡ä»¶ç”Ÿæˆå¯¹è±¡ </p>
<p><code>soup = BeautifulSoup(response.read().decode(), 'lxml')</code> </p>
<p>æœ¬åœ°æ–‡ä»¶ç”Ÿæˆå¯¹è±¡ </p>
<p><code>soup = BeautifulSoup(open('1.html',encoding='utf-8'), 'lxml')</code> </p>
<blockquote>
<p><strong>æ³¨æ„ï¼šé»˜è®¤æ‰“å¼€æ–‡ä»¶çš„ç¼–ç æ ¼å¼gbk,æ‰€ä»¥éœ€è¦æŒ‡å®šæ‰“å¼€ç¼–ç æ ¼å¼</strong></p>
</blockquote>
<ul>
<li><strong>èŠ‚ç‚¹å®šä½</strong></li>
</ul>
<ol>
<li>æ ¹æ®<strong>æ ‡ç­¾å</strong>æŸ¥æ‰¾èŠ‚ç‚¹</li>
</ol>
<p>soup.a ã€æ³¨ã€‘åªèƒ½æ‰¾åˆ°ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„a </p>
<p>soup.a.name è¿”å›æ ‡ç­¾å</p>
<p>soup.a.attrs  è¿”å›æ ‡ç­¾å±æ€§å’Œå±æ€§å€¼</p>
<ol start="2">
<li>å‡½æ•°</li>
</ol>
<p>(1). <strong>find</strong>(è¿”å›ä¸€ä¸ªå¯¹è±¡) </p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>ï¼šåªæ‰¾åˆ°ç¬¬ä¸€ä¸ªaæ ‡ç­¾ 

find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span>tittle<span class="token operator">=</span><span class="token string">'a2'</span><span class="token punctuation">)</span>  æ ¹æ®tittleçš„å€¼æ‰¾ç¬¬ä¸€ä¸ªa

find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span>class_<span class="token operator">=</span><span class="token string">'a2'</span><span class="token punctuation">)</span>  æ ¹<span class="token keyword">class</span>çš„å€¼æ‰¾ç¬¬ä¸€ä¸ªa<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>æ³¨æ„classæ ‡ç­¾éœ€è¦æ·»åŠ ä¸‹åˆ’çº¿_</p>
</blockquote>
<p>(2). <strong>find_all</strong>(è¿”å›ä¸€ä¸ªåˆ—è¡¨) </p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">find_all<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span> æŸ¥æ‰¾åˆ°æ‰€æœ‰çš„a 

find_all<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'span'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> è¿”å›æ‰€æœ‰çš„aå’Œspan 

find_all<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> limit<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span> åªæ‰¾å‰ä¸¤ä¸ªa <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(3). <strong>select</strong>(æ ¹æ®é€‰æ‹©å™¨å¾—åˆ°å¤šä¸ªèŠ‚ç‚¹å¯¹è±¡ è¿”å›åˆ—è¡¨)ã€<strong>æ¨è</strong>ã€‘ </p>
<ol>
<li><strong>element</strong></li>
</ol>
<p>eg:p </p>
<ol start="2">
<li>**<code>.class</code> **</li>
</ol>
<p>å¯ä»¥é€šè¿‡<code>.</code>ä»£è¡¨class  è¿™ç§æ“ä½œå«åšç±»é€‰æ‹©å™¨</p>
<p>eg:<code>.firstname</code> </p>
<ol start="3">
<li><strong><code>#id</code></strong></li>
</ol>
<p>eg:<code>#firstname</code> </p>
<ol start="4">
<li><p><strong>å±æ€§é€‰æ‹©å™¨</strong> </p>
<p>é€šè¿‡å±æ€§æ¥å¯»æ‰¾å¯¹åº”çš„æ ‡ç­¾</p>
</li>
</ol>
<p>[attribute] </p>
<p>eg:<code>li = soup.select('li[class]')</code> </p>
<p>[attribute=value] </p>
<p>eg:<code>li = soup.select('li[class="value"]')</code> </p>
<ol start="5">
<li><strong>å±‚çº§é€‰æ‹©å™¨</strong></li>
</ol>
<p>element element  åä»£é€‰æ‹©å™¨</p>
<p>div p </p>
<p>element&gt;element å­ä»£é€‰æ‹©å™¨ï¼ˆ&gt;ç¬¬ä¸€çº§ï¼‰</p>
<p>div&gt;p </p>
<p>element,element æ‰€æœ‰çº§</p>
<p>div,p </p>
<p>eg:<code>soup = soup.select('a,span')</code> </p>
<ul>
<li><strong>èŠ‚ç‚¹ä¿¡æ¯</strong></li>
</ul>
<p>(1).è·å–èŠ‚ç‚¹å†…å®¹ï¼šé€‚ç”¨äºæ ‡ç­¾ä¸­åµŒå¥—æ ‡ç­¾çš„ç»“æ„ obj.string </p>
<p><strong>obj.get_text()ã€æ¨èã€‘</strong> </p>
<blockquote>
<p>å¦‚æœæ ‡ç­¾å¯¹è±¡ä¸­ åªæœ‰å†…å®¹ é‚£ä¹ˆstringå’Œget_text()éƒ½å¯ä»¥ä½¿ç”¨<br>å¦‚æœæ ‡ç­¾å¯¹è±¡ä¸­ é™¤äº†å†…å®¹è¿˜æœ‰æ ‡ç­¾ é‚£ä¹ˆstringå°±è·å–ä¸åˆ°æ•°æ® è€Œget_text()æ˜¯å¯ä»¥è·å–æ•°æ®</p>
</blockquote>
<p>(2).èŠ‚ç‚¹çš„å±æ€§ </p>
<p>tag.name è·å–æ ‡ç­¾å </p>
<p>eg:tag = find(â€˜li) </p>
<p>print(tag.name) </p>
<p>tag.attrså°†å±æ€§å€¼ä½œä¸ºä¸€ä¸ª<strong>å­—å…¸</strong>è¿”å› </p>
<p>(3).è·å–èŠ‚ç‚¹å±æ€§ </p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">**</span>obj<span class="token punctuation">.</span>attrs<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span>ã€å¸¸ç”¨ã€‘<span class="token operator">**</span> 

obj<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span> 

obj<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>åº”ç”¨å®ä¾‹ï¼š </p>
<p>1.è‚¡ç¥¨ä¿¡æ¯æå–ï¼ˆ<a href="http://quote.stockstar.com/%EF%BC%89">http://quote.stockstar.com/ï¼‰</a> </p>
<p>2.ä¸­åè‹±æ‰ç½‘-æ—§ç‰ˆ </p>
<p>3 .è…¾è®¯å…¬å¸æ‹›è˜éœ€æ±‚æŠ“å–ï¼ˆ<a href="https://hr.tencent.com/index.php%EF%BC%89">https://hr.tencent.com/index.phpï¼‰</a></p>
<ul>
<li>æ¡ˆä¾‹ç»ƒä¹ ï¼šæ˜Ÿå·´å…‹</li>
</ul>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request

url <span class="token operator">=</span> <span class="token string">'https://www.starbucks.com.cn/menu/'</span>

response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>url<span class="token punctuation">)</span>

content <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup

soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>content<span class="token punctuation">,</span><span class="token string">'lxml'</span><span class="token punctuation">)</span>

<span class="token comment"># xpathè¯­æ³•ï¼š</span>
<span class="token comment"># //ul[@class="grid padded-3 product"]//strong/text()</span>
name_list <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'ul[class="grid padded-3 product"] strong'</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> name <span class="token keyword">in</span> name_list<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>æ‹“å±•ï¼šä¸‹è½½æ˜Ÿå·´å…‹èœå•å›¾ç‰‡</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request

url <span class="token operator">=</span> <span class="token string">'https://www.starbucks.com.cn/menu/'</span>

response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>url<span class="token punctuation">)</span>

content <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>


<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup

soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>content<span class="token punctuation">,</span><span class="token string">'lxml'</span><span class="token punctuation">)</span>

<span class="token comment"># //ul[@class="grid padded-3 product"]//strong/text()</span>
url_list <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'div[class="preview circle"]'</span><span class="token punctuation">)</span>
name_list <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'ul[class="grid padded-3 product"] strong'</span><span class="token punctuation">)</span>
tittle<span class="token operator">=</span><span class="token string">"https://www.starbucks.com.cn"</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    urls<span class="token operator">=</span>tittle<span class="token operator">+</span>url_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'"'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    name<span class="token operator">=</span>name_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token builtin">str</span><span class="token operator">=</span><span class="token string">"/"</span>
    <span class="token keyword">if</span> <span class="token builtin">str</span> <span class="token keyword">in</span> name<span class="token punctuation">:</span>
        name<span class="token operator">=</span>name<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>urls<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlretrieve<span class="token punctuation">(</span>url<span class="token operator">=</span>urls<span class="token punctuation">,</span> filename<span class="token operator">=</span><span class="token string">'./XBKImg/'</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'.jpg'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h1 id="Selenium"><a href="#Selenium" class="headerlink" title="Selenium"></a>Selenium</h1><h2 id="Selenium-1"><a href="#Selenium-1" class="headerlink" title="Selenium"></a>Selenium</h2><h3 id="1-ä»€ä¹ˆæ˜¯selenium"><a href="#1-ä»€ä¹ˆæ˜¯selenium" class="headerlink" title="1.ä»€ä¹ˆæ˜¯selenium"></a>1.ä»€ä¹ˆæ˜¯selenium</h3><blockquote>
<p>seleniumæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·,æ”¯æŒFirefox,Chromeç­‰ä¼—å¤šæµè§ˆå™¨ åœ¨çˆ¬è™«ä¸­çš„åº”ç”¨ä¸»è¦æ˜¯ç”¨æ¥è§£å†³JSæ¸²æŸ“çš„é—®é¢˜ã€‚</p>
</blockquote>
<p>ï¼ˆ1ï¼‰Seleniumæ˜¯ä¸€ä¸ªç”¨äºWebåº”ç”¨ç¨‹åºæµ‹è¯•çš„å·¥å…·ã€‚ ï¼ˆ2ï¼‰Selenium æµ‹è¯•ç›´æ¥è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œå°±åƒçœŸæ­£çš„ç”¨æˆ·åœ¨æ“ä½œä¸€æ ·ã€‚ </p>
<p>ï¼ˆ3ï¼‰æ”¯æŒé€šè¿‡å„ç§<strong>driver</strong>ï¼ˆFirfoxDriver,IternetExplorerDriverï¼ŒOperaDriverï¼ŒChromeDriverï¼‰é©±åŠ¨çœŸå®æµè§ˆå™¨å®Œæˆæµ‹è¯•ã€‚ </p>
<p>ï¼ˆ4ï¼‰seleniumä¹Ÿæ˜¯æ”¯æŒæ— ç•Œé¢æµè§ˆå™¨æ“ä½œçš„ã€‚ </p>
<h3 id="2-ä¸ºä»€ä¹ˆä½¿ç”¨selenium"><a href="#2-ä¸ºä»€ä¹ˆä½¿ç”¨selenium" class="headerlink" title="2.ä¸ºä»€ä¹ˆä½¿ç”¨selenium"></a>2.ä¸ºä»€ä¹ˆä½¿ç”¨selenium</h3><p>æ¨¡æ‹Ÿæµè§ˆå™¨åŠŸèƒ½ï¼Œè‡ªåŠ¨æ‰§è¡Œç½‘é¡µä¸­çš„jsä»£ç ï¼Œå®ç°åŠ¨æ€åŠ è½½ </p>
<h3 id="3-å®‰è£…selenium"><a href="#3-å®‰è£…selenium" class="headerlink" title="3.å®‰è£…selenium"></a>3.å®‰è£…selenium</h3><p>ï¼ˆ1ï¼‰æ“ä½œè°·æ­Œæµè§ˆå™¨é©±åŠ¨ä¸‹è½½åœ°å€ <a href="http://chromedriver.storage.googleapis.com/index.html">http://chromedriver.storage.googleapis.com/index.html</a> </p>
<p>ï¼ˆ2ï¼‰è°·æ­Œé©±åŠ¨å’Œè°·æ­Œæµè§ˆå™¨ç‰ˆæœ¬ä¹‹é—´çš„æ˜ å°„è¡¨ <a href="http://blog.csdn.net/huilan_same/article/details/51896672">http://blog.csdn.net/huilan_same/article/details/51896672</a> </p>
<p>ï¼ˆ3ï¼‰æŸ¥çœ‹è°·æ­Œæµè§ˆå™¨ç‰ˆæœ¬ </p>
<p>è°·æ­Œæµè§ˆå™¨å³ä¸Šè§’â€â€&gt;å¸®åŠ©â€â€&gt;å…³äº </p>
<p>ï¼ˆ4ï¼‰pip install selenium </p>
<h3 id="4-ä½¿ç”¨æ­¥éª¤"><a href="#4-ä½¿ç”¨æ­¥éª¤" class="headerlink" title="4.ä½¿ç”¨æ­¥éª¤"></a><strong>4.ä½¿ç”¨æ­¥éª¤</strong></h3><p>ï¼ˆ1ï¼‰å¯¼å…¥ï¼š</p>
<p><code>from selenium import webdriver</code> </p>
<p>ï¼ˆ2ï¼‰åˆ›å»ºæµè§ˆå™¨æ“ä½œå¯¹è±¡ï¼š </p>
<p><code>path = æµè§ˆå™¨é©±åŠ¨æ–‡ä»¶è·¯å¾„</code> </p>
<p><code>browser = webdriver.Chrome(path)</code> </p>
<p>ï¼ˆ3ï¼‰è®¿é—®ç½‘å€ </p>
<p><code>url = è¦è®¿é—®çš„ç½‘å€ browser.get(url)</code> </p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ï¼ˆ1ï¼‰å¯¼å…¥selenium</span>
<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver

<span class="token comment"># (2) åˆ›å»ºæµè§ˆå™¨æ“ä½œå¯¹è±¡</span>

browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token string">"chromedriver.exe"</span><span class="token punctuation">)</span>

<span class="token comment"># ï¼ˆ3ï¼‰è®¿é—®ç½‘ç«™</span>
<span class="token comment"># url = 'https://www.baidu.com'</span>
<span class="token comment">#</span>
<span class="token comment"># browser.get(url)</span>

url <span class="token operator">=</span> <span class="token string">'https://www.jd.com/'</span>

browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>

<span class="token comment"># page_sourceè·å–ç½‘é¡µæºç </span>
content <span class="token operator">=</span> browser<span class="token punctuation">.</span>page_source
<span class="token keyword">print</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>æ³¨æ„ï¼š</p>
<p>1.éœ€è¦å®‰è£…Chromeæµè§ˆå™¨</p>
<p>2.é—ªé€€çš„è¯éœ€è¦å®‰è£…3.3.1ç‰ˆæœ¬ <code>pip install selenium==3.3.1</code></p>
</blockquote>
<h4 id="4â€1ï¼šå…ƒç´ å®šä½"><a href="#4â€1ï¼šå…ƒç´ å®šä½" class="headerlink" title="4â€1ï¼šå…ƒç´ å®šä½"></a>4â€1ï¼šå…ƒç´ å®šä½</h4><p>è‡ªåŠ¨åŒ–è¦åšçš„å°±æ˜¯æ¨¡æ‹Ÿé¼ æ ‡å’Œé”®ç›˜æ¥æ“ä½œæ¥æ“ä½œè¿™äº›å…ƒç´ ï¼Œç‚¹å‡»ã€è¾“å…¥ç­‰ç­‰ã€‚æ“ä½œè¿™äº›å…ƒç´ å‰é¦–å…ˆ è¦æ‰¾åˆ°å®ƒä»¬ï¼ŒWebDriveræä¾›å¾ˆå¤šå®šä½å…ƒç´ çš„æ–¹æ³• </p>
<p><strong>æ–¹æ³•ï¼š</strong> </p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token number">1</span><span class="token punctuation">.</span>find_element_by_id 

button <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'su'</span><span class="token punctuation">)</span> 

<span class="token number">2</span><span class="token punctuation">.</span>find_elements_by_name 

name <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">'wd'</span><span class="token punctuation">)</span> 

<span class="token number">3</span><span class="token punctuation">.</span>find_elements_by_xpath 

xpath1 <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_elements_by_xpath<span class="token punctuation">(</span><span class="token string">'//input[@id="su"]'</span><span class="token punctuation">)</span> 

<span class="token number">4</span><span class="token punctuation">.</span>find_elements_by_tag_name 

names <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_elements_by_tag_name<span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span> 

<span class="token number">5</span><span class="token punctuation">.</span>find_elements_by_css_selector 

my_input <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_elements_by_css_selector<span class="token punctuation">(</span><span class="token string">'#kw'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> 

<span class="token number">6</span><span class="token punctuation">.</span>find_elements_by_link_text 

browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">"æ–°é—»"</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>eg.</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver

path <span class="token operator">=</span> <span class="token string">'chromedriver.exe'</span>
browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>path<span class="token punctuation">)</span>

url <span class="token operator">=</span> <span class="token string">'https://www.baidu.com'</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>

<span class="token comment"># å…ƒç´ å®šä½</span>

<span class="token comment"># æ ¹æ®idæ¥æ‰¾åˆ°å¯¹è±¡</span>
button <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'su'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span>

<span class="token comment"># æ ¹æ®æ ‡ç­¾å±æ€§çš„å±æ€§å€¼æ¥è·å–å¯¹è±¡çš„</span>
button <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">'wd'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span>

<span class="token comment"># æ ¹æ®æ ‡ç­¾çš„åå­—æ¥è·å–å¯¹è±¡</span>
button <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_elements_by_tag_name<span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span>

<span class="token comment"># æ ¹æ®xpathè¯­å¥æ¥è·å–å¯¹è±¡</span>
button <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_elements_by_xpath<span class="token punctuation">(</span><span class="token string">'//input[@id="su"]'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span>

<span class="token comment"># ä½¿ç”¨çš„bs4çš„è¯­æ³•æ¥è·å–å¯¹è±¡</span>
button <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_elements_by_css_selector<span class="token punctuation">(</span><span class="token string">'#su'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span>

button <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_elements_by_link_text<span class="token punctuation">(</span><span class="token string">'æ–°é—»'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="4â€2-è®¿é—®å…ƒç´ ä¿¡æ¯"><a href="#4â€2-è®¿é—®å…ƒç´ ä¿¡æ¯" class="headerlink" title="4â€2:è®¿é—®å…ƒç´ ä¿¡æ¯"></a>4â€2:è®¿é—®å…ƒç´ ä¿¡æ¯</h4><p>è·å–å…ƒç´ <strong>å±æ€§</strong> .get_attribute(â€˜classâ€™) </p>
<p>è·å–å…ƒç´ <strong>æ–‡æœ¬</strong> .text </p>
<p>è·å–<strong>æ ‡ç­¾å</strong> .tag_name </p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver

path <span class="token operator">=</span> <span class="token string">'chromedriver.exe'</span>
browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>path<span class="token punctuation">)</span>

url <span class="token operator">=</span> <span class="token string">'http://www.baidu.com'</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>

<span class="token builtin">input</span> <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'su'</span><span class="token punctuation">)</span>

<span class="token comment"># è·å–æ ‡ç­¾çš„å±æ€§</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># è·å–æ ‡ç­¾çš„åå­—</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">.</span>tag_name<span class="token punctuation">)</span>
<span class="token comment"># è·å–å…ƒç´ æ–‡æœ¬</span>
a <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">'æ–°é—»'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="4â€3-äº¤äº’"><a href="#4â€3-äº¤äº’" class="headerlink" title="4â€3:äº¤äº’"></a>4â€3:äº¤äº’</h4><p>ç‚¹å‡»:click() </p>
<p>è¾“å…¥:send_keys() </p>
<p>åé€€æ“ä½œ:browser.back() </p>
<p>å‰è¿›æ“ä½œ:browser.forword() </p>
<p>æ¨¡æ‹ŸJSæ»šåŠ¨: </p>
<p><code>js='document.documentElement.scrollTop=100000'</code> </p>
<p><code>browser.execute_script(js)</code>  <strong>æ‰§è¡Œjsä»£ç </strong></p>
<p>è·å–ç½‘é¡µä»£ç ï¼špage_source </p>
<p>é€€å‡ºï¼šbrowser.quit()</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver

<span class="token comment"># åˆ›å»ºæµè§ˆå™¨å¯¹è±¡</span>
path <span class="token operator">=</span> <span class="token string">'chromedriver.exe'</span>
browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>path<span class="token punctuation">)</span>

<span class="token comment"># url</span>
url <span class="token operator">=</span> <span class="token string">'https://www.baidu.com'</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>

<span class="token comment"># å»¶æ—¶</span>
<span class="token keyword">import</span> time
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># è·å–æ–‡æœ¬æ¡†å¯¹è±¡</span>
<span class="token builtin">input</span> <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'kw'</span><span class="token punctuation">)</span>

<span class="token comment"># åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥å‘¨æ°ä¼¦</span>
<span class="token builtin">input</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">'å‘¨æ°ä¼¦'</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># è·å–ç™¾åº¦ä¸€ä¸‹æŒ‰é’®</span>
button <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'su'</span><span class="token punctuation">)</span>
<span class="token comment"># ç‚¹å‡»æŒ‰é’®</span>
button<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># æ»‘åˆ°åº•éƒ¨</span>
js_bottom <span class="token operator">=</span> <span class="token string">'document.documentElement.scrollTop=100000'</span>
browser<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span>js_bottom<span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># è·å–ä¸‹ä¸€é¡µæŒ‰é’®(xpathè¯­æ³•)</span>
<span class="token builtin">next</span> <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'//a[@class="n"]'</span><span class="token punctuation">)</span>

<span class="token comment"># ç‚¹å‡»ä¸‹ä¸€é¡µ</span>
<span class="token builtin">next</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># å›åˆ°ä¸Šä¸€é¡µ</span>
browser<span class="token punctuation">.</span>back<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># å›å»</span>
browser<span class="token punctuation">.</span>forward<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment"># é€€å‡º</span>
browser<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Phantomjs"><a href="#Phantomjs" class="headerlink" title="Phantomjs"></a>Phantomjs</h2><p>1.ä»€ä¹ˆæ˜¯Phantomjsï¼Ÿ<br>ï¼ˆ1ï¼‰æ˜¯ä¸€ä¸ª<strong>æ— ç•Œé¢çš„æµè§ˆå™¨</strong></p>
<p>ï¼ˆ2ï¼‰æ”¯æŒé¡µé¢å…ƒç´ æŸ¥æ‰¾ï¼Œjsçš„æ‰§è¡Œç­‰</p>
<p>ï¼ˆ3ï¼‰ç”±äºä¸è¿›è¡Œcsså’Œguiæ¸²æŸ“ï¼Œè¿è¡Œæ•ˆç‡è¦æ¯”çœŸå®çš„æµè§ˆå™¨è¦å¿«å¾ˆå¤š</p>
<p>2.å¦‚ä½•ä½¿ç”¨Phantomjsï¼Ÿ</p>
<p>ï¼ˆ1ï¼‰è·å–PhantomJS.exeæ–‡ä»¶è·¯å¾„path</p>
<p>ï¼ˆ2ï¼‰browser = webdriver.PhantomJS(path)</p>
<p>ï¼ˆ3ï¼‰browser.get(url)</p>
<p>æ‰©å±•ï¼š</p>
<p><strong>ä¿å­˜å±å¹•å¿«ç…§</strong>:<code>browser.save_screenshot('baidu.png')</code></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver

path <span class="token operator">=</span> <span class="token string">'phantomjs.exe'</span>

browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>PhantomJS<span class="token punctuation">(</span>path<span class="token punctuation">)</span>

url <span class="token operator">=</span> <span class="token string">'https://www.baidu.com'</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>

browser<span class="token punctuation">.</span>save_screenshot<span class="token punctuation">(</span><span class="token string">'baidu.png'</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> time
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token builtin">input</span> <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'kw'</span><span class="token punctuation">)</span>
<span class="token builtin">input</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">'æ˜†å‡Œ'</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

browser<span class="token punctuation">.</span>save_screenshot<span class="token punctuation">(</span><span class="token string">'kunling.png'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="Chrome-handless"><a href="#Chrome-handless" class="headerlink" title="Chrome handless"></a>Chrome handless</h2><blockquote>
<p>Chrome-headless æ¨¡å¼ï¼Œ Google é’ˆå¯¹ Chrome æµè§ˆå™¨59ç‰ˆæ–°å¢åŠ çš„ä¸€ç§æ¨¡å¼ï¼Œå¯ä»¥è®©ä½ ä¸æ‰“å¼€UIç•Œé¢çš„æƒ…å†µä¸‹ä½¿ç”¨ Chrome æµè§ˆå™¨ï¼Œæ‰€ä»¥è¿è¡Œæ•ˆæœä¸ Chrome ä¿æŒå®Œç¾ä¸€è‡´ã€‚</p>
</blockquote>
<h3 id="1-ç³»ç»Ÿè¦æ±‚"><a href="#1-ç³»ç»Ÿè¦æ±‚" class="headerlink" title="1.ç³»ç»Ÿè¦æ±‚"></a>1.ç³»ç»Ÿè¦æ±‚</h3><p>Chrome<br>        Unix\Linux ç³»ç»Ÿéœ€è¦ chrome &gt;= 59<br>        Windows ç³»ç»Ÿéœ€è¦ chrome &gt;= 60<br>Python3.6ä»¥ä¸Š<br>Selenium==3.4.*<br>ChromeDriver==2.31ä»¥ä¸Š</p>
<h3 id="2-é…ç½®"><a href="#2-é…ç½®" class="headerlink" title="2.é…ç½®"></a>2.é…ç½®</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>chrome<span class="token punctuation">.</span>options <span class="token keyword">import</span> Options

chrome_options <span class="token operator">=</span> Options<span class="token punctuation">(</span><span class="token punctuation">)</span>
chrome_options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'â€â€headless'</span><span class="token punctuation">)</span>
chrome_options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'â€â€disableâ€gpu'</span><span class="token punctuation">)</span>

<span class="token comment"># Chromeæµè§ˆå™¨è·¯å¾„</span>
path <span class="token operator">=</span> <span class="token string">r'C:\Program Files\Google\Chrome\Application\chrome.exe'</span>
chrome_options<span class="token punctuation">.</span>binary_location <span class="token operator">=</span> path

browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>chrome_options<span class="token operator">=</span>chrome_options<span class="token punctuation">)</span>

browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com/'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="3-å°è£…è°ƒç”¨"><a href="#3-å°è£…è°ƒç”¨" class="headerlink" title="3.å°è£…è°ƒç”¨"></a>3.å°è£…è°ƒç”¨</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>chrome<span class="token punctuation">.</span>options <span class="token keyword">import</span> Options

<span class="token comment"># å‡½æ•°å°è£…</span>
<span class="token keyword">def</span> <span class="token function">share_browser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#åˆå§‹åŒ–</span>
	chrome_options <span class="token operator">=</span> Options<span class="token punctuation">(</span><span class="token punctuation">)</span>
	chrome_options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'â€â€headless'</span><span class="token punctuation">)</span>
	chrome_options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'â€â€disableâ€gpu'</span><span class="token punctuation">)</span>
	<span class="token comment">#è¿™ä¸ªè·¯å¾„æ˜¯è°·æ­Œæµè§ˆå™¨çš„è·¯å¾„</span>
	path <span class="token operator">=</span> <span class="token string">r'C:\Program Files 	(x86)\Google\Chrome\Application\chrome.exe'</span>
	chrome_options<span class="token punctuation">.</span>binary_location <span class="token operator">=</span> path
	browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>chrome_options<span class="token operator">=</span>chrome_options<span class="token punctuation">)</span>
	<span class="token keyword">return</span> browser

<span class="token comment"># å°è£…è°ƒç”¨</span>
browser <span class="token operator">=</span> share_browser<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com/'</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>save_screenshot<span class="token punctuation">(</span><span class="token string">'handless1.png'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h1 id="Requests"><a href="#Requests" class="headerlink" title="Requests"></a>Requests</h1><h2 id="åŸºæœ¬ä½¿ç”¨-1"><a href="#åŸºæœ¬ä½¿ç”¨-1" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h2><h3 id="1-æ–‡æ¡£"><a href="#1-æ–‡æ¡£" class="headerlink" title="1.æ–‡æ¡£"></a>1.æ–‡æ¡£</h3><p>å®˜æ–¹æ–‡æ¡£</p>
<p><a href="https://cn.python-requests.org/zh_CN/latest/">https://cn.python-requests.org/zh_CN/latest/</a></p>
<p>å¿«é€Ÿä¸Šæ‰‹</p>
<p><a href="https://cn.python-requests.org/zh_CN/latest/user/quickstart.html">https://cn.python-requests.org/zh_CN/latest/user/quickstart.html</a></p>
<h3 id="2-å®‰è£…"><a href="#2-å®‰è£…" class="headerlink" title="2.å®‰è£…"></a>2.å®‰è£…</h3><p><code>pip install requests</code></p>
<h3 id="3-ç±»å‹-å±æ€§"><a href="#3-ç±»å‹-å±æ€§" class="headerlink" title="3.ç±»å‹ å±æ€§"></a>3.ç±»å‹ å±æ€§</h3><p>ç±»å‹ 				   ï¼šmodels.Response</p>
<p>r.text 				   : è·å–ç½‘ç«™æºç </p>
<p>r.encoding 		  ï¼šè®¿é—®æˆ–å®šåˆ¶ç¼–ç æ–¹å¼</p>
<p>r.url 				      ï¼šè·å–è¯·æ±‚çš„url</p>
<p>r.content 			 ï¼šå“åº”çš„å­—èŠ‚ç±»å‹</p>
<p>r.status_code      ï¼šå“åº”çš„çŠ¶æ€ç </p>
<p>r.headers 			 ï¼šå“åº”çš„å¤´ä¿¡æ¯</p>
<p>åŸºæœ¬ä½¿ç”¨</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests

url <span class="token operator">=</span> <span class="token string">'http://www.baidu.com'</span>

response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">)</span>

<span class="token comment"># ä¸€ä¸ªç±»å‹å’Œå…­ä¸ªå±æ€§</span>
<span class="token comment"># Responseç±»å‹</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># è®¾ç½®å“åº”çš„ç¼–ç æ ¼å¼</span>
response<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">'utf-8'</span>

<span class="token comment"># ä»¥å­—ç¬¦ä¸²çš„å½¢å¼æ¥è¿”å›äº†ç½‘é¡µçš„æºç </span>
<span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>

<span class="token comment"># è¿”å›ä¸€ä¸ªurlåœ°å€</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>url<span class="token punctuation">)</span>

<span class="token comment"># è¿”å›çš„æ˜¯äºŒè¿›åˆ¶çš„æ•°æ®</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>content<span class="token punctuation">)</span>

<span class="token comment"># è¿”å›å“åº”çš„çŠ¶æ€ç </span>
<span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>status_code<span class="token punctuation">)</span>

<span class="token comment"># è¿”å›çš„æ˜¯å“åº”å¤´</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p> <strong>å¯¹æ¯”urllibã€requests</strong></p>
</blockquote>
<p>urllib</p>
<p>  (1) ä¸€ä¸ªç±»å‹ä»¥åŠ<strong>å…­ä¸ªæ–¹æ³•</strong></p>
<p>ï¼ˆ2ï¼‰getè¯·æ±‚</p>
<p>ï¼ˆ3ï¼‰postè¯·æ±‚   ç™¾åº¦ç¿»è¯‘</p>
<p>ï¼ˆ4ï¼‰ajaxçš„getè¯·æ±‚</p>
<p>ï¼ˆ5ï¼‰ajaxçš„postè¯·æ±‚</p>
<p>ï¼ˆ6ï¼‰cookieç™»é™† å¾®åš</p>
<p>ï¼ˆ7ï¼‰ä»£ç†</p>
<p>requests</p>
<p>  (1)ä¸€ä¸ªç±»å‹ä»¥åŠ<strong>å…­ä¸ªå±æ€§</strong></p>
<p>ï¼ˆ2ï¼‰getè¯·æ±‚</p>
<p>ï¼ˆ3ï¼‰postè¯·æ±‚</p>
<p>ï¼ˆ4ï¼‰ä»£ç†</p>
<p>ï¼ˆ5ï¼‰cookie  éªŒè¯ç </p>
<h2 id="getè¯·æ±‚"><a href="#getè¯·æ±‚" class="headerlink" title="getè¯·æ±‚"></a>getè¯·æ±‚</h2><h3 id="1-requests-get"><a href="#1-requests-get" class="headerlink" title="1.requests.get()"></a>1.requests.get()</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests

url <span class="token operator">=</span> <span class="token string">'https://www.baidu.com/s'</span>

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36'</span>
<span class="token punctuation">}</span>

data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'wd'</span><span class="token punctuation">:</span><span class="token string">'åŒ—äº¬'</span>
<span class="token punctuation">}</span>

<span class="token comment"># å‚æ•°åˆ—è¡¨</span>
<span class="token comment"># url  è¯·æ±‚èµ„æºè·¯å¾„</span>
<span class="token comment"># params å‚æ•°</span>
<span class="token comment"># kwargs å­—å…¸</span>
response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>params<span class="token operator">=</span>data<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>

content <span class="token operator">=</span> response<span class="token punctuation">.</span>text
<span class="token keyword">print</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="2-å‚æ•°å®šåˆ¶"><a href="#2-å‚æ•°å®šåˆ¶" class="headerlink" title="2.å‚æ•°å®šåˆ¶"></a>2.å‚æ•°å®šåˆ¶</h3><p><strong>æ€»ç»“ï¼š</strong><br>ï¼ˆ1ï¼‰å‚æ•°ä½¿ç”¨<strong>params</strong>ä¼ é€’<br>ï¼ˆ2ï¼‰å‚æ•°<strong>æ— éœ€urlencodeç¼–ç </strong><br>ï¼ˆ3ï¼‰ä¸éœ€è¦è¯·æ±‚å¯¹è±¡çš„å®šåˆ¶<br>ï¼ˆ4ï¼‰è¯·æ±‚èµ„æºè·¯å¾„ä¸­çš„<strong>ï¼Ÿ</strong>å¯ä»¥åŠ ä¹Ÿå¯ä»¥ä¸åŠ </p>
<h2 id="postè¯·æ±‚"><a href="#postè¯·æ±‚" class="headerlink" title="postè¯·æ±‚"></a>postè¯·æ±‚</h2><h3 id="requests-post"><a href="#requests-post" class="headerlink" title="requests.post()"></a>requests.post()</h3><blockquote>
<p>getå’ŒpoståŒºåˆ«ï¼Ÿ </p>
<p>1ï¼š getè¯·æ±‚çš„å‚æ•°åå­—æ˜¯params </p>
<p>postè¯·æ±‚çš„å‚æ•°çš„åå­—æ˜¯data </p>
<p>2ï¼š è¯·æ±‚èµ„æºè·¯å¾„åé¢å¯ä»¥ä¸åŠ ? </p>
<p>3ï¼š ä¸éœ€è¦æ‰‹åŠ¨ç¼–è§£ç  </p>
<p>4ï¼š ä¸éœ€è¦åšè¯·æ±‚å¯¹è±¡çš„å®šåˆ¶</p>
</blockquote>
<p>example:</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests

url <span class="token operator">=</span> <span class="token string">'https://fanyi.baidu.com/sug'</span>

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36'</span>
<span class="token punctuation">}</span>

data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'kw'</span><span class="token punctuation">:</span> <span class="token string">'eye'</span>
<span class="token punctuation">}</span>

<span class="token comment"># url è¯·æ±‚åœ°å€</span>
<span class="token comment"># data è¯·æ±‚å‚æ•°</span>
<span class="token comment"># json</span>
<span class="token comment"># kwargs å­—å…¸</span>
response <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>data<span class="token operator">=</span>data<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>

content <span class="token operator">=</span>response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>æ€»ç»“</strong>ï¼š<br>ï¼ˆ1ï¼‰postè¯·æ±‚ä¸éœ€è¦ç¼–è§£ç <br>ï¼ˆ2ï¼‰postè¯·æ±‚çš„å‚æ•°æ˜¯<strong>data</strong><br>ï¼ˆ3ï¼‰ä¸éœ€è¦è¯·æ±‚å¯¹è±¡çš„å®šåˆ¶</p>
<h2 id="ä»£ç†"><a href="#ä»£ç†" class="headerlink" title="ä»£ç†"></a>ä»£ç†</h2><h3 id="proxyå®šåˆ¶"><a href="#proxyå®šåˆ¶" class="headerlink" title="proxyå®šåˆ¶"></a>proxyå®šåˆ¶</h3><p>åœ¨è¯·æ±‚ä¸­è®¾ç½®proxieså‚æ•°  </p>
<p>å‚æ•°ç±»å‹æ˜¯ä¸€ä¸ªå­—å…¸ç±»å‹</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests
url <span class="token operator">=</span> <span class="token string">'http://www.baidu.com/s?'</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'Cookie'</span><span class="token punctuation">:</span> <span class="token string">'xxxxxxxxxx'</span><span class="token punctuation">,</span>
    <span class="token string">'userâ€agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/65.0.3325.181Safari/537.36'</span>
<span class="token punctuation">}</span>
data <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token string">'wd'</span><span class="token punctuation">:</span><span class="token string">'ip'</span>
<span class="token punctuation">}</span>
proxy <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token string">'http'</span><span class="token punctuation">:</span><span class="token string">'219.149.59.250:9797'</span>
<span class="token punctuation">}</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>params<span class="token operator">=</span>data<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">,</span>proxies<span class="token operator">=</span>proxy<span class="token punctuation">)</span>

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'proxy.html'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utfâ€8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>
    fp<span class="token punctuation">.</span>write<span class="token punctuation">(</span>r<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="cookieç™»å½•-1"><a href="#cookieç™»å½•-1" class="headerlink" title="cookieç™»å½•"></a>cookieç™»å½•</h2><ul>
<li>æ¡ˆä¾‹ç»ƒä¹ ï¼šcookieç™»å½•å¤è¯—æ–‡ç½‘</li>
</ul>
<p>éœ€æ±‚ï¼šé€šè¿‡ç™»é™†  ç„¶åè¿›å…¥åˆ°ä¸»é¡µé¢</p>
<p>é€šè¿‡æ‰¾ç™»é™†æ¥å£å‘ç° ç™»é™†çš„æ—¶å€™éœ€è¦çš„å‚æ•°å¾ˆå¤š</p>
<p>è§‚å¯Ÿåˆ°_VIEWSTATEã€__VIEWSTATEGENERATORã€codeæ˜¯ä¸€ä¸ªå¯ä»¥å˜åŒ–çš„é‡</p>
<p><img src="http://image.kmoon.fun//images/202212220940853.png" alt="image-20221222094013606"></p>
<p>éš¾ç‚¹:<br>(1)_VIEWSTATE   __VIEWSTATEGENERATOR<br>ä¸€èˆ¬æƒ…å†µçœ‹ä¸åˆ°çš„æ•°æ® éƒ½æ˜¯åœ¨é¡µé¢çš„æºç ä¸­</p>
<p>è§‚å¯Ÿåˆ°è¿™ä¸¤ä¸ªæ•°æ®åœ¨é¡µé¢çš„æºç ä¸­ </p>
<p><img src="http://image.kmoon.fun//images/202212220944822.png" alt="image-20221222094329840">æ‰€ä»¥éœ€è¦è·å–é¡µé¢çš„æºç  ç„¶åè¿›è¡Œè§£æå°±å¯ä»¥è·å–</p>
<p>(2)éªŒè¯ç </p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests

<span class="token comment"># ç™»é™†é¡µé¢urlåœ°å€</span>
url <span class="token operator">=</span> <span class="token string">'https://so.gushiwen.cn/user/login.aspx?from=http://so.gushiwen.cn/user/collect.aspx'</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36'</span>
<span class="token punctuation">}</span>

<span class="token comment"># è·å–é¡µé¢çš„æºç </span>
response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url <span class="token operator">=</span> url<span class="token punctuation">,</span>headers <span class="token operator">=</span> headers<span class="token punctuation">)</span>
content <span class="token operator">=</span> response<span class="token punctuation">.</span>text

<span class="token comment"># è§£æé¡µé¢æºç   è·å–_VIEWSTATE   __VIEWSTATEGENERATOR</span>
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup

soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>content<span class="token punctuation">,</span><span class="token string">'lxml'</span><span class="token punctuation">)</span>

<span class="token comment"># è·å–_VIEWSTATE</span>
viewstate <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'#__VIEWSTATE'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>attrs<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">)</span>

<span class="token comment"># è·å–__VIEWSTATEGENERATOR</span>
viewstategenerator <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'#__VIEWSTATEGENERATOR'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>attrs<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">)</span>

<span class="token comment"># è·å–éªŒè¯ç å›¾ç‰‡</span>
code <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'#imgCode'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>attrs<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span>
code_url <span class="token operator">=</span> <span class="token string">'https://so.gushiwen.cn'</span> <span class="token operator">+</span> code

<span class="token comment"># å…¶å®éªŒè¯ç å›¾ç‰‡è·¯å¾„æ˜¯å›ºå®šçš„</span>

<span class="token comment"># æœ‰å‘ï¼ˆè¯·æ±‚ä¸€æ¬¡éªŒè¯ç å›¾ç‰‡åä¼šåˆ·æ–°ä¸€æ¬¡ éªŒè¯ç ååé¢ç™»å½•è¯·æ±‚çš„codeä¸æ˜¯åŒä¸€ä¸ªï¼‰</span>
<span class="token comment"># import urllib.request</span>
<span class="token comment"># urllib.request.urlretrieve(url=code_url,filename='code.jpg')</span>


<span class="token comment"># requestsé‡Œé¢æœ‰ä¸€ä¸ªæ–¹æ³• sessionï¼ˆï¼‰  </span>
é€šè¿‡sessionçš„è¿”å›å€¼ å°±èƒ½ä½¿ç”¨è¯·æ±‚å˜æˆä¸€ä¸ªå¯¹è±¡

session <span class="token operator">=</span> requests<span class="token punctuation">.</span>session<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># éªŒè¯ç çš„urlçš„å†…å®¹</span>
response_code <span class="token operator">=</span> session<span class="token punctuation">.</span>get<span class="token punctuation">(</span>code_url<span class="token punctuation">)</span>
<span class="token comment"># æ³¨æ„æ­¤æ—¶è¦ä½¿ç”¨äºŒè¿›åˆ¶æ•°æ®  ä¸èƒ½ä½¿ç”¨text å› ä¸ºæˆ‘ä»¬è¦ä½¿ç”¨çš„æ˜¯å›¾ç‰‡çš„ä¸‹è½½</span>
content_code <span class="token operator">=</span> response_code<span class="token punctuation">.</span>content

<span class="token comment"># wbçš„æ¨¡å¼å°±æ˜¯å°†äºŒè¿›åˆ¶æ•°æ®å†™å…¥åˆ°æ–‡ä»¶</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'code.jpg'</span><span class="token punctuation">,</span><span class="token string">'wb'</span><span class="token punctuation">)</span><span class="token keyword">as</span> fp<span class="token punctuation">:</span>
    fp<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content_code<span class="token punctuation">)</span>

<span class="token comment"># è·å–äº†éªŒè¯ç çš„å›¾ç‰‡ä¹‹å ä¸‹è½½åˆ°æœ¬åœ° ç„¶åè§‚å¯ŸéªŒè¯ç   è§‚å¯Ÿä¹‹å ç„¶ååœ¨æ§åˆ¶å°è¾“å…¥è¿™ä¸ªéªŒè¯ç  å°±å¯ä»¥å°†è¿™ä¸ªå€¼ç»™</span>
<span class="token comment"># codeçš„å‚æ•° å°±å¯ä»¥ç™»é™†</span>

code_name <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥ä½ çš„éªŒè¯ç '</span><span class="token punctuation">)</span>
data_post <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'__VIEWSTATE'</span><span class="token punctuation">:</span> viewstate<span class="token punctuation">,</span>
    <span class="token string">'__VIEWSTATEGENERATOR'</span><span class="token punctuation">:</span> viewstategenerator<span class="token punctuation">,</span>
    <span class="token string">'from'</span><span class="token punctuation">:</span> <span class="token string">'http://so.gushiwen.cn/user/collect.aspx'</span><span class="token punctuation">,</span>
    <span class="token string">'email'</span><span class="token punctuation">:</span> <span class="token string">'3453863492@qq.com'</span><span class="token punctuation">,</span>
    <span class="token string">'pwd'</span><span class="token punctuation">:</span> <span class="token string">'password'</span><span class="token punctuation">,</span>
    <span class="token string">'code'</span><span class="token punctuation">:</span> code_name<span class="token punctuation">,</span>
    <span class="token string">'denglu'</span><span class="token punctuation">:</span> <span class="token string">'ç™»å½•'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

response_post <span class="token operator">=</span> session<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url <span class="token operator">=</span> url<span class="token punctuation">,</span> headers <span class="token operator">=</span> headers<span class="token punctuation">,</span> data <span class="token operator">=</span> data_post<span class="token punctuation">)</span>

content_post <span class="token operator">=</span> response_post<span class="token punctuation">.</span>text
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'gushiwen.html'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span> <span class="token string">' utf-8'</span><span class="token punctuation">)</span><span class="token keyword">as</span> fp<span class="token punctuation">:</span>
    fp<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content_post<span class="token punctuation">)</span>
    
<span class="token comment"># éš¾ç‚¹</span>
<span class="token comment"># ï¼ˆ1ï¼‰ éšè—åŸŸ</span>
<span class="token comment"># ï¼ˆ2ï¼‰ éªŒè¯ç </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="è¶…çº§é¹°å¹³å°"><a href="#è¶…çº§é¹°å¹³å°" class="headerlink" title="è¶…çº§é¹°å¹³å°"></a>è¶…çº§é¹°å¹³å°</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># coding:utf-8</span>

<span class="token keyword">import</span> requests
<span class="token keyword">from</span> hashlib <span class="token keyword">import</span> md5

<span class="token keyword">class</span> <span class="token class-name">Chaojiying_Client</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> soft_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>username <span class="token operator">=</span> username
        password <span class="token operator">=</span>  password<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf8'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>password <span class="token operator">=</span> md5<span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>soft_id <span class="token operator">=</span> soft_id
        self<span class="token punctuation">.</span>base_params <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'user'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>username<span class="token punctuation">,</span>
            <span class="token string">'pass2'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>password<span class="token punctuation">,</span>
            <span class="token string">'softid'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>soft_id<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        self<span class="token punctuation">.</span>headers <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'Connection'</span><span class="token punctuation">:</span> <span class="token string">'Keep-Alive'</span><span class="token punctuation">,</span>
            <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0)'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>

    <span class="token keyword">def</span> <span class="token function">PostPic</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> im<span class="token punctuation">,</span> codetype<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        im: å›¾ç‰‡å­—èŠ‚
        codetype: é¢˜ç›®ç±»å‹ å‚è€ƒ http://www.chaojiying.com/price.html
        """</span>
        params <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'codetype'</span><span class="token punctuation">:</span> codetype<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        params<span class="token punctuation">.</span>update<span class="token punctuation">(</span>self<span class="token punctuation">.</span>base_params<span class="token punctuation">)</span>
        files <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'userfile'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token string">'ccc.jpg'</span><span class="token punctuation">,</span> im<span class="token punctuation">)</span><span class="token punctuation">}</span>
        r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">'http://upload.chaojiying.net/Upload/Processing.php'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>params<span class="token punctuation">,</span> files<span class="token operator">=</span>files<span class="token punctuation">,</span> headers<span class="token operator">=</span>self<span class="token punctuation">.</span>headers<span class="token punctuation">)</span>
        <span class="token keyword">return</span> r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">PostPic_base64</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> base64_str<span class="token punctuation">,</span> codetype<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        im: å›¾ç‰‡å­—èŠ‚
        codetype: é¢˜ç›®ç±»å‹ å‚è€ƒ http://www.chaojiying.com/price.html
        """</span>
        params <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'codetype'</span><span class="token punctuation">:</span> codetype<span class="token punctuation">,</span>
            <span class="token string">'file_base64'</span><span class="token punctuation">:</span>base64_str
        <span class="token punctuation">}</span>
        params<span class="token punctuation">.</span>update<span class="token punctuation">(</span>self<span class="token punctuation">.</span>base_params<span class="token punctuation">)</span>
        r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">'http://upload.chaojiying.net/Upload/Processing.php'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>params<span class="token punctuation">,</span> headers<span class="token operator">=</span>self<span class="token punctuation">.</span>headers<span class="token punctuation">)</span>
        <span class="token keyword">return</span> r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">ReportError</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> im_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        im_id:æŠ¥é”™é¢˜ç›®çš„å›¾ç‰‡ID
        """</span>
        params <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'id'</span><span class="token punctuation">:</span> im_id<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        params<span class="token punctuation">.</span>update<span class="token punctuation">(</span>self<span class="token punctuation">.</span>base_params<span class="token punctuation">)</span>
        r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">'http://upload.chaojiying.net/Upload/ReportError.php'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>params<span class="token punctuation">,</span> headers<span class="token operator">=</span>self<span class="token punctuation">.</span>headers<span class="token punctuation">)</span>
        <span class="token keyword">return</span> r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    chaojiying <span class="token operator">=</span> Chaojiying_Client<span class="token punctuation">(</span><span class="token string">'è¶…çº§é¹°ç”¨æˆ·å'</span><span class="token punctuation">,</span> <span class="token string">'è¶…çº§é¹°ç”¨æˆ·åçš„å¯†ç '</span><span class="token punctuation">,</span> <span class="token string">'96001'</span><span class="token punctuation">)</span>	<span class="token comment">#ç”¨æˆ·ä¸­å¿ƒ&gt;&gt;è½¯ä»¶ID ç”Ÿæˆä¸€ä¸ªæ›¿æ¢ 96001</span>
    im <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'a.jpg'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>													<span class="token comment">#æœ¬åœ°å›¾ç‰‡æ–‡ä»¶è·¯å¾„ æ¥æ›¿æ¢ a.jpg æœ‰æ—¶WINç³»ç»Ÿé¡»è¦//</span>
    <span class="token keyword">print</span> chaojiying<span class="token punctuation">.</span>PostPic<span class="token punctuation">(</span>im<span class="token punctuation">,</span> <span class="token number">1902</span><span class="token punctuation">)</span>												<span class="token comment">#1902 éªŒè¯ç ç±»å‹  å®˜æ–¹ç½‘ç«™&gt;&gt;ä»·æ ¼ä½“ç³» 3.4+ç‰ˆ print åè¦åŠ ()</span>
    <span class="token comment">#print chaojiying.PostPic(base64_str, 1902)  #æ­¤å¤„ä¸ºä¼ å…¥ base64ä»£ç </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä½œä¸šï¼š</p>
<p>å›½å®¶ç»Ÿè®¡å±€ï¼ˆ<a href="http://www.stats.gov.cn/tjsj/tjbz/tjyqhdmhcxhfdm/2017/%EF%BC%89%E5%85%B1%E8%AE%A168%E4%B8%87%E6%9D%A1%E6%95%B0">http://www.stats.gov.cn/tjsj/tjbz/tjyqhdmhcxhfdm/2017/ï¼‰å…±è®¡68ä¸‡æ¡æ•°</a></p>
<h1 id="Scrapy"><a href="#Scrapy" class="headerlink" title="Scrapy"></a>Scrapy</h1><blockquote>
<p> Scrapyæ˜¯ä¸€ä¸ªä¸ºäº†çˆ¬å–ç½‘ç«™æ•°æ®ï¼Œæå–ç»“æ„æ€§æ•°æ®è€Œç¼–å†™çš„åº”ç”¨æ¡†æ¶ã€‚å¯ä»¥åº”ç”¨åœ¨åŒ…æ‹¬æ•°æ®æŒ–æ˜ï¼Œä¿¡æ¯å¤„ç†æˆ–å­˜å‚¨å†å²æ•°æ®ç­‰ä¸€ç³»åˆ—çš„ç¨‹åºä¸­ã€‚</p>
<p> Scrapyæ˜¯é€‚ç”¨äºPythonçš„ä¸€ä¸ªå¿«é€Ÿã€é«˜å±‚æ¬¡çš„å±å¹•æŠ“å–å’ŒwebæŠ“å–æ¡†æ¶ï¼Œç”¨äºæŠ“å–webç«™ç‚¹å¹¶ä»é¡µé¢ä¸­æå–ç»“æ„åŒ–çš„æ•°æ®ã€‚Scrapyç”¨é€”å¹¿æ³›ï¼Œå¯ä»¥ç”¨äºæ•°æ®æŒ–æ˜ã€ç›‘æµ‹å’Œè‡ªåŠ¨åŒ–æµ‹è¯•</p>
</blockquote>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p><code>pip install scrapy</code></p>
<h2 id="åŸºæœ¬ä½¿ç”¨-2"><a href="#åŸºæœ¬ä½¿ç”¨-2" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h2><h3 id="1-åˆ›å»ºscrapyé¡¹ç›®"><a href="#1-åˆ›å»ºscrapyé¡¹ç›®" class="headerlink" title="1.åˆ›å»ºscrapyé¡¹ç›®"></a>1.åˆ›å»ºscrapyé¡¹ç›®</h3><p>ç»ˆç«¯è¾“å…¥  <code>scrapy startproject é¡¹ç›®åç§°</code></p>
<p>é¡¹ç›®åç§°åŒ…å«ä¸­æ–‡ ä¸èƒ½ä½¿ç”¨æ•°å­—å¼€å¤´</p>
<h3 id="2-é¡¹ç›®ç»„æˆ"><a href="#2-é¡¹ç›®ç»„æˆ" class="headerlink" title="2.é¡¹ç›®ç»„æˆ"></a>2.é¡¹ç›®ç»„æˆ</h3><p><img src="http://image.kmoon.fun//images/202212221051066.png" alt="image-20221222105147762"></p>
<p><img src="http://image.kmoon.fun//images/202212221109594.png" alt="image-20221222110936434"></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">é¡¹ç›®åå­—
    é¡¹ç›®åå­—
        spidersæ–‡ä»¶å¤¹ ï¼ˆå­˜å‚¨çš„æ˜¯çˆ¬è™«æ–‡ä»¶ï¼‰
            init
            è‡ªå®šä¹‰çš„çˆ¬è™«æ–‡ä»¶    æ ¸å¿ƒåŠŸèƒ½æ–‡ä»¶
        init
        items        å®šä¹‰æ•°æ®ç»“æ„çš„åœ°æ–¹ çˆ¬å–çš„æ•°æ®éƒ½åŒ…å«å“ªäº›
        middleware   ä¸­é—´ä»¶    ä»£ç†
        pipelines    ç®¡é“   ç”¨æ¥å¤„ç†ä¸‹è½½çš„æ•°æ®
        settings     é…ç½®æ–‡ä»¶    robotsåè®®  uaå®šä¹‰ç­‰<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>1ï¸âƒ£ spiders</p>
<p>spiderså¯ä»¥ç†è§£ä¸ºä»£è¡¨äº†æˆ‘ä»¬äººçš„æ“ä½œï¼Œæˆ‘ä»¬åœ¨æ“ä½œscrapyçš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±æ˜¯ä»¥spidersçš„èº«ä»½åœ¨æ“ä½œï¼Œåˆå§‹çš„urlæ˜¯æˆ‘ä»¬å®šä¹‰çš„ã€‚</p>
<p>2ï¸âƒ£ å¼•æ“</p>
<p>å¼•æ“æ˜¯scrapyæ¡†æ¶çš„ä¸­æ¢ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå¼•æ“ä¸æ‰€æœ‰çš„å…¶ä»–ç»„ä»¶äº¤äº’ï¼Œå¹¶ä¸”äº¤äº’å¤§å¤šå¸¦æœ‰æŒ‡ä»¤æ€§çš„æ“ä½œï¼Œå¯ä»¥ç†è§£æˆä¸€ä¸ªæŒ‡æŒ¥å®˜ã€‚</p>
<p>3ï¸âƒ£ è°ƒåº¦å™¨</p>
<p>è°ƒåº¦å™¨ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯ç”¨æ¥åšè°ƒåº¦çš„ï¼Œç®€å•çš„è¯´å°±æ˜¯å®ƒä¼šæŠŠæ‰€æœ‰è¯·æ±‚çš„urlæ”¾å…¥ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œæ¯ä¸€æ¬¡ä¼šä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªurlï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšè°ƒåº¦ã€‚</p>
<p>4ï¸âƒ£ ä¸‹è½½å™¨</p>
<p>ä¸‹è½½å™¨ï¼Œæ˜¯ç”¨æ¥ä¸‹è½½æ•°æ®çš„ï¼Œå®ƒä¸‹è½½çš„æ˜¯åŸå§‹æ•°æ®ï¼Œå¯ä»¥ç†è§£ä¸ºç½‘é¡µæºç ï¼Œè¿™äº›æºæ•°æ®é€šè¿‡å¼•æ“å†æ¬¡äº¤ç»™æˆ‘ä»¬ç”¨æˆ·spidersåšè¿›ä¸€æ­¥è§£æå¤„ç†ã€‚(ä¸‹è½½å™¨æ²Ÿé€šå› ç‰¹ç½‘ï¼Œæ•°æ®æ¥æºä¹Ÿæ˜¯å› ç‰¹ç½‘)</p>
<p>5ï¸âƒ£ ç®¡é“</p>
<p>ç®¡é“çš„å·¥ä½œæ˜¯ä¸‹è½½å›¾ç‰‡ã€æ–‡ä»¶ï¼Œå®ƒçš„å·¥ä½œä¸è°ƒåº¦å™¨ä¸‹è½½æºæ•°æ®ä¸åŒï¼Œå®ƒä¸‹è½½çš„æ˜¯ç»è¿‡è§£æåçš„å…·ä½“çš„å›¾ç‰‡ã€æ–‡ä»¶ç­‰æ•°æ®ã€‚</p>
<p>1ï¸âƒ£ Spidersæ–‡ä»¶å¤¹</p>
<p>è¿™æ–‡ä»¶å¤¹æˆ‘ä»¬ä¸é™Œç”Ÿï¼Œå› ä¸ºæ¯ä¸€æ¬¡æ–°å»ºscrapyçˆ¬è™«é¡¹ç›®åï¼Œæˆ‘ä»¬éƒ½éœ€è¦ç»ˆç«¯è¿›å…¥Spidersæ–‡ä»¶å¤¹ï¼Œç”Ÿäº§çˆ¬è™«æ–‡ä»¶ã€‚åœ¨Spidersæ–‡ä»¶å¤¹ä¸‹ï¼Œåˆæœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯_init_.pyæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯tc.pyã€‚<em>init</em>.pyæ–‡ä»¶æ˜¯æˆ‘ä»¬åˆ›å»ºé¡¹ç›®æ—¶é»˜è®¤ç”Ÿæˆçš„ä¸€ä¸ªpyæ–‡ä»¶ï¼Œæˆ‘ä»¬ç”¨ä¸åˆ°è¿™ä¸ªpyæ–‡ä»¶ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¿½ç•¥å®ƒï¼Œå¦ä¸€ä¸ªtc.pyæ–‡ä»¶æ˜¯æˆ‘ä»¬çˆ¬è™«çš„æ ¸å¿ƒæ–‡ä»¶ï¼Œåç»­çš„å¤§éƒ¨åˆ†ä»£ç éƒ½ä¼šå†™å…¥è¿™ä¸ªæ–‡ä»¶ï¼Œå› æ­¤å®ƒæ˜¯è‡³å…³é‡è¦çš„pyæ–‡ä»¶ã€‚</p>
<p>2ï¸âƒ£<em>init</em>.pyæ–‡ä»¶</p>
<p>å®ƒå’Œä¸Šé¢æåˆ°çš„Spidersæ–‡ä»¶å¤¹ä¸‹çš„_init_.pyä¸€æ ·ï¼Œéƒ½æ˜¯ä¸è¢«ä½¿ç”¨çš„pyæ–‡ä»¶ï¼Œæ— éœ€ç†ä¼šã€‚</p>
<p>3ï¸âƒ£ items.pyæ–‡ä»¶</p>
<p>è¿™æ–‡ä»¶å®šä¹‰äº†æ•°æ®ç»“æ„ï¼Œè¿™é‡Œçš„æ•°æ®ç»“æ„ä¸ç®—æ³•ä¸­çš„æ•°æ®ç»“æ„ä¸åŒï¼Œå®ƒæŒ‡çš„æ˜¯çˆ¬è™«ç›®æ ‡æ•°æ®çš„æ•°æ®ç»„æˆç»“æ„ï¼Œä¾‹å¦‚æˆ‘ä»¬éœ€è¦è·å–ç›®æ ‡ç½‘é¡µçš„å›¾ç‰‡å’Œå›¾ç‰‡çš„åç§°ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬çš„æ•°æ®ç»„æˆç»“æ„å°±å®šä¹‰ä¸º å›¾ç‰‡ã€å›¾ç‰‡åç§°ã€‚åç»­ä¼šä¸“é—¨å®‰æ’å¯¹scrapyæ¡†æ¶å®šä¹‰æ•°æ®ç»“æ„çš„å­¦ä¹ ã€‚</p>
<p>4ï¸âƒ£ middleware.pyæ–‡ä»¶</p>
<p>è¿™pyæ–‡ä»¶åŒ…å«äº†scrapyé¡¹ç›®çš„ä¸€äº›ä¸­é—´æ„ä»¶ï¼Œä¾‹å¦‚ä»£ç†ã€è¯·æ±‚æ–¹å¼ã€æ‰§è¡Œç­‰ç­‰ï¼Œå®ƒå¯¹äºé¡¹ç›®æ¥è¯´æ˜¯é‡è¦çš„ï¼Œä½†å¯¹äºæˆ‘ä»¬çˆ¬è™«åŸºç¡€å­¦ä¹ æ¥è¯´ï¼Œå¯ä»¥æš‚æ—¶ä¸è€ƒè™‘æ›´æ”¹å®ƒçš„å†…å®¹ã€‚</p>
<p>5ï¸âƒ£ pipelines.pyæ–‡ä»¶</p>
<p>è¿™æ˜¯æˆ‘ä»¬ä¹‹å‰åœ¨å·¥ä½œåŸç†ä¸­æåˆ°çš„scrapyæ¡†æ¶ä¸­çš„ç®¡é“æ–‡ä»¶ï¼Œç®¡é“çš„ä½œç”¨æ˜¯æ‰§è¡Œä¸€äº›æ–‡ä»¶çš„ä¸‹è½½ï¼Œä¾‹å¦‚å›¾ç‰‡ç­‰ï¼Œåç»­ä¼šå®‰æ’å¯¹scrapyæ¡†æ¶ç®¡é“çš„å­¦ä¹ ï¼Œé‚£æ—¶ä¼šä¸“é—¨ç ”ç©¶è¿™ä¸ªpyæ–‡ä»¶ã€‚</p>
<p>6ï¸âƒ£ settings.pyæ–‡ä»¶</p>
<p>è¿™æ–‡ä»¶æ˜¯æ•´ä¸ªscrapyé¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢æ˜¯å¾ˆå¤šå‚æ•°çš„è®¾ç½®ï¼Œæˆ‘ä»¬ä¼šå¶å°”è®¾è®¡åˆ°ä¿®æ”¹è¯¥æ–‡ä»¶ä¸­çš„éƒ¨åˆ†å‚æ•°ï¼Œä¾‹å¦‚ä¸‹ä¸€éƒ¨åˆ†æåˆ°çš„ROBOTSåè®®é™åˆ¶ï¼Œå°±éœ€è¦è¿›å…¥è¯¥æ–‡ä»¶è§£é™¤è¯¥é™åˆ¶ï¼Œå¦åˆ™å°†æ— æ³•å®ç°çˆ¬å–ã€‚</p>
<h3 id="3-åˆ›å»ºçˆ¬è™«æ–‡ä»¶"><a href="#3-åˆ›å»ºçˆ¬è™«æ–‡ä»¶" class="headerlink" title="3.åˆ›å»ºçˆ¬è™«æ–‡ä»¶"></a>3.åˆ›å»ºçˆ¬è™«æ–‡ä»¶</h3><p>è¦åœ¨spidersæ–‡ä»¶å¤¹ä¸­å–åˆ›å»ºçˆ¬è™«æ–‡ä»¶</p>
<p>æ‰§è¡Œ </p>
<p><code>scrapy genspider çˆ¬è™«æ–‡ä»¶å è¦çˆ¬å–çš„ç½‘é¡µ</code>scrapy genspider baidu <a href="http://www.baidu.com/">www.baidu.com</a></p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦æ·»åŠ httpåè®®</p>
<p><img src="http://image.kmoon.fun//images/202212221108805.png" alt="image-20221222110832624"></p>
<p><strong>responseçš„å±æ€§å’Œæ–¹æ³•</strong></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">response<span class="token punctuation">.</span>text   è·å–çš„æ˜¯å“åº”çš„å­—ç¬¦ä¸²
response<span class="token punctuation">.</span>body   è·å–çš„æ˜¯äºŒè¿›åˆ¶æ•°æ®

response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>  å¯ä»¥ç›´æ¥æ˜¯xpathæ–¹æ³•æ¥è§£æresponseä¸­çš„å†…å®¹
response<span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span>   æå–seletorå¯¹è±¡çš„dataå±æ€§å€¼
response<span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span> æå–seletoråˆ—è¡¨çš„ç¬¬ä¸€ä¸ªæ•°æ®<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="4-è¿è¡Œçˆ¬è™«æ–‡ä»¶"><a href="#4-è¿è¡Œçˆ¬è™«æ–‡ä»¶" class="headerlink" title="4.è¿è¡Œçˆ¬è™«æ–‡ä»¶"></a>4.è¿è¡Œçˆ¬è™«æ–‡ä»¶</h3><p><code>scrapy crawl çˆ¬è™«æ–‡ä»¶å</code></p>
<p>ä¿®æ”¹settings.pyæ˜¯å¦éµå®ˆrobots.txtåè®® é»˜è®¤ä¸ºTrue</p>
<blockquote>
<p>robotsåè®®ä¹Ÿå«robots.txtï¼Œæ˜¯ä¸€ç§å­˜æ”¾äºç½‘ç«™æ ¹ç›®å½•ä¸‹çš„ASCIIç¼–ç çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå®ƒé€šå¸¸å‘Šè¯‰ç½‘ç»œæœç´¢å¼•æ“çš„æ¼«æ¸¸å™¨ï¼ˆåˆç§°ç½‘ç»œèœ˜è››ï¼‰ï¼Œæ­¤ç½‘ç«™ä¸­çš„å“ªäº›å†…å®¹æ˜¯ä¸åº”è¢«æœç´¢å¼•æ“çš„æ¼«æ¸¸å™¨è·å–çš„ï¼Œå“ªäº›æ˜¯å¯ä»¥è¢«æ¼«æ¸¸å™¨è·å–çš„ã€‚</p>
</blockquote>
<p><img src="http://image.kmoon.fun//images/202212221109461.png" alt="image-20221222110900283"></p>
<h3 id="5-æ¶æ„ç»„æˆ"><a href="#5-æ¶æ„ç»„æˆ" class="headerlink" title="5.æ¶æ„ç»„æˆ"></a>5.æ¶æ„ç»„æˆ</h3><p>âœ³ï¸ allowed_domainsï¼šè¿™æ˜¯scrapyæ¡†æ¶ä¸­è§„å®šçˆ¬å–çš„urlçš„èŒƒå›´ï¼Œç®€å•åœ°è¯´å°±æ˜¯ï¼Œæˆ‘ä»¬åªèƒ½åœ¨è¿™ä¸ªå‚æ•°å®šä¹‰çš„urlçš„èŒƒå›´ä¸‹è·å–æ•°æ®ï¼Œä¸€æ—¦æ•°æ®è¶…å‡ºèŒƒå›´ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„è¯·æ±‚å°†ä¼šå¤±æ•ˆã€‚</p>
<p>âœ´ï¸ start_urlsï¼šè¿™æ˜¯scrapyæ¡†æ¶èµ·å§‹è®¿é—®çš„urlï¼Œä¹Ÿå³åœ¨æœ€åˆå‘è¿™ä¸ªurlçš„ä½ç½®å‘èµ·è¯·æ±‚ã€‚</p>
<ul>
<li>æ¡ˆä¾‹ç»ƒä¹ ï¼šæ±½è½¦ä¹‹å®¶</li>
</ul>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> scrapy

<span class="token keyword">class</span> <span class="token class-name">CarSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'car'</span>
    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'https://car.autohome.com.cn/price/brand-15.html'</span><span class="token punctuation">]</span>
    <span class="token comment"># æ³¨æ„å¦‚æœä½ çš„è¯·æ±‚çš„æ¥å£æ˜¯htmlä¸ºç»“å°¾çš„  é‚£ä¹ˆæ˜¯ä¸éœ€è¦åŠ /çš„</span>
    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'https://car.autohome.com.cn/price/brand-15.html'</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        name_list <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//div[@class="main-title"]/a/text()'</span><span class="token punctuation">)</span>
        price_list <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//div[@class="main-lever"]//span/span/text()'</span><span class="token punctuation">)</span>

        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>name_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            name <span class="token operator">=</span> name_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span>
            price <span class="token operator">=</span> price_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>price<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>scrapyæ¶æ„ç»„æˆ</p>
<p><img src="http://image.kmoon.fun//images/202212221237610.png" alt="image-20221222123729385"></p>
<h3 id="6-å·¥ä½œåŸç†"><a href="#6-å·¥ä½œåŸç†" class="headerlink" title="6.å·¥ä½œåŸç†"></a>6.å·¥ä½œåŸç†</h3><p><img src="http://image.kmoon.fun//images/202212221238475.png" alt="image-20221222123855315"></p>
<p><img src="http://image.kmoon.fun//images/202212221242922.png" alt="image-20221222124252739"></p>
<p><img src="http://image.kmoon.fun//images/202212221619820.jpeg" alt="img"></p>
<h2 id="scrapyshell"><a href="#scrapyshell" class="headerlink" title="scrapyshell"></a>scrapyshell</h2><h3 id="1-ä»€ä¹ˆæ˜¯scrapy-shell"><a href="#1-ä»€ä¹ˆæ˜¯scrapy-shell" class="headerlink" title="1.ä»€ä¹ˆæ˜¯scrapy shell"></a>1.ä»€ä¹ˆæ˜¯scrapy shell</h3><p>scrapyç»ˆç«¯æ˜¯ä¸€ä¸ªäº¤äº’ç»ˆç«¯ï¼Œä¾›æ‚¨åœ¨æœªå¯åŠ¨spiderçš„æƒ…å†µä¸‹å°è¯•åŠè°ƒè¯•æ‚¨çš„çˆ¬å–ä»£ç ã€‚å…¶æœ¬æ„æ˜¯ç”¨æ¥æµ‹è¯•æå–æ•°æ®çš„ä»£ç ï¼Œä¸è¿‡æ‚¨å¯ä»¥å°†å…¶ä½œä¸ºæ­£å¸¸çš„pythonç»ˆç«¯ï¼Œåœ¨ä¸Šé¢æµ‹è¯•ä»»ä½•çš„pythonä»£ç ã€‚</p>
<p>è¯¥ç»ˆç«¯æ˜¯ç”¨æ¥æµ‹è¯•xpathæˆ–cssè¡¨è¾¾å¼ï¼ŒæŸ¥çœ‹ä»–ä»¬çš„å·¥ä½œæ–¹å¼åŠä»çˆ¬å–çš„ç½‘é¡µä¸­æå–çš„æ•°æ®ã€‚åœ¨ç¼–å†™æ‚¨çš„spideræ—¶ï¼Œè¯¥ç»ˆç«¯æä¾›äº†äº¤äº’æ€§èƒ½æµ‹è¯•æ‚¨çš„è¡¨è¾¾å¼ä»£ç çš„åŠŸèƒ½ï¼Œå…å»äº†æ¯æ¬¡ä¿®æ”¹åè¿è¡Œspiderçš„éº»çƒ¦ã€‚</p>
<p>ä¸€æ—¦ç†Ÿæ‚‰äº†scrapyç»ˆç«¯åï¼Œæ‚¨ä¼šå‘ç°å…¶åœ¨å¼€å‘å’Œè°ƒè¯•spideræ—¶å‘æŒ¥äº†å·¨å¤§çš„ä½œç”¨</p>
<h3 id="2-å®‰è£…ipython"><a href="#2-å®‰è£…ipython" class="headerlink" title="2.å®‰è£…ipython"></a>2.å®‰è£…ipython</h3><p>pip install ipython</p>
<p>ipythonç»ˆç«¯ä¸å…¶ä»–ç›¸æ¯”æ›´ä¸ºå¼ºå¤§ï¼Œæä¾›æ™ºèƒ½çš„è‡ªåŠ¨è¡¥å…¨ï¼Œé«˜äº®è¾“å‡ºåŠå…¶ä»–ç‰¹æ€§ã€‚</p>
<p><img src="http://image.kmoon.fun//images/202212221253624.png" alt="image-20221222125315435"></p>
<h3 id="3-åº”ç”¨"><a href="#3-åº”ç”¨" class="headerlink" title="3.åº”ç”¨"></a>3.åº”ç”¨</h3><p>è¿›å…¥åˆ°scrapy shellçš„ç»ˆç«¯ ï¼š</p>
<p>ç›´æ¥åœ¨windowçš„ç»ˆç«¯ä¸­è¾“å…¥scrapy shell åŸŸå</p>
<p>å¦‚æœæƒ³çœ‹åˆ°ä¸€äº›é«˜äº® æˆ–è€… è‡ªåŠ¨è¡¥å…¨  é‚£ä¹ˆå¯ä»¥å®‰è£…ipython</p>
<p><code>scrapy shell www.baidu.com</code></p>
<p><img src="http://image.kmoon.fun//images/202212221257544.png" alt="image-20221222125758361"></p>
<h2 id="yield"><a href="#yield" class="headerlink" title="yield"></a>yield</h2><p>1.å¸¦æœ‰yieldçš„å‡½æ•°ä¸å†æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°generatorï¼Œå¯ç”¨äºè¿­ä»£</p>
<p>2.yieldæ˜¯ä¸€ä¸ªç±»ä¼¼returnçš„å…³é”®å­—ï¼Œè¿­ä»£ä¸€æ¬¡é‡åˆ°yieldæ—¶å°±è¿”å›yieldåé¢ï¼ˆå³è¾¹ï¼‰çš„å€¼ã€‚é‡ç‚¹æ˜¯ï¼šä¸‹ä¸€æ¬¡è¿­ä»£æ—¶ï¼Œä»ä¸Šä¸€æ¬¡è¿­ä»£é‡åˆ°çš„yieldåé¢çš„ä»£ç ï¼ˆä¸‹ä¸€è¡Œï¼‰å¼€å§‹æ‰§è¡Œã€‚</p>
<p>3.ç®€è¦ç†è§£ï¼šyieldå°±æ˜¯returnè¿”å›ä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”è®°ä½è¿™ä¸ªè¿”å›çš„ä½ç½®ï¼Œä¸‹æ¬¡è¿­ä»£å°±ä»è¿™ä¸ªä½ç½®åï¼ˆä¸‹ä¸€è¡Œï¼‰å¼€å§‹</p>
<ul>
<li><strong>æ¡ˆä¾‹ç»ƒä¹ ï¼šå½“å½“ç½‘</strong></li>
</ul>
<p><strong>yield</strong></p>
<p><strong>ç®¡é“å°è£…</strong></p>
<p><strong>å¤šæ¡ç®¡é“ä¸‹è½½</strong></p>
<p><strong>å¤šé¡µæ•°æ®ä¸‹è½½</strong></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># items.py</span>

<span class="token keyword">import</span> scrapy

<span class="token keyword">class</span> <span class="token class-name">ScrapyDangdang095Item</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Item<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># define the fields for your item here like:</span>
    <span class="token comment"># name = scrapy.Field()</span>
    <span class="token comment"># é€šä¿—çš„è¯´å°±æ˜¯ä½ è¦ä¸‹è½½çš„æ•°æ®éƒ½æœ‰ä»€ä¹ˆ</span>

    <span class="token comment"># å›¾ç‰‡</span>
    src <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># åå­—</span>
    name <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># ä»·æ ¼</span>
    price <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> scrapy
<span class="token keyword">from</span> scrapy_dangdang_095<span class="token punctuation">.</span>items <span class="token keyword">import</span> ScrapyDangdang095Item

<span class="token keyword">class</span> <span class="token class-name">DangSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'dang'</span>
    <span class="token comment"># å¦‚æœæ˜¯å¤šé¡µä¸‹è½½çš„è¯ é‚£ä¹ˆå¿…é¡»è¦è°ƒæ•´çš„æ˜¯allowed_domainsçš„èŒƒå›´ ä¸€èˆ¬æƒ…å†µä¸‹åªå†™åŸŸå</span>
    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'category.dangdang.com'</span><span class="token punctuation">]</span>
    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'http://category.dangdang.com/cp01.01.02.00.00.00.html'</span><span class="token punctuation">]</span>


    base_url <span class="token operator">=</span> <span class="token string">'http://category.dangdang.com/pg'</span>
    page <span class="token operator">=</span> <span class="token number">1</span>

    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token comment"># pipelines ä¸‹è½½æ•°æ®</span>
<span class="token comment"># items     å®šä¹‰æ•°æ®ç»“æ„çš„</span>
<span class="token comment">#   src = //ul[@id="component_59"]/li//img/@src</span>
<span class="token comment">#   alt = //ul[@id="component_59"]/li//img/@alt</span>
<span class="token comment">#   price = //ul[@id="component_59"]/li//p[@class="price"]/span[1]/text()</span>
<span class="token comment"># æ‰€æœ‰çš„seletorçš„å¯¹è±¡ éƒ½å¯ä»¥å†æ¬¡è°ƒç”¨xpathæ–¹æ³•</span>
        li_list <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//ul[@id="component_59"]/li'</span><span class="token punctuation">)</span>

        <span class="token keyword">for</span> li <span class="token keyword">in</span> li_list<span class="token punctuation">:</span>
            src <span class="token operator">=</span> li<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'.//img/@data-original'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment"># ç¬¬ä¸€å¼ å›¾ç‰‡å’Œå…¶ä»–çš„å›¾ç‰‡çš„æ ‡ç­¾çš„å±æ€§æ˜¯ä¸ä¸€æ ·çš„</span>
            <span class="token comment"># ç¬¬ä¸€å¼ å›¾ç‰‡çš„srcæ˜¯å¯ä»¥ä½¿ç”¨çš„  å…¶ä»–çš„å›¾ç‰‡çš„åœ°å€æ˜¯data-original</span>
            <span class="token keyword">if</span> src<span class="token punctuation">:</span>
                src <span class="token operator">=</span> src
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                src <span class="token operator">=</span> li<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'.//img/@src'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>

            name <span class="token operator">=</span> li<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'.//img/@alt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
            price <span class="token operator">=</span> li<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'.//p[@class="price"]/span[1]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>

            book <span class="token operator">=</span> ScrapyDangdang095Item<span class="token punctuation">(</span>src<span class="token operator">=</span>src<span class="token punctuation">,</span>name<span class="token operator">=</span>name<span class="token punctuation">,</span>price<span class="token operator">=</span>price<span class="token punctuation">)</span>

            <span class="token comment"># è·å–ä¸€ä¸ªbookå°±å°†bookäº¤ç»™pipelines</span>
            <span class="token keyword">yield</span> book<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># settings.py</span>

<span class="token comment"># Configure item pipelines</span>
<span class="token comment"># See https://docs.scrapy.org/en/latest/topics/item-pipeline.html</span>
ITEM_PIPELINES <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token comment">#  ç®¡é“å¯ä»¥æœ‰å¾ˆå¤šä¸ª  é‚£ä¹ˆç®¡é“æ˜¯æœ‰ä¼˜å…ˆçº§çš„  ä¼˜å…ˆçº§çš„èŒƒå›´æ˜¯1åˆ°1000   å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</span>
   <span class="token string">'scrapy_dangdang_095.pipelines.ScrapyDangdang095Pipeline'</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>

<span class="token comment">#    DangDangDownloadPipeline</span>
   <span class="token string">'scrapy_dangdang_095.pipelines.DangDangDownloadPipeline'</span><span class="token punctuation">:</span><span class="token number">301</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># pipelines.py</span>

<span class="token comment"># å¦‚æœæƒ³ä½¿ç”¨ç®¡é“çš„è¯ é‚£ä¹ˆå°±å¿…é¡»åœ¨settingsä¸­å¼€å¯ç®¡é“</span>
<span class="token keyword">class</span> <span class="token class-name">ScrapyDangdang095Pipeline</span><span class="token punctuation">:</span>
    
    <span class="token comment"># åœ¨çˆ¬è™«æ–‡ä»¶å¼€å§‹çš„ä¹‹å‰å°±æ‰§è¡Œçš„ä¸€ä¸ªæ–¹æ³•</span>
    <span class="token keyword">def</span> <span class="token function">open_spider</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>fp <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'book.json'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

    <span class="token comment"># itemå°±æ˜¯yieldåé¢çš„bookå¯¹è±¡</span>
    <span class="token keyword">def</span> <span class="token function">process_item</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    
    <span class="token comment"># ä»¥ä¸‹è¿™ç§æ¨¡å¼ä¸æ¨è  å› ä¸ºæ¯ä¼ é€’è¿‡æ¥ä¸€ä¸ªå¯¹è±¡ é‚£ä¹ˆå°±æ‰“å¼€ä¸€æ¬¡æ–‡ä»¶  å¯¹æ–‡ä»¶çš„æ“ä½œè¿‡äºé¢‘ç¹</span>
        <span class="token comment"># # (1) writeæ–¹æ³•å¿…é¡»è¦å†™ä¸€ä¸ªå­—ç¬¦ä¸² è€Œä¸èƒ½æ˜¯å…¶ä»–çš„å¯¹è±¡</span>
        <span class="token comment"># # (2) wæ¨¡å¼ ä¼šæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ‰“å¼€ä¸€æ¬¡æ–‡ä»¶ è¦†ç›–ä¹‹å‰çš„å†…å®¹</span>
        <span class="token comment"># with open('book.json','a',encoding='utf-8')as fp:</span>
        <span class="token comment">#     fp.write(str(item))</span>

        self<span class="token punctuation">.</span>fp<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> item

    <span class="token comment"># åœ¨çˆ¬è™«æ–‡ä»¶æ‰§è¡Œå®Œä¹‹å  æ‰§è¡Œçš„æ–¹æ³•</span>
    <span class="token keyword">def</span> <span class="token function">close_spider</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>fp<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¤šæ¡ç®¡é“åŒæ—¶ä¸‹è½½</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># pipelines.py</span>

<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request

<span class="token comment"># å¤šæ¡ç®¡é“å¼€å¯</span>
<span class="token comment">#    (1) å®šä¹‰ç®¡é“ç±»</span>
<span class="token comment">#   ï¼ˆ2ï¼‰ åœ¨settingsä¸­å¼€å¯ç®¡é“</span>
<span class="token comment"># 'scrapy_dangdang_095.pipelines.DangDangDownloadPipeline':301</span>
<span class="token keyword">class</span> <span class="token class-name">DangDangDownloadPipeline</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">process_item</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        url <span class="token operator">=</span> <span class="token string">'http:'</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span>
        filename <span class="token operator">=</span> <span class="token string">'./books/'</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.jpg'</span>

        urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlretrieve<span class="token punctuation">(</span>url <span class="token operator">=</span> url<span class="token punctuation">,</span> filename<span class="token operator">=</span> filename<span class="token punctuation">)</span>
        <span class="token keyword">return</span> item<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¤šé¡µæ•°æ®ä¸‹è½½</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">DangSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'dang'</span>
    <span class="token comment"># å¦‚æœæ˜¯å¤šé¡µä¸‹è½½çš„è¯ é‚£ä¹ˆå¿…é¡»è¦è°ƒæ•´çš„æ˜¯allowed_domainsçš„èŒƒå›´ ä¸€èˆ¬æƒ…å†µä¸‹åªå†™åŸŸå</span>
    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'category.dangdang.com'</span><span class="token punctuation">]</span>
    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'http://category.dangdang.com/cp01.01.02.00.00.00.html'</span><span class="token punctuation">]</span>

    base_url <span class="token operator">=</span> <span class="token string">'http://category.dangdang.com/pg'</span>
    page <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment"># æ¯ä¸€é¡µçš„çˆ¬å–çš„ä¸šåŠ¡é€»è¾‘å…¨éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å°†æ‰§è¡Œçš„é‚£ä¸ªé¡µçš„è¯·æ±‚å†æ¬¡è°ƒç”¨parseæ–¹æ³•å°±å¯ä»¥äº†</span>
    <span class="token keyword">if</span> self<span class="token punctuation">.</span>page <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>page <span class="token operator">=</span> self<span class="token punctuation">.</span>page <span class="token operator">+</span> <span class="token number">1</span>
        url <span class="token operator">=</span> self<span class="token punctuation">.</span>base_url <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>page<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'-cp01.01.02.00.00.00.html'</span>

<span class="token comment">#  æ€ä¹ˆå»è°ƒç”¨parseæ–¹æ³•</span>
<span class="token comment">#  scrapy.Requestå°±æ˜¯scrpayçš„getè¯·æ±‚</span>
<span class="token comment">#  urlå°±æ˜¯è¯·æ±‚åœ°å€</span>
<span class="token comment">#  callbackæ˜¯ä½ è¦æ‰§è¡Œçš„é‚£ä¸ªå‡½æ•°  æ³¨æ„ä¸éœ€è¦åŠ ï¼ˆï¼‰</span>
		<span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><strong>æ¡ˆä¾‹ç»ƒä¹ ï¼šç”µå½±å¤©å ‚</strong></li>
</ul>
<p><strong>å¤šçº§é¡µé¢æƒ…å†µ</strong></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> scrapy

<span class="token keyword">from</span> scrapy_movie_099<span class="token punctuation">.</span>items <span class="token keyword">import</span> ScrapyMovie099Item

<span class="token keyword">class</span> <span class="token class-name">MvSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'mv'</span>
    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'www.dytt8.net'</span><span class="token punctuation">]</span>
    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'https://www.dytt8.net/html/gndy/china/index.html'</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token comment"># è¦ç¬¬ä¸€ä¸ªçš„åå­— å’Œ ç¬¬äºŒé¡µçš„å›¾ç‰‡</span>
        a_list <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//div[@class="co_content8"]//td[2]//a[2]'</span><span class="token punctuation">)</span>

        <span class="token keyword">for</span> a <span class="token keyword">in</span> a_list<span class="token punctuation">:</span>
            <span class="token comment"># è·å–ç¬¬ä¸€é¡µçš„name å’Œ è¦ç‚¹å‡»çš„é“¾æ¥</span>
            name <span class="token operator">=</span> a<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
            href <span class="token operator">=</span> a<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./@href'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment"># ç¬¬äºŒé¡µçš„åœ°å€æ˜¯</span>
            url <span class="token operator">=</span> <span class="token string">'https://www.dytt8.net'</span> <span class="token operator">+</span> href

            <span class="token comment"># å¯¹ç¬¬äºŒé¡µçš„é“¾æ¥å‘èµ·è®¿é—®</span>
            <span class="token keyword">yield</span>  scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse_second<span class="token punctuation">,</span>meta<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span>name<span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">parse_second</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># æ³¨æ„ å¦‚æœæ‹¿ä¸åˆ°æ•°æ®çš„æƒ…å†µä¸‹  ä¸€å®šæ£€æŸ¥xpathè¯­æ³•æ˜¯å¦æ­£ç¡®</span>
        src <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//div[@id="Zoom"]//img/@src'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># æ¥å—åˆ°è¯·æ±‚çš„é‚£ä¸ªmetaå‚æ•°çš„å€¼</span>
        name <span class="token operator">=</span> response<span class="token punctuation">.</span>meta<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span>

        movie <span class="token operator">=</span> ScrapyMovie099Item<span class="token punctuation">(</span>src<span class="token operator">=</span>src<span class="token punctuation">,</span>name<span class="token operator">=</span>name<span class="token punctuation">)</span>

        <span class="token keyword">yield</span> movie<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<p><strong>æ€»ç»“</strong>ï¼š</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰æ•°æ®ç»“æ„</p>
<p>å…¶æ¬¡ï¼Œæˆ‘ä»¬éœ€è¦å°è£…ç®¡é“</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨settingsé…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ç®¡é“é…ç½®</p>
<p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦åœ¨çˆ¬è™«æ–‡ä»¶ä¸­å®Œæˆï¼šå“åº”è§£æã€æ•°æ®ç»“æ„å¯¹è±¡å®šä¹‰ã€è°ƒç”¨ç®¡é“</p>
<h2 id="Mysql"><a href="#Mysql" class="headerlink" title="Mysql"></a>Mysql</h2><h3 id="mysqlä¸‹è½½-amp-å®‰è£…"><a href="#mysqlä¸‹è½½-amp-å®‰è£…" class="headerlink" title="mysqlä¸‹è½½&amp;å®‰è£…"></a>mysqlä¸‹è½½&amp;å®‰è£…</h3><p><img src="http://image.kmoon.fun//images/202212221438125.png" alt="image-20221222143837775"></p>
<h2 id="pymysqlçš„ä½¿ç”¨æ­¥éª¤"><a href="#pymysqlçš„ä½¿ç”¨æ­¥éª¤" class="headerlink" title="pymysqlçš„ä½¿ç”¨æ­¥éª¤"></a>pymysqlçš„ä½¿ç”¨æ­¥éª¤</h2><p><img src="http://image.kmoon.fun//images/202212221523194.png" alt="image-20221222152352938"></p>
<h2 id="CrawlSpider"><a href="#CrawlSpider" class="headerlink" title="CrawlSpider"></a>CrawlSpider</h2><h3 id="1-ç»§æ‰¿è‡ªscrapy-Spider"><a href="#1-ç»§æ‰¿è‡ªscrapy-Spider" class="headerlink" title="1.ç»§æ‰¿è‡ªscrapy.Spider"></a>1.ç»§æ‰¿è‡ªscrapy.Spider</h3><h3 id="2-ç‹¬é—¨ç§˜ç±"><a href="#2-ç‹¬é—¨ç§˜ç±" class="headerlink" title="2.ç‹¬é—¨ç§˜ç±"></a>2.ç‹¬é—¨ç§˜ç±</h3><p>CrawlSpiderå¯ä»¥å®šä¹‰è§„åˆ™ï¼Œåœ¨è§£æhtmlå†…å®¹çš„æ—¶å€™ï¼Œå¯ä»¥æ ¹æ®é“¾æ¥è§„åˆ™æå–å‡ºæŒ‡å®šçš„é“¾æ¥ï¼Œç„¶åå†å‘è¿™äº›é“¾æ¥å‘é€è¯·æ±‚</p>
<p>æ‰€ä»¥ï¼Œå¦‚æœæœ‰éœ€è¦è·Ÿè¿›é“¾æ¥çš„éœ€æ±‚ï¼Œæ„æ€å°±æ˜¯çˆ¬å–äº†ç½‘é¡µä¸‹ä¹‹åï¼Œéœ€è¦æå–é“¾æ¥å†æ¬¡çˆ¬å–ï¼Œä½¿ç”¨CrawlSpideræ˜¯éå¸¸åˆé€‚çš„ã€‚</p>
<h3 id="3-é“¾æ¥æå–å™¨"><a href="#3-é“¾æ¥æå–å™¨" class="headerlink" title="3.é“¾æ¥æå–å™¨"></a>3.é“¾æ¥æå–å™¨</h3><p>é“¾æ¥æå–å™¨ï¼Œåœ¨è¿™é‡Œå°±å¯ä»¥å†™è§„åˆ™æå–æŒ‡å®šé“¾æ¥</p>
<p><img src="http://image.kmoon.fun//images/202212221448439.png" alt="image-20221222144830185"></p>
<p><img src="http://image.kmoon.fun//images/202212221453641.png" alt="image-20221222145300401"></p>
<ul>
<li>æ¡ˆä¾‹ç»ƒä¹ ï¼šè¯»ä¹¦ç½‘æ•°æ®å…¥åº“</li>
</ul>
<p><img src="http://image.kmoon.fun//images/202212221454828.png" alt="image-20221222145422583"></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token number">1.</span> åˆ›å»ºé¡¹ç›® scrapy startproject é¡¹ç›®çš„åå­—
<span class="token number">2.</span> è·³è½¬åˆ°spidersæ–‡ä»¶å¤¹çš„ç›®å½•ä¸‹
   cd é¡¹ç›®åå­—\é¡¹ç›®åå­—\spiders
<span class="token number">3.</span> åˆ›å»ºçˆ¬è™«æ–‡ä»¶
   scrapy genspider <span class="token operator">-</span>t crawl çˆ¬è™«æ–‡ä»¶çš„åå­—  çˆ¬å–çš„åŸŸå
        
<span class="token keyword">import</span> scrapy
<span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>linkextractors <span class="token keyword">import</span> LinkExtractor
<span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>spiders <span class="token keyword">import</span> CrawlSpider<span class="token punctuation">,</span> Rule

<span class="token keyword">from</span> scrapy_readbook_101<span class="token punctuation">.</span>items <span class="token keyword">import</span> ScrapyReadbook101Item


<span class="token keyword">class</span> <span class="token class-name">ReadSpider</span><span class="token punctuation">(</span>CrawlSpider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'read'</span>
    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'www.dushu.com'</span><span class="token punctuation">]</span>
    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'https://www.dushu.com/book/1188_1.html'</span><span class="token punctuation">]</span>

    <span class="token comment"># follow è·Ÿè¿›</span>
    rules <span class="token operator">=</span> <span class="token punctuation">(</span>
        Rule<span class="token punctuation">(</span>LinkExtractor<span class="token punctuation">(</span>allow<span class="token operator">=</span><span class="token string">r'/book/1188_\d+\.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                           callback<span class="token operator">=</span><span class="token string">'parse_item'</span><span class="token punctuation">,</span>
                           follow<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">parse_item</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>

        img_list <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//div[@class="bookslist"]//img'</span><span class="token punctuation">)</span>

        <span class="token keyword">for</span> img <span class="token keyword">in</span> img_list<span class="token punctuation">:</span>
            src <span class="token operator">=</span> img<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./@data-original'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
            name <span class="token operator">=</span> img<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./@alt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>

            book <span class="token operator">=</span> ScrapyReadbook101Item<span class="token punctuation">(</span>name<span class="token operator">=</span>name<span class="token punctuation">,</span>src<span class="token operator">=</span>src<span class="token punctuation">)</span>
            <span class="token keyword">yield</span> book<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="æ•°æ®å…¥åº“"><a href="#æ•°æ®å…¥åº“" class="headerlink" title="æ•°æ®å…¥åº“"></a>æ•°æ®å…¥åº“</h2><p><strong>åˆ›å»ºæ•°æ®åº“</strong></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">mysql -uroot -p123456
create database spider01 charset=utf8;
use spider01
create table book(
    id int primarykey auto_increment,
    name varchar(128),
    src varchar(128)
)

select * from book;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>é…ç½®settings.py</strong></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å‚æ•°ä¸­ä¸€ä¸ªç«¯å£å· ä¸€ä¸ªæ˜¯å­—ç¬¦é›† éƒ½è¦æ³¨æ„</span>
DB_HOST <span class="token operator">=</span> <span class="token string">'127.0.0.1'</span>
<span class="token comment"># ç«¯å£å·æ˜¯ä¸€ä¸ªæ•´æ•°</span>
DB_PORT <span class="token operator">=</span> <span class="token number">3306</span>
DB_USER <span class="token operator">=</span> <span class="token string">'root'</span>
DB_PASSWROD <span class="token operator">=</span> <span class="token string">'123456'</span>
DB_NAME <span class="token operator">=</span> <span class="token string">'spider01'</span>
<span class="token comment"># utf-8çš„æ ä¸å…è®¸å†™</span>
DB_CHARSET <span class="token operator">=</span> <span class="token string">'utf8'</span>

ITEM_PIPELINES <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token string">'scrapy_readbook_101.pipelines.ScrapyReadbook101Pipeline'</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
   <span class="token comment"># MysqlPipeline</span>
  <span class="token string">'scrapy_readbook_101.pipelines.MysqlPipeline'</span><span class="token punctuation">:</span><span class="token number">301</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>åˆ›å»ºç®¡é“ç±»</strong></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åŠ è½½settingsæ–‡ä»¶</span>
<span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>project <span class="token keyword">import</span> get_project_settings
<span class="token keyword">import</span> pymysql

<span class="token keyword">class</span> <span class="token class-name">MysqlPipeline</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">open_spider</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        settings <span class="token operator">=</span> get_project_settings<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>host <span class="token operator">=</span> settings<span class="token punctuation">[</span><span class="token string">'DB_HOST'</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>port <span class="token operator">=</span>settings<span class="token punctuation">[</span><span class="token string">'DB_PORT'</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>user <span class="token operator">=</span>settings<span class="token punctuation">[</span><span class="token string">'DB_USER'</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>password <span class="token operator">=</span>settings<span class="token punctuation">[</span><span class="token string">'DB_PASSWROD'</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span>settings<span class="token punctuation">[</span><span class="token string">'DB_NAME'</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>charset <span class="token operator">=</span>settings<span class="token punctuation">[</span><span class="token string">'DB_CHARSET'</span><span class="token punctuation">]</span>

        self<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">connect</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>conn <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>
                            host<span class="token operator">=</span>self<span class="token punctuation">.</span>host<span class="token punctuation">,</span>
                            port<span class="token operator">=</span>self<span class="token punctuation">.</span>port<span class="token punctuation">,</span>
                            user<span class="token operator">=</span>self<span class="token punctuation">.</span>user<span class="token punctuation">,</span>
                            password<span class="token operator">=</span>self<span class="token punctuation">.</span>password<span class="token punctuation">,</span>
                            db<span class="token operator">=</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
                            charset<span class="token operator">=</span>self<span class="token punctuation">.</span>charset
        <span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>cursor <span class="token operator">=</span> self<span class="token punctuation">.</span>conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">process_item</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        sql <span class="token operator">=</span> <span class="token string">'insert into book(name,src) values("{}","{}")'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>item<span class="token punctuation">[</span><span class="token string">'src'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token comment"># æ‰§è¡Œsqlè¯­å¥</span>
        self<span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>
        <span class="token comment"># æäº¤</span>
        self<span class="token punctuation">.</span>conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> item

    <span class="token keyword">def</span> <span class="token function">close_spider</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="æ—¥å¿—ä¿¡æ¯ä»¥åŠæ—¥å¿—ç­‰çº§"><a href="#æ—¥å¿—ä¿¡æ¯ä»¥åŠæ—¥å¿—ç­‰çº§" class="headerlink" title="æ—¥å¿—ä¿¡æ¯ä»¥åŠæ—¥å¿—ç­‰çº§"></a>æ—¥å¿—ä¿¡æ¯ä»¥åŠæ—¥å¿—ç­‰çº§</h2><p><img src="http://image.kmoon.fun//images/202212221536464.png" alt="image-20221222153624162"></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># settings.py</span>

<span class="token comment"># æŒ‡å®šæ—¥å¿—çš„çº§åˆ«</span>
<span class="token comment"># LOG_LEVEL='WARNING'</span>

LOG_FILE <span class="token operator">=</span> <span class="token string">'logdemo.log'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é¦–å…ˆæ˜¯ä¸åœ¨ç»ˆç«¯æ˜¾ç¤ºæ—¥å¿—ï¼Œå³è¿˜æˆ‘ä»¬ä¸€ä¸ªæ¸…çˆ½çš„ç»ˆç«¯æ˜¾ç¤ºï¼›</p>
<p>å…¶æ¬¡æ˜¯æŠŠæ—¥å¿—ä¿å­˜åœ¨spidersæ–‡ä»¶å¤¹ä¸‹çš„xxxx.logæ–‡ä»¶ä¸­ï¼Œä¾›æˆ‘ä»¬æŸ¥çœ‹</p>
<h2 id="Requestså’Œreponseæ€»ç»“"><a href="#Requestså’Œreponseæ€»ç»“" class="headerlink" title="Requestså’Œreponseæ€»ç»“"></a>Requestså’Œreponseæ€»ç»“</h2><h2 id="scrapyçš„postè¯·æ±‚"><a href="#scrapyçš„postè¯·æ±‚" class="headerlink" title="scrapyçš„postè¯·æ±‚"></a>scrapyçš„postè¯·æ±‚</h2><p><img src="http://image.kmoon.fun//images/202212221541177.png" alt="image-20221222154111906"></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> scrapy
<span class="token keyword">import</span> json

<span class="token keyword">class</span> <span class="token class-name">TestpostSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'testpost'</span>
    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'https://fanyi.baidu.com/sug'</span><span class="token punctuation">]</span>
    <span class="token comment"># postè¯·æ±‚ å¦‚æœæ²¡æœ‰å‚æ•° é‚£ä¹ˆè¿™ä¸ªè¯·æ±‚å°†æ²¡æœ‰ä»»ä½•æ„ä¹‰</span>
    <span class="token comment"># æ‰€ä»¥start_urls ä¹Ÿæ²¡æœ‰ç”¨äº†</span>
    <span class="token comment"># parseæ–¹æ³•ä¹Ÿæ²¡æœ‰ç”¨äº†</span>
    <span class="token comment"># start_urls = ['https://fanyi.baidu.com/sug/']</span>
    <span class="token comment">#</span>
    <span class="token comment"># def parse(self, response):</span>
    <span class="token comment">#     pass</span>

    <span class="token keyword">def</span> <span class="token function">start_requests</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        url <span class="token operator">=</span> <span class="token string">'https://fanyi.baidu.com/sug'</span>
        data <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'kw'</span><span class="token punctuation">:</span> <span class="token string">'final'</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>FormRequest<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>formdata<span class="token operator">=</span>data<span class="token punctuation">,</span>callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse_second<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">parse_second</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        content <span class="token operator">=</span> response<span class="token punctuation">.</span>text
        obj <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>content<span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

        <span class="token keyword">print</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h1 id="Excelæ–‡ä»¶è¯»å†™"><a href="#Excelæ–‡ä»¶è¯»å†™" class="headerlink" title="Excelæ–‡ä»¶è¯»å†™"></a>Excelæ–‡ä»¶è¯»å†™</h1><h2 id="å®‰è£…ç›¸å…³åº“"><a href="#å®‰è£…ç›¸å…³åº“" class="headerlink" title="å®‰è£…ç›¸å…³åº“"></a>å®‰è£…ç›¸å…³åº“</h2><p><code>pip install xlrd==1.2.0</code></p>
<p>xlrdç‰ˆæœ¬å¤ªé«˜ä¼šå‡ºç°æŠ¥é”™</p>
<p><code>pip install xlsxwriter</code></p>
<p><strong>xlrd è¿™ä¸ªåŒ…æ˜¯å½“æˆ‘ä»¬éœ€è¦æ‰“å¼€æˆ–è€…è¯»å‡ºä¸€ä¸ªExcelæ–‡ä»¶æ—¶éœ€è¦ä¾èµ–çš„åŒ…</strong>ï¼Œæˆ‘ä»¬çš„å†™å…¥æ“ä½œæ˜¯ä¸éœ€è¦å®ƒçš„ã€‚</p>
<p><strong>xlsxwriter</strong> è¿™ä¸ªåŒ…ä»æ‹¼å†™å°±å¯ä»¥çœ‹å‡ºå®ƒ<strong>æ˜¯ä¸“ä¾›å†™å…¥Excelä½¿ç”¨çš„åŒ…</strong>ã€‚</p>
<h2 id="è¯»å†™æ“ä½œ"><a href="#è¯»å†™æ“ä½œ" class="headerlink" title="è¯»å†™æ“ä½œ"></a>è¯»å†™æ“ä½œ</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å¯¼å…¥åŒ…</span>
<span class="token keyword">import</span> xlrd
<span class="token keyword">import</span> xlsxwriter

<span class="token comment"># åˆ›å»ºä¸€å¼ ç©ºè¡¨</span>
<span class="token keyword">import</span> xlsxwriter
excel_file_writer <span class="token operator">=</span> xlsxwriter<span class="token punctuation">.</span>Workbook<span class="token punctuation">(</span><span class="token string">r'./demo.xlsx'</span><span class="token punctuation">)</span>
excel_file_writer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è¡¨çš„åˆ›å»ºå·¥ä½œåªéœ€è¦xlsxwriteråŒ…å³å¯ï¼Œæ— å…³å¦ä¸€ä¸ªåŒ…ã€‚å®ƒçš„è¿‡ç¨‹æ˜¯é¦–å…ˆæˆ‘ä»¬<strong>æ–°å»ºä¸€ä¸ªæ–‡ä»¶æ“ä½œå¯¹è±¡(excel_file_writer)<strong>ï¼Œå¹¶åœ¨</strong>åˆ›å»ºæ—¶ä¼ å…¥æ–‡ä»¶çš„è·¯å¾„å’Œæ–‡ä»¶åç§°</strong>(<strong>æ³¨æ„åç¼€åªèƒ½æ˜¯â€xlsxâ€</strong>)ã€‚</p>
<p>å†™å…¥æ•°æ®</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> xlsxwriter
 
excel_file_writer <span class="token operator">=</span> xlsxwriter<span class="token punctuation">.</span>Workbook<span class="token punctuation">(</span><span class="token string">r'./demo.xlsx'</span><span class="token punctuation">)</span>
 
excel_worksheet_writer <span class="token operator">=</span> excel_file_writer<span class="token punctuation">.</span>add_worksheet<span class="token punctuation">(</span><span class="token string">'sheet1'</span><span class="token punctuation">)</span>
 
student_name_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">]</span>
 
grade_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span>
 
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>student_name_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    excel_worksheet_writer<span class="token punctuation">.</span>write<span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>student_name_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>

    excel_worksheet_writer<span class="token punctuation">.</span>write<span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>grade_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    excel_file_writer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>write(å·¥ä½œè¡¨çš„è¡Œæ•°ï¼Œå·¥ä½œè¡¨çš„åˆ—æ•°ï¼Œå†™å…¥çš„æ•°æ®)</strong></p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://blog.csdn.net/qq_52736131/article/details/123251138">https://blog.csdn.net/qq_52736131/article/details/123251138</a> å…­ä¸‡å­—çˆ¬è™«ç¬”è®°</p>
<p><a href="https://blog.csdn.net/weixin_45816407/article/details/120176139">https://blog.csdn.net/weixin_45816407/article/details/120176139</a> xpathæ’ä»¶</p>

        </div>

    </div>

    

    

    

    

    

    
<nav class="article-nav">
  
    <a href="/2022/spider-example/" id="article-nav-newer" class="article-nav-link-wrap">
      <div class="article-nav-caption">ä¸‹ä¸€ç¯‡</div>
      <div class="article-nav-title">
        
          è®°å½•æ‰‹æ•²Pythonçˆ¬è™«æ¡ˆä¾‹ç»ƒä¹ â€œ
        
      </div>
    </a>
  
  
    <a href="/2022/vue/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-caption">ä¸Šä¸€ç¯‡</div>
      <div class="article-nav-title">å­¦ä¹ æœ­è®°-VUEjsä»å…¥é—¨åˆ°ç²¾é€š(æ”¾å¼ƒ)</div>
    </a>
  
</nav>


    <section class="share">
        <div class="share-title">åˆ†äº«</div>
        <a class="share-item" target="_blank"
            href="https://twitter.com/share?text=å­¦ä¹ æœ­è®°-Pythonçˆ¬è™«åŸºç¡€å…¥é—¨ - Kmoon | ä¸ªäººå­¦ä¹ è®°å½•&url=https%3A%2F%2Fwww.kmoon.fun%2F2022%2Fspider%2F">
            <ion-icon name="logo-twitter"></ion-icon>
        </a>
        <a class="share-item" target="_blank"
            href="https://www.facebook.com/sharer.php?title=å­¦ä¹ æœ­è®°-Pythonçˆ¬è™«åŸºç¡€å…¥é—¨ - Kmoon | ä¸ªäººå­¦ä¹ è®°å½•&u=https%3A%2F%2Fwww.kmoon.fun%2F2022%2Fspider%2F">
            <ion-icon name="logo-facebook"></ion-icon>
        </a>
        <!-- <a class="share-item" target="_blank"
            href="https://service.weibo.com/share/share.php?title=å­¦ä¹ æœ­è®°-Pythonçˆ¬è™«åŸºç¡€å…¥é—¨ - Kmoon | ä¸ªäººå­¦ä¹ è®°å½•&url=https://www.kmoon.fun/2022/spider/&pic=">
            <div class="n-icon n-icon-weibo"></div>
        </a> -->
    </section>

</article>










<section class="comments">
    <div id="valine-container"></div>
</section>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>







<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

</div>
                </section>
            </section>

            
            <aside class="sidebar sidebar-search-fix">
                

    <div class="search">
    <div class="has-icon-right">
        <input type="text" class="form-input" id="search" placeholder="SEARCH" autocomplete="off">
        <div class="form-icon">
            <ion-icon name="search"></ion-icon>
        </div>
    </div>
    <div class="search-result" id="search-ps"></div>
</div>


<div class="widget" id="widget">
    
      
  <div class="widget-wrap">
    <div class="widget-inner">
      <div class="toc post-toc-html"></div>
    </div>
  </div>

    
      
  <div class="widget-wrap widget-cate">
    <div class="widget-title"><span>Categories</span></div>
    <div class="widget-inner">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/XiaoHu-s-Daily/">XiaoHu's Daily</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BB%96%E5%B1%B1%E4%B9%8B%E7%9F%B3/">ä»–å±±ä¹‹çŸ³</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/">åˆ·é¢˜ç¬”è®°</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E4%B8%89%E4%BB%B6%E5%A5%97/">å‰ç«¯ä¸‰ä»¶å¥—</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E6%9C%AD%E8%AE%B0/">å­¦ä¹ æœ­è®°</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/">å®éªŒæŠ¥å‘Š</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%87%92%E4%BA%BA%E5%BF%85%E5%A4%87/">æ‡’äººå¿…å¤‡</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%AA%E5%91%BD%E5%90%8D/">æœªå‘½å</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B7%B1%E6%B8%8A/">æ·±æ¸Š</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%97%E9%80%8F%E5%B7%A5%E5%85%B7/">æ¸—é€å·¥å…·</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/">æ¸—é€æµ‹è¯•</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%B6%E5%9C%BA%E6%97%A5%E8%AE%B0/">é¶åœºæ—¥è®°</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%A1%B9%E7%9B%AE%E8%AE%A1%E5%88%92/">é¡¹ç›®è®¡åˆ’</a></li></ul>
    </div>
  </div>


    
      
  <div class="widget-wrap widget-tags">
    <div class="widget-title"><span>Tags</span></div>
    <div class="widget-inner">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/51%E5%8D%95%E7%89%87%E6%9C%BA/" rel="tag">51å•ç‰‡æœº</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Google/" rel="tag">Google</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RNN/" rel="tag">RNN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SRC/" rel="tag">SRC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sec/" rel="tag">Sec</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swing/" rel="tag">Swing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WUT/" rel="tag">WUT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Whut/" rel="tag">Whut</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/" rel="tag">Windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XSS/" rel="tag">XSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/daily/" rel="tag">daily</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hacker/" rel="tag">hacker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdwon/" rel="tag">markdwon</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/me/" rel="tag">me</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nmap/" rel="tag">nmap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/upload/" rel="tag">upload</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web%E5%AE%89%E5%85%A8/" rel="tag">webå®‰å…¨</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" rel="tag">ä¿¡æ¯æ”¶é›†</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%B3%E7%B3%BB%E4%BB%A3%E6%95%B0/" rel="tag">å…³ç³»ä»£æ•°</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%95%E7%89%87%E6%9C%BA/" rel="tag">å•ç‰‡æœº</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%8D%E4%B9%A0%E9%A2%98/" rel="tag">å¤ä¹ é¢˜</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/" rel="tag">å®éªŒæŠ¥å‘Š</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/" rel="tag">æ•°å­¦å»ºæ¨¡</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">æ•°æ®åº“</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86/" rel="tag">æ•°æ®åº“ç³»ç»ŸåŸç†</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">æ•°æ®ç»“æ„</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/" rel="tag">æ–‡ä»¶ä¸Šä¼ æ¼æ´</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8B%E8%AF%95/" rel="tag">æµ‹è¯•</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B8%97%E9%80%8F%E5%B7%A5%E5%85%B7/" rel="tag">æ¸—é€å·¥å…·</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" rel="tag">æ¸—é€æµ‹è¯•</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%88%AC%E8%99%AB/" rel="tag">çˆ¬è™«</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%88%AC%E8%99%AB%E6%A1%88%E4%BE%8B/" rel="tag">çˆ¬è™«æ¡ˆä¾‹</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%84%E7%BD%91%E6%8A%80%E6%9C%AF/" rel="tag">ç»„ç½‘æŠ€æœ¯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%BD%91/" rel="tag">è®¡ç½‘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0%E6%BC%8F%E6%B4%9E/" rel="tag">è·¨ç«™è¯·æ±‚ä¼ªé€ æ¼æ´</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%B6%E5%9C%BA/" rel="tag">é¶åœº</a></li></ul>
    </div>
  </div>


    
      
  <div class="widget-wrap widget-recent-posts">
    <div class="widget-title"><span>Recent Posts</span></div>
    <div class="widget-inner">
      <ul>
        
          <li>
            <a href="/2023/null/">å­¦ä¹ æœ­è®°-JavaScriptè‡ªæŸ¥æ–‡æ¡£</a>
          </li>
        
          <li>
            <a href="/2023/null/">å­¦ä¹ æœ­è®°-CSSè‡ªæŸ¥æ–‡æ¡£</a>
          </li>
        
          <li>
            <a href="/2023/html/">å­¦ä¹ æœ­è®°-HTMLè‡ªæŸ¥æ–‡æ¡£</a>
          </li>
        
          <li>
            <a href="/2022/code/">ä»–å±±ä¹‹çŸ³-ä»£ç éšæƒ³å½•çŸ¥è¯†æ˜Ÿçƒæ–‡åº“</a>
          </li>
        
          <li>
            <a href="/2022/js-basic/">å­¦ä¹ æœ­è®°-JavaScriptåŸºç¡€çŸ¥è¯†</a>
          </li>
        
      </ul>
    </div>
  </div>

    
      
  <div class="widget-wrap widget-archive">
    <div class="widget-title"><span>Archive</span></div>
    <div class="widget-inner">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/">2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a></li></ul>
    </div>
  </div>


    
</div>

<div id="backtop"><i class="icon icon-arrow-up"></i></div>
            </aside>
            
        </div>
    </div>

    <footer class="footer">
    <div class="footer-wave">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#3c4859" fill-opacity="1" d="M0,160L60,181.3C120,203,240,245,360,240C480,235,600,181,720,186.7C840,192,960,256,1080,261.3C1200,267,1320,213,1380,186.7L1440,160L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"></path></svg>
    </div>

    <!-- Please do not remove this -->
    <!-- å¼€æºä¸æ˜“ï¼Œè¯·å‹¿åˆ é™¤ -->
    <div class="footer-wrap">
        <div class="footer-inner"> 
            Kmoon | ä¸ªäººå­¦ä¹ è®°å½• &copy; 2023<br>
            Powered By Hexo Â· Theme By <a href="https://linhong.me/" target="_blank">Aomori</a> Â· <a href="https://github.com/lh1me/hexo-theme-aomori" target="_blank">Github</a>
			<br><img src="https://www.beian.gov.cn/img/new/gongan.png">
<a href="https://beian.miit.gov.cn/" target="_blank">æ¸ICPå¤‡2022011774å·-1</a>


        </div>
    </div>

</footer>

<script type="module" src="https://unpkg.com/ionicons@6.0.2/dist/ionicons/ionicons.esm.js"></script>






<script src="/dist/build.js?1654266144177.js"></script>


<script src="/dist/custom.js?1654266144177.js"></script>



<!-- ç™¾åº¦é“¾æ¥æäº¤ -->
<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>











<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":220,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>

</html>